{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/components/associationTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/components/associationTable.vue","mtime":1674694301490},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCAqIGFzIGFwaSBmcm9tICcuLi8uLi9hcGknCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Fzc29jaWF0aW9uVGFibGUnLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIG1vZGVsOiB7CiAgICBwcm9wOiAndmFsdWUnLAogICAgZXZlbnQ6ICd1cGRhdGVWYWwnCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1PYmo6IHsKICAgICAgICB0YWJsZTogbnVsbCwKICAgICAgICBwcmltYXJ5a2V5OiBudWxsLAogICAgICAgIGZpZWxkOiBudWxsLAogICAgICAgIHNlYXJjaEZpZWxkOiBudWxsLAogICAgICAgIG9sZFNlYXJjaEZpZWxkOiBudWxsCiAgICAgIH0sCiAgICAgIHNlYXJjaEZpZWxkOiBudWxsLAogICAgICB0YWJsZU9wdGlvbnM6IFtdLAogICAgICBsYWJlbE9wdGlvbnM6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliJ3lp4vljJbmlbDmja4KICAgIGluaXQgKCkgewogICAgICBhcGkuR2V0QXNzb2NpYXRpb25UYWJsZSgpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcwogICAgICAgIHRoaXMudGFibGVPcHRpb25zID0gZGF0YQogICAgICAgIC8vIOiuvue9rum7mOiupOmAieS4rQogICAgICAgIHRoaXMuZm9ybU9iai50YWJsZSA9IGRhdGFbMF0udGFibGUKICAgICAgICB0aGlzLmxhYmVsT3B0aW9ucyA9IGRhdGFbMF0udGFibGVGaWVsZHMKICAgICAgICB0aGlzLmZvcm1PYmoucHJpbWFyeWtleSA9ICdpZCcKICAgICAgICB0aGlzLmZvcm1PYmouZmllbGQgPSAnaWQnCiAgICAgIH0pCiAgICB9LAogICAgLy8g6YCJ5Lit5LqL5Lu2CiAgICBoYW5kbGVDaGFuZ2UgKHZhbCkgewogICAgICBjb25zdCB0aGF0ID0gdGhpcwogICAgICBjb25zdCB7IHRhYmxlRmllbGRzIH0gPSB0aGF0LnRhYmxlT3B0aW9ucy5maW5kKGl0ZW0gPT4gewogICAgICAgIHJldHVybiBpdGVtLnRhYmxlID09PSB2YWwKICAgICAgfSkKICAgICAgdGhhdC5sYWJlbE9wdGlvbnMgPSB0YWJsZUZpZWxkcwogICAgfSwKICAgIC8vIOi/h+a7pOadoeS7tumAieS4rQogICAgaGFuZGxlU2VhcmNoICh2YWwpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgY29uc3QgZmllbGRzID0gdGhhdC5sYWJlbE9wdGlvbnMuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIHJldHVybiB2YWwuaW5kZXhPZihpdGVtLmZpZWxkKSA+IC0xCiAgICAgIH0pCiAgICAgIHRoYXQuZm9ybU9iai5zZWFyY2hGaWVsZCA9IGZpZWxkcwogICAgfSwKICAgIC8vIOabtOaWsOaVsOaNrgogICAgaGFuZGxlVXBkYXRlICgpIHsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlVmFsJywgdGhpcy5mb3JtT2JqKQogICAgfSwKICAgIC8vIOaVsOaNrumqjOivgQogICAgb25TdWJtaXQgKCkgewogICAgICBsZXQgcmVzID0gZmFsc2UKICAgICAgdGhpcy4kcmVmcy5hc3NvY2lhdGlvbi52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHJlcyA9IHRydWUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgICByZXR1cm4gcmVzCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfQp9Cg=="},{"version":3,"sources":["associationTable.vue"],"names":[],"mappings":";AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"associationTable.vue","sourceRoot":"src/views/system/config/components/components","sourcesContent":["<template>\n  <div>\n    <el-form :model=\"formObj\" ref=\"association\">\n      <el-form-item label=\"关联表\" prop=\"table\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.table\" filterable clearable placeholder=\"请选择\" @change=\"handleChange\">\n          <el-option\n            v-for=\"item in tableOptions\"\n            :key=\"item.table\"\n            :label=\"item.tableName\"\n            :value=\"item.table\">\n            <span style=\"float: left\">{{ item.tableName }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.table }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"显示字段\" prop=\"field\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.field\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in labelOptions\"\n            :key=\"item.table\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"储存字段\" prop=\"primarykey\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.primarykey\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"(item,index) in labelOptions\"\n            :key=\"index\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"过滤条件\" prop=\"oldSearchField\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.oldSearchField\" multiple filterable clearable placeholder=\"请选择\"\n                   @change=\"handleSearch\">\n          <el-option\n            v-for=\"(item,index) in labelOptions\"\n            :key=\"index\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as api from '../../api'\n\nexport default {\n  name: 'associationTable',\n  props: {\n    value: {\n      type: Object\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'updateVal'\n  },\n  data () {\n    return {\n      formObj: {\n        table: null,\n        primarykey: null,\n        field: null,\n        searchField: null,\n        oldSearchField: null\n      },\n      searchField: null,\n      tableOptions: [],\n      labelOptions: []\n    }\n  },\n  methods: {\n    // 初始化数据\n    init () {\n      api.GetAssociationTable().then(res => {\n        const { data } = res\n        this.tableOptions = data\n        // 设置默认选中\n        this.formObj.table = data[0].table\n        this.labelOptions = data[0].tableFields\n        this.formObj.primarykey = 'id'\n        this.formObj.field = 'id'\n      })\n    },\n    // 选中事件\n    handleChange (val) {\n      const that = this\n      const { tableFields } = that.tableOptions.find(item => {\n        return item.table === val\n      })\n      that.labelOptions = tableFields\n    },\n    // 过滤条件选中\n    handleSearch (val) {\n      const that = this\n      const fields = that.labelOptions.filter(item => {\n        return val.indexOf(item.field) > -1\n      })\n      that.formObj.searchField = fields\n    },\n    // 更新数据\n    handleUpdate () {\n      this.$emit('updateVal', this.formObj)\n    },\n    // 数据验证\n    onSubmit () {\n      let res = false\n      this.$refs.association.validate((valid) => {\n        if (valid) {\n          res = true\n        } else {\n          return false\n        }\n      })\n      return res\n    }\n  },\n  created () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}