{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/file-uploader/lib/file-uploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/file-uploader/lib/file-uploader.vue","mtime":1674694550313},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgU3BhcmtNRDUgZnJvbSAnc3BhcmstbWQ1Jw0KaW1wb3J0IEQycFVwbG9hZGVyIGZyb20gJy4uLy4uL3VwbG9hZGVyJw0KaW1wb3J0IGxvZGFzaCBmcm9tICdsb2Rhc2gnDQppbXBvcnQgeyBkMkNydWRQbHVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZDItY3J1ZC1wbHVzJw0KaW1wb3J0IGxvZyBmcm9tICcuLi8uLi91dGlscy91dGlsLmxvZycNCi8vIOaWh+S7tuS4iuS8oOe7hOS7tizkvp3otZZEMnBVcGxvYWRlcg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnZDJwLWZpbGUtdXBsb2FkZXInLA0KICBtaXhpbnM6IFtkMkNydWRQbHVzLmlucHV0QmFzZV0sDQogIHByb3BzOiB7DQogICAgLy8g6YCJ5oup5paH5Lu25oyJ6ZKu55qE5aSn5bCPDQogICAgYnRuU2l6ZTogeyBkZWZhdWx0OiAnc21hbGwnIH0sDQogICAgLy8g6YCJ5oup5paH5Lu25oyJ6ZKu55qE5ZCN56ewDQogICAgYnRuTmFtZTogeyBkZWZhdWx0OiAn6YCJ5oup5paH5Lu2JyB9LA0KICAgIC8vIOWPr+mAieWTquS6m+exu+Wei+eahOaWh+S7tg0KICAgIGFjY2VwdDoge30sDQogICAgLy8g5LiK5Lyg5ZCO56uv57G75Z6L77yMW2NvcyxxaW5pdSxhbGlvc3MsZm9ybV0NCiAgICB0eXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiB1bmRlZmluZWQgLy8g5LiK5Lyg57G75Z6L77yaZm9ybSBjb3MgcWluaXUgIGFsaW9zcw0KICAgIH0sDQogICAgLy8g5YC877yadXJsPGJyLz4NCiAgICAvLyDmiJYgW3VybDEsdXJsMl08YnIvPg0KICAgIC8vIOaIliB7dXJsOid1cmwnLG1kNTonJyxzaXplOm51bWJlcn08YnIvPg0KICAgIC8vIOaIliBbe3VybDondXJsJyxtZDU6Jycsc2l6ZTpudW1iZXJ9XTxici8+DQogICAgLy8gPGJyLz4NCiAgICAvLyBsaW1pdD0xIOaXtiBpbnB1dOS6i+S7tui/lOWbniB7dXJsOid1cmwnLG1kNTonJyxzaXplOm51bWJlcn08YnIvPg0KICAgIC8vIGxpbWl0PjEg5pe2IGlucHV05LqL5Lu26L+U5ZueIOaVsOe7hDxici8+DQogICAgdmFsdWU6IHsNCiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5LCBPYmplY3RdDQogICAgfSwNCiAgICAvLyDmoLflvI/lkI7nvIAg6L+95Yqg5YiwdXJs55qE5ZCO6Z2i77yM6L+b6KGM5Zu+54mH5aSE55CG77yM6ZyA6KaB5Yiw5a+56LGh5a2Y5YKo5bmz5Y+w6YWN572u5qC35byPDQogICAgc3VmZml4OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogZmFsc2UNCiAgICB9LA0KICAgIC8vIOi/lOWbnuexu+WeizogdXJsPeS7hei/lOWbnumTvuaOpSwgb2JqZWN0PeWMheWQq21kNeWSjHNpemUgLCBrZXk95LuF6L+U5Zue5paH5Lu2a2V5DQogICAgcmV0dXJuVHlwZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ3VybCcNCiAgICB9LA0KICAgIC8vIOiHquWumuS5ieWPguaVsA0KICAgIGN1c3RvbTogew0KICAgICAgdHlwZTogT2JqZWN0DQogICAgfSwNCiAgICAvLyDlhoXpg6jlsIHoo4VbZWwtdXBsb2FkXShodHRwczovL2VsZW1lbnQuZWxlbWUuY24vIy96aC1DTi9jb21wb25lbnQvdXBsb2FkKee7hOS7tueahOWxnuaAp+WPguaVsDxici8+DQogICAgLy8g5rOo5oSP77yMZm9ybeaWueW8j+S4iuS8oOeahGFjdGlvbuOAgW5hbWXjgIFoZWFkZXJz562J5Y+C5pWw5LiN5Zyo5q2k6K6+572uDQogICAgZWxQcm9wczogew0KICAgICAgdHlwZTogT2JqZWN0DQogICAgfSwNCiAgICAvLyDpooTop4jlr7nor53moYbnmoTphY3nva4NCiAgICBwcmV2aWV3OiB7DQogICAgICB0eXBlOiBPYmplY3QNCiAgICB9LA0KICAgIC8vIOaWh+S7tuWkp+Wwj+mZkOWItiA8YnIvPg0KICAgIC8vIOWmguaenOS8oOWFpXtsaW1pdCx0aXAoZmlsZVNpemUsbGltaXQpe3ZtLiRtZXNzYWdlKCflj6/ku6Xoh6rlrprkuYnmj5DnpLonKX19DQogICAgc2l6ZUxpbWl0OiB7DQogICAgICB0eXBlOiBOdW1iZXIsIE9iamVjdA0KICAgIH0sDQogICAgLy8g5p6E5bu65LiL6L29dXJs5pa55rOVDQogICAgYnVpbGRVcmw6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgZGVmYXVsdDogZnVuY3Rpb24gKHZhbHVlLCBpdGVtKSB7IHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykgPyBpdGVtLnVybCA6IHZhbHVlIH0NCiAgICB9LA0KICAgIC8vIOS4iuS8oOe7hOS7tuWPguaVsO+8jOS8muS4tOaXtuimhuebluWFqOWxgOS4iuS8oOmFjee9ruWPguaVsFtkMnAtdXBsb2FkZXJdKC9ndWlkZS9leHRlbmRzL3VwbG9hZGVyLmh0bWwpDQogICAgdXBsb2FkZXI6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQgKCkgeyByZXR1cm4ge30gfQ0KICAgIH0sDQogICAgLy8g5LiOZWwtdXBsb2Fk5LiA6Ie0DQogICAgYmVmb3JlVXBsb2FkOiB7DQogICAgICB0eXBlOiBGdW5jdGlvbg0KICAgIH0NCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGNvbnRleHQ6IHt9LA0KICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnLA0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBhdmF0YXJMb2FkaW5nOiB1bmRlZmluZWQNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuZW1pdFZhbHVlID0gdGhpcy52YWx1ZQ0KICAgIHRoaXMuaW5pdFZhbHVlKHRoaXMudmFsdWUpDQogIH0sDQogIHdhdGNoOiB7DQogICAgdmFsdWUgKHZhbHVlKSB7DQogICAgICBpZiAodGhpcy5kaXNwYXRjaCkgew0KICAgICAgICB0aGlzLmRpc3BhdGNoKCdFbEZvcm1JdGVtJywgJ2VsLmZvcm0uYmx1cicpDQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB2YWx1ZSkNCiAgICAgIGlmICh0aGlzLmVtaXRWYWx1ZSA9PT0gdmFsdWUpIHsNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLmVtaXRWYWx1ZSA9IHZhbHVlDQogICAgICB0aGlzLmluaXRWYWx1ZSh2YWx1ZSkNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgX2VsUHJvcHMgKCkgew0KICAgICAgY29uc3QgZGVmYXVsdEVsUHJvcHMgPSB0aGlzLmdldERlZmF1bHRFbFByb3BzKCkNCiAgICAgIE9iamVjdC5hc3NpZ24oZGVmYXVsdEVsUHJvcHMsIHRoaXMuZWxQcm9wcykNCiAgICAgIHJldHVybiBkZWZhdWx0RWxQcm9wcw0KICAgIH0sDQogICAgYXZhdGFyVXJsICgpIHsNCiAgICAgIGlmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuZmlsZUxpc3RbMF0NCiAgICAgICAgbG9nLmRlYnVnKCdmaWxlLCcsIGZpbGUsIGZpbGUuc3RhdHVzKQ0KICAgICAgICBpZiAoZmlsZS5yZXNwb25zZSAhPSBudWxsICYmIGZpbGUucmVzcG9uc2UudXJsICE9IG51bGwpIHsNCiAgICAgICAgICByZXR1cm4gZmlsZS5yZXNwb25zZS51cmwNCiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnVybCAhPSBudWxsKSB7DQogICAgICAgICAgcmV0dXJuIGZpbGUudXJsDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBudWxsDQogICAgfSwNCiAgICB1cGxvYWRDbGFzcyAoKSB7DQogICAgICBpZiAodGhpcy5fZWxQcm9wcy5saXN0VHlwZSA9PT0gJ2F2YXRhcicpIHsNCiAgICAgICAgcmV0dXJuICdhdmF0YXItdXBsb2FkZXInDQogICAgICB9IGVsc2UgaWYgKHRoaXMuX2VsUHJvcHMubGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnKSB7DQogICAgICAgIGlmICh0aGlzLmZpbGVMaXN0ICYmIHRoaXMuX2VsUHJvcHMubGltaXQgIT09IDAgJiYgdGhpcy5maWxlTGlzdC5sZW5ndGggPj0gdGhpcy5fZWxQcm9wcy5saW1pdCkgew0KICAgICAgICAgIHJldHVybiAnaW1hZ2UtdXBsb2FkZXIgaGlkZS1wbHVzJw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAnaW1hZ2UtdXBsb2FkZXInDQogICAgICB9DQogICAgICByZXR1cm4gJ2ZpbGUtdXBsb2FkZXInDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQmx1ciAoKSB7DQogICAgICBjb25zb2xlLmxvZygnYmx1cicpDQogICAgfSwNCiAgICBnZXREZWZhdWx0RWxQcm9wcyAoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBsaW1pdDogMCwNCiAgICAgICAgbGlzdFR5cGU6ICd0ZXh0JywNCiAgICAgICAgc2hvd0ZpbGVMaXN0OiB0cnVlLA0KICAgICAgICBhY3Rpb246ICcnLA0KICAgICAgICBvblByZXZpZXc6IChmaWxlKSA9PiB7DQogICAgICAgICAgaWYgKHRoaXMuX2VsUHJvcHMubGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnIHx8IHRoaXMuX2VsUHJvcHMubGlzdFR5cGUgPT09ICdwaWN0dXJlJyB8fCB0aGlzLl9lbFByb3BzLmxpc3RUeXBlID09PSAnYXZhdGFyJykgew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsDQogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGZpbGUudXJsKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYmVmb3JlVXBsb2FkOiBhc3luYyAoZmlsZSkgPT4gew0KICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVVwbG9hZCkgew0KICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgdGhpcy5iZWZvcmVVcGxvYWQoZmlsZSwgeyB2bTogdGhpcyB9KQ0KICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICh0aGlzLnNpemVMaW1pdCA9PSBudWxsKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgbGltaXQgPSB0aGlzLnNpemVMaW1pdA0KICAgICAgICAgIGxldCBzaG93TWVzc2FnZSA9IG51bGwNCiAgICAgICAgICBpZiAodHlwZW9mIGxpbWl0ID09PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgbGltaXQgPSB0aGlzLnNpemVMaW1pdA0KICAgICAgICAgICAgc2hvd01lc3NhZ2UgPSAoZmlsZVNpemUsIGxpbWl0KSA9PiB7DQogICAgICAgICAgICAgIGlmICh0aGlzLiRtZXNzYWdlKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbGltaXRUaXAgPSB0aGlzLmNvbXB1dGVGaWxlU2l6ZShsaW1pdCkNCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlU2l6ZVRpcCA9IHRoaXMuY29tcHV0ZUZpbGVTaXplKGZpbGUuc2l6ZSkNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgbWVzc2FnZTogJ+aWh+S7tuWkp+Wwj+S4jeiDvei2hei/hycgKyBsaW1pdFRpcCArICfvvIzlvZPliY3mlofku7blpKflsI86JyArIGZpbGVTaXplVGlwLCB0eXBlOiAnd2FybmluZycgfSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBsaW1pdCA9IHRoaXMuc2l6ZUxpbWl0LmxpbWl0DQogICAgICAgICAgICBzaG93TWVzc2FnZSA9IHRoaXMuc2l6ZUxpbWl0LnRpcA0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoZmlsZS5zaXplID4gbGltaXQpIHsNCiAgICAgICAgICAgIGxvZy5kZWJ1Zygn5paH5Lu25aSn5bCP6LaF6L+H6ZmQ5Yi277yaJywgZmlsZS5zaXplKQ0KICAgICAgICAgICAgc2hvd01lc3NhZ2UoZmlsZS5zaXplLCBsaW1pdCkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0VmFsdWUgKHZhbHVlKSB7DQogICAgICB0aGlzLmluaXRWYWx1ZSh2YWx1ZSkNCiAgICAgIC8vIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHRoaXMuZmlsZUxpc3QpDQogICAgfSwNCiAgICBnZXRVcGxvYWRlciAoKSB7DQogICAgICBsZXQgdHlwZSA9IHRoaXMudHlwZQ0KICAgICAgaWYgKHRoaXMudXBsb2FkZXIgIT0gbnVsbCAmJiB0aGlzLnVwbG9hZGVyLnR5cGUgIT0gbnVsbCkgew0KICAgICAgICB0eXBlID0gdGhpcy51cGxvYWRlci50eXBlDQogICAgICB9DQogICAgICByZXR1cm4gRDJwVXBsb2FkZXIuZ2V0VXBsb2FkZXIodHlwZSkNCiAgICB9LA0KICAgIGluaXRWYWx1ZSAodmFsdWUpIHsNCiAgICAgIGxldCBmaWxlTGlzdCA9IFtdDQogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgew0KDQogICAgICB9IGVsc2UgaWYgKHR5cGVvZiAodmFsdWUpID09PSAnc3RyaW5nJykgew0KICAgICAgICBpZiAodmFsdWUgIT09ICcnKSB7DQogICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUubGFzdEluZGV4T2YoJy8nKSArIDEpDQogICAgICAgICAgZmlsZUxpc3QgPSBbeyB2YWx1ZTogdmFsdWUsIG5hbWU6IGZpbGVOYW1lIH1dDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCAmJiB0eXBlb2YgKHZhbHVlWzBdKSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICBjb25zdCB0bXAgPSBbXQ0KICAgICAgICAgIHZhbHVlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGl0ZW0uc3Vic3RyaW5nKGl0ZW0ubGFzdEluZGV4T2YoJy8nKSArIDEpDQogICAgICAgICAgICB0bXAucHVzaCh7IHZhbHVlOiBpdGVtLCBuYW1lOiBmaWxlTmFtZSB9KQ0KICAgICAgICAgIH0pDQogICAgICAgICAgZmlsZUxpc3QgPSB0bXANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBmaWxlTGlzdCA9IHZhbHVlDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsNCiAgICAgICAgZmlsZUxpc3QgPSBbdmFsdWVdDQogICAgICB9DQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZmlsZUxpc3QpIHsNCiAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT0gbnVsbCkgew0KICAgICAgICAgIGl0ZW0udmFsdWUgPSBpdGVtLnVybA0KICAgICAgICB9DQogICAgICAgIGl0ZW0udXJsID0gdGhpcy5idWlsZFVybChpdGVtLnZhbHVlLCBpdGVtKQ0KICAgICAgfQ0KICAgICAgdGhpcy5yZXNldEZpbGVMaXN0KGZpbGVMaXN0KQ0KICAgIH0sDQogICAgY29tcHV0ZUZpbGVTaXplIChmaWxlU2l6ZSkgew0KICAgICAgbGV0IHNpemVUaXAgPSBmaWxlU2l6ZQ0KICAgICAgaWYgKGZpbGVTaXplID4gKDEwMjQgKiAxMDI0ICogMTAyNCkpIHsNCiAgICAgICAgc2l6ZVRpcCA9IChmaWxlU2l6ZSAvICgxMDI0ICogMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpICsgJ0cnDQogICAgICB9IGVsc2UgaWYgKGZpbGVTaXplID4gKDEwMjQgKiAxMDI0KSkgew0KICAgICAgICBzaXplVGlwID0gKGZpbGVTaXplIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKSArICdNJw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc2l6ZVRpcCA9IE1hdGgucm91bmQoZmlsZVNpemUgLyAoMTAyNCkpICsgJ0snDQogICAgICB9DQogICAgICByZXR1cm4gc2l6ZVRpcA0KICAgIH0sDQogICAgcmVzZXRGaWxlTGlzdCAoZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMuJHNldCh0aGlzLCAnZmlsZUxpc3QnLCBmaWxlTGlzdCkNCiAgICB9LA0KICAgIGhhbmRsZVVwbG9hZFByb2dyZXNzIChldmVudCwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGlmICh0aGlzLl9lbFByb3BzLmxpc3RUeXBlID09PSAnYXZhdGFyJykgew0KICAgICAgICBsb2cuZGVidWcoJ3Byb2dyZXNzJywgZXZlbnQsIGZpbGUpDQogICAgICAgIHRoaXMuYXZhdGFyTG9hZGluZyA9IE1hdGguZmxvb3IoZXZlbnQucGVyY2VudCkNCiAgICAgICAgaWYgKGV2ZW50LnBlcmNlbnQgPT09IDEwMCkgew0KICAgICAgICAgIHRoaXMuYXZhdGFyTG9hZGluZyA9IHVuZGVmaW5lZA0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCdwcm9ncmVzcycsIGV2ZW50LCB7IGZpbGUsIGZpbGVMaXN0LCB2bTogdGhpcyB9KQ0KICAgIH0sDQogICAgaGFuZGxlVXBsb2FkRmlsZVN1Y2Nlc3MgKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHJlcy5zaXplID0gcmVzLnNpemUgIT0gbnVsbCA/IHJlcy5zaXplIDogZmlsZS5zaXplDQogICAgICByZXMubmFtZSA9IHJlcy5uYW1lICE9IG51bGwgPyByZXMubmFtZSA6IGZpbGUubmFtZQ0KICAgICAgcmVzLnZhbHVlID0gdGhpcy5nZXRSZXR1cm5WYWx1ZShyZXMpDQogICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucmV0dXJuVHlwZSA9PT0gJ29iamVjdCcgPyByZXMudXJsIDogcmVzLnZhbHVlDQogICAgICBjb25zdCB1cmwgPSB0aGlzLmJ1aWxkVXJsKHZhbHVlLCByZXMpDQogICAgICBmaWxlLnVybCA9IHJlcy51cmwgPSB1cmwNCiAgICAgIHRoaXMucmVzZXRGaWxlTGlzdChmaWxlTGlzdCkNCiAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnLCByZXMsIGZpbGUpDQogICAgICBjb25zdCBsaXN0ID0gW10NCiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWxlTGlzdCkgew0KICAgICAgICAvLyBpZiAoaXRlbS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnKSB7DQogICAgICAgIC8vICAgbG9nLmRlYnVnKCflvZPliY3mlofku7bkuIrkvKDlrozmiJDvvIznrYnlvoXliankuIvnmoTmlofku7blhajpg6jkuIrkvKDmiJDlip/lkI7lho3mm7TmlrB2YWx1ZScpDQogICAgICAgIC8vICAgcmV0dXJuDQogICAgICAgIC8vIH0NCiAgICAgICAgaWYgKGl0ZW0ucmVzcG9uc2UgIT0gbnVsbCAmJiBpdGVtLnJlc3BvbnNlLnVybCAhPSBudWxsKSB7DQogICAgICAgICAgbGlzdC5wdXNoKHsgLi4uaXRlbS5yZXNwb25zZSB9KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxpc3QucHVzaChpdGVtKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBsb2cuZGVidWcoJ2hhbmRsZVVwbG9hZEZpbGVTdWNjZXNzIGxpc3QnLCBsaXN0LCByZXMpDQogICAgICB0aGlzLmVtaXQocmVzLCBsaXN0KQ0KICAgIH0sDQogICAgaXNIYXNVcGxvYWRpbmdJdGVtICgpIHsNCiAgICAgIGNvbnN0IGZpbGVMaXN0ID0gdGhpcy4kcmVmcy5maWxlVXBsb2FkZXIudXBsb2FkRmlsZXMNCiAgICAgIGlmIChmaWxlTGlzdCAmJiBmaWxlTGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWxlTGlzdCkgew0KICAgICAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gJ3VwbG9hZGluZycpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9LA0KICAgIGhhbmRsZVVwbG9hZEZpbGVSZW1vdmUgKGZpbGUsIGZpbGVMaXN0KSB7DQogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3QNCiAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmUnLCBmaWxlTGlzdCkNCiAgICAgIHRoaXMuZW1pdExpc3QoZmlsZUxpc3QpDQogICAgICB0aGlzLiRlbWl0KCdyZW1vdmUnLCBmaWxlLCBmaWxlTGlzdCkNCiAgICB9LA0KICAgIGhhbmRsZVVwbG9hZEZpbGVFcnJvciAoZXJyLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgY29uc29sZS5lcnJvcign5paH5Lu25LiK5Lyg5aSx6LSlJywgZXJyLCBmaWxlLCBmaWxlTGlzdCkNCiAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAnZXJyb3InLCBtZXNzYWdlOiAn5paH5Lu25LiK5Lyg5aSx6LSlJyB9KQ0KICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBlcnIsIGZpbGUsIGZpbGVMaXN0KQ0KICAgIH0sDQogICAgcHJldmlld0F2YXRhciAoJGV2ZW50KSB7DQogICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkNCiAgICAgIHRoaXMuX2VsUHJvcHMub25QcmV2aWV3KHRoaXMuZmlsZUxpc3RbMF0pDQogICAgfSwNCiAgICByZW1vdmVBdmF0YXIgKCRldmVudCkgew0KICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgICB0aGlzLnJlc2V0RmlsZUxpc3QoW10pDQogICAgICB0aGlzLmVtaXQoKSAvLyDov5Tlm551bmRlZmluZWTvvIznm7jlvZPkuo7muIXnqbrlt7LmnInnmoTlgLwNCiAgICB9LA0KICAgIGVtaXQgKHJlcywgbGlzdCkgew0KICAgICAgaWYgKHRoaXMuX2VsUHJvcHMubGltaXQgPT09IDEpIHsNCiAgICAgICAgY29uc3QgdmFsdWUgPSByZXMgPyByZXMudmFsdWUgOiB1bmRlZmluZWQNCiAgICAgICAgdGhpcy5lbWl0VmFsdWUgPSB2YWx1ZQ0KICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbHVlKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbWl0TGlzdChsaXN0KQ0KICAgICAgfQ0KICAgIH0sDQogICAgZW1pdExpc3QgKGxpc3QpIHsNCiAgICAgIGlmIChsaXN0KSB7DQogICAgICAgIGNvbnN0IHRtcCA9IFtdDQogICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICB0bXAucHVzaCh0aGlzLmdldFJldHVyblZhbHVlKGl0ZW0pKQ0KICAgICAgICB9KQ0KICAgICAgICBsaXN0ID0gdG1wDQogICAgICB9DQogICAgICB0aGlzLmVtaXRWYWx1ZSA9IGxpc3QNCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbGlzdCkNCiAgICB9LA0KICAgIGdldFJldHVyblZhbHVlIChpdGVtKSB7DQogICAgICBjb25zdCB2YWx1ZSA9IGl0ZW1bdGhpcy5yZXR1cm5UeXBlXQ0KICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIHZhbHVlDQogICAgICB9DQogICAgICByZXR1cm4gaXRlbQ0KICAgIH0sDQogICAgaHR0cFJlcXVlc3QgKG9wdGlvbikgew0KICAgICAgUHJvbWlzZS5hbGwoWw0KICAgICAgICB0aGlzLmRvVXBsb2FkKG9wdGlvbiksDQogICAgICAgIHRoaXMuY29tcHV0ZU1kNShvcHRpb24uZmlsZSkNCiAgICAgIF0pLnRoZW4oKHJldCkgPT4gew0KICAgICAgICAvLyDlvpfliLDnu4TlkIjnu5PmnpzvvIwgc2l6Ze+8jG1kNQ0KICAgICAgICBjb25zdCByZXN1bHQgPSByZXRbMF0NCiAgICAgICAgcmVzdWx0Lm1kNSA9IHJldFsxXQ0KICAgICAgICBvcHRpb24ub25TdWNjZXNzKHJlc3VsdCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBkb1VwbG9hZCAob3B0aW9uKSB7DQogICAgICBsZXQgY29uZmlnID0gdGhpcy51cGxvYWRlcg0KICAgICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7DQogICAgICAgIGNvbmZpZyA9IHt9DQogICAgICB9DQogICAgICBpZiAoIWxvZGFzaC5pc0VtcHR5KHRoaXMuX2VsUHJvcHMuYWN0aW9uKSkgew0KICAgICAgICBjb25maWcuYWN0aW9uID0gdGhpcy5fZWxQcm9wcy5hY3Rpb24NCiAgICAgIH0NCiAgICAgIGlmICghbG9kYXNoLmlzRW1wdHkodGhpcy5fZWxQcm9wcy5uYW1lKSkgew0KICAgICAgICBjb25maWcubmFtZSA9IHRoaXMuX2VsUHJvcHMubmFtZQ0KICAgICAgfQ0KICAgICAgaWYgKCFsb2Rhc2guaXNFbXB0eSh0aGlzLl9lbFByb3BzLmRhdGEpKSB7DQogICAgICAgIGNvbmZpZy5kYXRhID0gdGhpcy5fZWxQcm9wcy5kYXRhDQogICAgICB9DQogICAgICBpZiAoIWxvZGFzaC5pc0VtcHR5KHRoaXMuX2VsUHJvcHMuaGVhZGVycykpIHsNCiAgICAgICAgY29uZmlnLmhlYWRlcnMgPSB0aGlzLl9lbFByb3BzLmhlYWRlcnMNCiAgICAgIH0NCiAgICAgIGlmICghbG9kYXNoLmlzRW1wdHkodGhpcy5jdXN0b20pKSB7DQogICAgICAgIGNvbmZpZy5jdXN0b20gPSB0aGlzLmN1c3RvbQ0KICAgICAgfQ0KICAgICAgY29uc3QgdXBsb2FkT3B0aW9uID0gew0KICAgICAgICBmaWxlOiBvcHRpb24uZmlsZSwNCiAgICAgICAgZmlsZU5hbWU6IG9wdGlvbi5maWxlLm5hbWUsDQogICAgICAgIG9uUHJvZ3Jlc3M6IG9wdGlvbi5vblByb2dyZXNzLA0KICAgICAgICBvbkVycm9yOiBvcHRpb24ub25FcnJvciwNCiAgICAgICAgY29uZmlnOiBjb25maWcNCiAgICAgIH0NCiAgICAgIHRoaXMuJGVtaXQoJ3N0YXJ0JywgdXBsb2FkT3B0aW9uKQ0KICAgICAgcmV0dXJuIHRoaXMuZ2V0VXBsb2FkZXIoKS50aGVuKHVwbG9hZGVyID0+IHsNCiAgICAgICAgcmV0dXJuIHVwbG9hZGVyLnVwbG9hZCh1cGxvYWRPcHRpb24pDQogICAgICB9KS50aGVuKHJldCA9PiB7DQogICAgICAgIGlmICh0aGlzLnN1ZmZpeCAhPSBudWxsKSB7DQogICAgICAgICAgcmV0LnVybCArPSB0aGlzLnN1ZmZpeA0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXQNCiAgICAgIH0pDQogICAgfSwNCiAgICBvbkV4Y2VlZCAoZmlsZXMsIGZpbGVMaXN0KSB7DQogICAgICBsb2cuZGVidWcoJ+aWh+S7tuaVsOmHj+i2heWHuumZkOWIticpDQogICAgICBpZiAodGhpcy5fZWxQcm9wcy5saW1pdCA9PT0gMSkgew0KICAgICAgICB0aGlzLmNsZWFyRmlsZXMoKQ0KICAgICAgICB0aGlzLiRyZWZzLmZpbGVVcGxvYWRlci5oYW5kbGVTdGFydChmaWxlc1swXSkNCiAgICAgICAgdGhpcy4kcmVmcy5maWxlVXBsb2FkZXIuc3VibWl0KCkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLA0KICAgICAgICBtZXNzYWdlOiAn5bey6L6+5pyA5aSn6ZmQ5Yi25pWw6YeP77yM6K+35Yig6Zmk5LiA5Liq5paH5Lu25ZCO5YaN5LiK5LygJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KQ0KICAgIH0sDQogICAgY2xlYXJGaWxlcyAoKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy5maWxlVXBsb2FkZXIgIT0gbnVsbCkgew0KICAgICAgICB0aGlzLiRyZWZzLmZpbGVVcGxvYWRlci5jbGVhckZpbGVzKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEZpbGVMaXN0ICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmZpbGVMaXN0DQogICAgfSwNCiAgICBjb21wdXRlTWQ1IChmaWxlKSB7DQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICBjb25zdCBibG9iU2xpY2UgPSBGaWxlLnByb3RvdHlwZS5zbGljZSB8fCBGaWxlLnByb3RvdHlwZS5tb3pTbGljZSB8fCBGaWxlLnByb3RvdHlwZS53ZWJraXRTbGljZQ0KICAgICAgICBjb25zdCBjaHVua1NpemUgPSAyMDk3MTUyIC8vIFJlYWQgaW4gY2h1bmtzIG9mIDJNQg0KICAgICAgICBjb25zdCBjaHVua3MgPSBNYXRoLmNlaWwoZmlsZS5zaXplIC8gY2h1bmtTaXplKQ0KICAgICAgICBsZXQgY3VycmVudENodW5rID0gMA0KICAgICAgICBjb25zdCBzcGFyayA9IG5ldyBTcGFya01ENS5BcnJheUJ1ZmZlcigpDQogICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpDQoNCiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSAoZSkgPT4gew0KICAgICAgICAgIHNwYXJrLmFwcGVuZChlLnRhcmdldC5yZXN1bHQpIC8vIEFwcGVuZCBhcnJheSBidWZmZXINCiAgICAgICAgICBjdXJyZW50Q2h1bmsrKw0KDQogICAgICAgICAgaWYgKGN1cnJlbnRDaHVuayA8IGNodW5rcykgew0KICAgICAgICAgICAgbG9hZE5leHQoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCBtZDUgPSBzcGFyay5lbmQoKQ0KICAgICAgICAgICAgbG9nLmRlYnVnKCdjb21wdXRlZCBoYXNoJywgbWQ1KSAvLyBDb21wdXRlIGhhc2gNCg0KICAgICAgICAgICAgcmVzb2x2ZShtZDUpDQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1wcm9taXNlLXJlamVjdC1lcnJvcnMNCiAgICAgICAgICByZWplY3QoJ21kNSBjb21wdXRlciBlcnJvcicsIGVycm9yKQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gbG9hZE5leHQgKCkgew0KICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY3VycmVudENodW5rICogY2h1bmtTaXplDQogICAgICAgICAgY29uc3QgZW5kID0gKChzdGFydCArIGNodW5rU2l6ZSkgPj0gZmlsZS5zaXplKSA/IGZpbGUuc2l6ZSA6IHN0YXJ0ICsgY2h1bmtTaXplDQoNCiAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2JTbGljZS5jYWxsKGZpbGUsIHN0YXJ0LCBlbmQpKQ0KICAgICAgICB9DQoNCiAgICAgICAgbG9hZE5leHQoKQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["file-uploader.vue"],"names":[],"mappings":";AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"file-uploader.vue","sourceRoot":"node_modules/d2p-extends/src/file-uploader/lib","sourcesContent":["<template>\r\n  <div class=\"d2p-file-uploader\" :class=\"{'is-disabled':disabled}\" >\r\n  <el-upload :class=\"uploadClass\"\r\n             :file-list=\"fileList\"\r\n             :disabled=\"disabled\"\r\n             :http-request=\"httpRequest\"\r\n             :on-exceed=\"onExceed\"\r\n             :on-remove=\"handleUploadFileRemove\"\r\n             :on-success=\"handleUploadFileSuccess\"\r\n             :on-error=\"handleUploadFileError\"\r\n             :on-progress=\"handleUploadProgress\"\r\n             @blur=\"handleBlur\"\r\n             ref=\"fileUploader\"\r\n             v-bind=\"_elProps\"\r\n  >\r\n    <el-button :disabled=\"disabled\" :size=\"btnSize\" type=\"primary\" v-if=\"_elProps.listType === 'text' || this._elProps.listType === 'picture'\">{{btnName}}</el-button>\r\n    <div class=\"avatar-item-wrapper\"  v-else-if=\"this._elProps.listType === 'picture-card'\">\r\n      <i class=\"el-icon-plus avatar-uploader-icon\" />\r\n    </div>\r\n    <template v-else-if=\"_elProps.listType ===  'avatar'\">\r\n      <div class=\"avatar-item-wrapper\">\r\n        <div class=\"status-uploading\" v-if=\"avatarLoading!=null\">\r\n          <el-progress type=\"circle\" :percentage=\"avatarLoading\" :width=\"70\"/>\r\n        </div>\r\n        <div v-if=\"avatarUrl!=null\" class=\"avatar\">\r\n          <el-image :src=\"avatarUrl\">\r\n            <div slot=\"placeholder\" class=\"image-slot\">\r\n              <img src=\"./loading-spin.svg\">\r\n            </div>\r\n          </el-image>\r\n          <div class=\"preview\" @click.stop=\"\" >\r\n            <i class=\"el-icon-zoom-in\" @click=\"previewAvatar\"></i>\r\n            <i class=\"el-icon-delete\" v-if=\"!disabled\" @click=\"removeAvatar\"></i>\r\n          </div>\r\n        </div>\r\n        <i class=\"el-icon-plus avatar-uploader-icon\" v-else/>\r\n      </div>\r\n    </template>\r\n  </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\"  v-bind=\"preview\" append-to-body >\r\n      <div style=\"text-align: center\">\r\n        <img  style=\"max-width: 100%;\" :src=\"dialogImageUrl\" alt=\"\">\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SparkMD5 from 'spark-md5'\r\nimport D2pUploader from '../../uploader'\r\nimport lodash from 'lodash'\r\nimport { d2CrudPlus } from '../../utils/d2-crud-plus'\r\nimport log from '../../utils/util.log'\r\n// 文件上传组件,依赖D2pUploader\r\nexport default {\r\n  name: 'd2p-file-uploader',\r\n  mixins: [d2CrudPlus.inputBase],\r\n  props: {\r\n    // 选择文件按钮的大小\r\n    btnSize: { default: 'small' },\r\n    // 选择文件按钮的名称\r\n    btnName: { default: '选择文件' },\r\n    // 可选哪些类型的文件\r\n    accept: {},\r\n    // 上传后端类型，[cos,qiniu,alioss,form]\r\n    type: {\r\n      type: String,\r\n      default: undefined // 上传类型：form cos qiniu  alioss\r\n    },\r\n    // 值：url<br/>\r\n    // 或 [url1,url2]<br/>\r\n    // 或 {url:'url',md5:'',size:number}<br/>\r\n    // 或 [{url:'url',md5:'',size:number}]<br/>\r\n    // <br/>\r\n    // limit=1 时 input事件返回 {url:'url',md5:'',size:number}<br/>\r\n    // limit>1 时 input事件返回 数组<br/>\r\n    value: {\r\n      type: [String, Array, Object]\r\n    },\r\n    // 样式后缀 追加到url的后面，进行图片处理，需要到对象存储平台配置样式\r\n    suffix: {\r\n      type: String,\r\n      required: false\r\n    },\r\n    // 返回类型: url=仅返回链接, object=包含md5和size , key=仅返回文件key\r\n    returnType: {\r\n      type: String,\r\n      default: 'url'\r\n    },\r\n    // 自定义参数\r\n    custom: {\r\n      type: Object\r\n    },\r\n    // 内部封装[el-upload](https://element.eleme.cn/#/zh-CN/component/upload)组件的属性参数<br/>\r\n    // 注意，form方式上传的action、name、headers等参数不在此设置\r\n    elProps: {\r\n      type: Object\r\n    },\r\n    // 预览对话框的配置\r\n    preview: {\r\n      type: Object\r\n    },\r\n    // 文件大小限制 <br/>\r\n    // 如果传入{limit,tip(fileSize,limit){vm.$message('可以自定义提示')}}\r\n    sizeLimit: {\r\n      type: Number, Object\r\n    },\r\n    // 构建下载url方法\r\n    buildUrl: {\r\n      type: Function,\r\n      default: function (value, item) { return (typeof value === 'object') ? item.url : value }\r\n    },\r\n    // 上传组件参数，会临时覆盖全局上传配置参数[d2p-uploader](/guide/extends/uploader.html)\r\n    uploader: {\r\n      type: Object,\r\n      default () { return {} }\r\n    },\r\n    // 与el-upload一致\r\n    beforeUpload: {\r\n      type: Function\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      fileList: [],\r\n      context: {},\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      avatarLoading: undefined\r\n    }\r\n  },\r\n  created () {\r\n    this.emitValue = this.value\r\n    this.initValue(this.value)\r\n  },\r\n  watch: {\r\n    value (value) {\r\n      if (this.dispatch) {\r\n        this.dispatch('ElFormItem', 'el.form.blur')\r\n      }\r\n      this.$emit('change', value)\r\n      if (this.emitValue === value) {\r\n        return\r\n      }\r\n      this.emitValue = value\r\n      this.initValue(value)\r\n    }\r\n  },\r\n  computed: {\r\n    _elProps () {\r\n      const defaultElProps = this.getDefaultElProps()\r\n      Object.assign(defaultElProps, this.elProps)\r\n      return defaultElProps\r\n    },\r\n    avatarUrl () {\r\n      if (this.fileList.length > 0) {\r\n        const file = this.fileList[0]\r\n        log.debug('file,', file, file.status)\r\n        if (file.response != null && file.response.url != null) {\r\n          return file.response.url\r\n        } else if (file.url != null) {\r\n          return file.url\r\n        }\r\n      }\r\n      return null\r\n    },\r\n    uploadClass () {\r\n      if (this._elProps.listType === 'avatar') {\r\n        return 'avatar-uploader'\r\n      } else if (this._elProps.listType === 'picture-card') {\r\n        if (this.fileList && this._elProps.limit !== 0 && this.fileList.length >= this._elProps.limit) {\r\n          return 'image-uploader hide-plus'\r\n        }\r\n        return 'image-uploader'\r\n      }\r\n      return 'file-uploader'\r\n    }\r\n  },\r\n  methods: {\r\n    handleBlur () {\r\n      console.log('blur')\r\n    },\r\n    getDefaultElProps () {\r\n      return {\r\n        limit: 0,\r\n        listType: 'text',\r\n        showFileList: true,\r\n        action: '',\r\n        onPreview: (file) => {\r\n          if (this._elProps.listType === 'picture-card' || this._elProps.listType === 'picture' || this._elProps.listType === 'avatar') {\r\n            this.dialogImageUrl = file.url\r\n            this.dialogVisible = true\r\n          } else {\r\n            window.open(file.url)\r\n          }\r\n        },\r\n        beforeUpload: async (file) => {\r\n          if (this.beforeUpload) {\r\n            const ret = await this.beforeUpload(file, { vm: this })\r\n            if (ret === false) {\r\n              return\r\n            }\r\n          }\r\n          if (this.sizeLimit == null) {\r\n            return true\r\n          }\r\n          let limit = this.sizeLimit\r\n          let showMessage = null\r\n          if (typeof limit === 'number') {\r\n            limit = this.sizeLimit\r\n            showMessage = (fileSize, limit) => {\r\n              if (this.$message) {\r\n                const limitTip = this.computeFileSize(limit)\r\n                const fileSizeTip = this.computeFileSize(file.size)\r\n                this.$message({ message: '文件大小不能超过' + limitTip + '，当前文件大小:' + fileSizeTip, type: 'warning' })\r\n              }\r\n            }\r\n          } else {\r\n            limit = this.sizeLimit.limit\r\n            showMessage = this.sizeLimit.tip\r\n          }\r\n          if (file.size > limit) {\r\n            log.debug('文件大小超过限制：', file.size)\r\n            showMessage(file.size, limit)\r\n            return false\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setValue (value) {\r\n      this.initValue(value)\r\n      // this.$emit('change', this.fileList)\r\n    },\r\n    getUploader () {\r\n      let type = this.type\r\n      if (this.uploader != null && this.uploader.type != null) {\r\n        type = this.uploader.type\r\n      }\r\n      return D2pUploader.getUploader(type)\r\n    },\r\n    initValue (value) {\r\n      let fileList = []\r\n      if (value == null) {\r\n\r\n      } else if (typeof (value) === 'string') {\r\n        if (value !== '') {\r\n          const fileName = value.substring(value.lastIndexOf('/') + 1)\r\n          fileList = [{ value: value, name: fileName }]\r\n        }\r\n      } else if (value instanceof Array) {\r\n        if (value.length > 0 && typeof (value[0]) === 'string') {\r\n          const tmp = []\r\n          value.forEach(item => {\r\n            const fileName = item.substring(item.lastIndexOf('/') + 1)\r\n            tmp.push({ value: item, name: fileName })\r\n          })\r\n          fileList = tmp\r\n        } else {\r\n          fileList = value\r\n        }\r\n      } else if (value instanceof Object) {\r\n        fileList = [value]\r\n      }\r\n      for (const item of fileList) {\r\n        if (item.value == null) {\r\n          item.value = item.url\r\n        }\r\n        item.url = this.buildUrl(item.value, item)\r\n      }\r\n      this.resetFileList(fileList)\r\n    },\r\n    computeFileSize (fileSize) {\r\n      let sizeTip = fileSize\r\n      if (fileSize > (1024 * 1024 * 1024)) {\r\n        sizeTip = (fileSize / (1024 * 1024 * 1024)).toFixed(2) + 'G'\r\n      } else if (fileSize > (1024 * 1024)) {\r\n        sizeTip = (fileSize / (1024 * 1024)).toFixed(2) + 'M'\r\n      } else {\r\n        sizeTip = Math.round(fileSize / (1024)) + 'K'\r\n      }\r\n      return sizeTip\r\n    },\r\n    resetFileList (fileList) {\r\n      this.$set(this, 'fileList', fileList)\r\n    },\r\n    handleUploadProgress (event, file, fileList) {\r\n      if (this._elProps.listType === 'avatar') {\r\n        log.debug('progress', event, file)\r\n        this.avatarLoading = Math.floor(event.percent)\r\n        if (event.percent === 100) {\r\n          this.avatarLoading = undefined\r\n        }\r\n      }\r\n      this.$emit('progress', event, { file, fileList, vm: this })\r\n    },\r\n    handleUploadFileSuccess (res, file, fileList) {\r\n      res.size = res.size != null ? res.size : file.size\r\n      res.name = res.name != null ? res.name : file.name\r\n      res.value = this.getReturnValue(res)\r\n      const value = this.returnType === 'object' ? res.url : res.value\r\n      const url = this.buildUrl(value, res)\r\n      file.url = res.url = url\r\n      this.resetFileList(fileList)\r\n      this.$emit('success', res, file)\r\n      const list = []\r\n      for (const item of fileList) {\r\n        // if (item.status === 'uploading') {\r\n        //   log.debug('当前文件上传完成，等待剩下的文件全部上传成功后再更新value')\r\n        //   return\r\n        // }\r\n        if (item.response != null && item.response.url != null) {\r\n          list.push({ ...item.response })\r\n        } else {\r\n          list.push(item)\r\n        }\r\n      }\r\n      log.debug('handleUploadFileSuccess list', list, res)\r\n      this.emit(res, list)\r\n    },\r\n    isHasUploadingItem () {\r\n      const fileList = this.$refs.fileUploader.uploadFiles\r\n      if (fileList && fileList.length > 0) {\r\n        for (const item of fileList) {\r\n          if (item.status === 'uploading') {\r\n            return true\r\n          }\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    handleUploadFileRemove (file, fileList) {\r\n      this.fileList = fileList\r\n      console.log('remove', fileList)\r\n      this.emitList(fileList)\r\n      this.$emit('remove', file, fileList)\r\n    },\r\n    handleUploadFileError (err, file, fileList) {\r\n      console.error('文件上传失败', err, file, fileList)\r\n      this.$message({ type: 'error', message: '文件上传失败' })\r\n      this.$emit('error', err, file, fileList)\r\n    },\r\n    previewAvatar ($event) {\r\n      $event.stopPropagation()\r\n      this._elProps.onPreview(this.fileList[0])\r\n    },\r\n    removeAvatar ($event) {\r\n      $event.stopPropagation()\r\n      this.resetFileList([])\r\n      this.emit() // 返回undefined，相当于清空已有的值\r\n    },\r\n    emit (res, list) {\r\n      if (this._elProps.limit === 1) {\r\n        const value = res ? res.value : undefined\r\n        this.emitValue = value\r\n        this.$emit('input', value)\r\n      } else {\r\n        this.emitList(list)\r\n      }\r\n    },\r\n    emitList (list) {\r\n      if (list) {\r\n        const tmp = []\r\n        list.forEach(item => {\r\n          tmp.push(this.getReturnValue(item))\r\n        })\r\n        list = tmp\r\n      }\r\n      this.emitValue = list\r\n      this.$emit('input', list)\r\n    },\r\n    getReturnValue (item) {\r\n      const value = item[this.returnType]\r\n      if (value != null) {\r\n        return value\r\n      }\r\n      return item\r\n    },\r\n    httpRequest (option) {\r\n      Promise.all([\r\n        this.doUpload(option),\r\n        this.computeMd5(option.file)\r\n      ]).then((ret) => {\r\n        // 得到组合结果， size，md5\r\n        const result = ret[0]\r\n        result.md5 = ret[1]\r\n        option.onSuccess(result)\r\n      })\r\n    },\r\n    doUpload (option) {\r\n      let config = this.uploader\r\n      if (config == null) {\r\n        config = {}\r\n      }\r\n      if (!lodash.isEmpty(this._elProps.action)) {\r\n        config.action = this._elProps.action\r\n      }\r\n      if (!lodash.isEmpty(this._elProps.name)) {\r\n        config.name = this._elProps.name\r\n      }\r\n      if (!lodash.isEmpty(this._elProps.data)) {\r\n        config.data = this._elProps.data\r\n      }\r\n      if (!lodash.isEmpty(this._elProps.headers)) {\r\n        config.headers = this._elProps.headers\r\n      }\r\n      if (!lodash.isEmpty(this.custom)) {\r\n        config.custom = this.custom\r\n      }\r\n      const uploadOption = {\r\n        file: option.file,\r\n        fileName: option.file.name,\r\n        onProgress: option.onProgress,\r\n        onError: option.onError,\r\n        config: config\r\n      }\r\n      this.$emit('start', uploadOption)\r\n      return this.getUploader().then(uploader => {\r\n        return uploader.upload(uploadOption)\r\n      }).then(ret => {\r\n        if (this.suffix != null) {\r\n          ret.url += this.suffix\r\n        }\r\n        return ret\r\n      })\r\n    },\r\n    onExceed (files, fileList) {\r\n      log.debug('文件数量超出限制')\r\n      if (this._elProps.limit === 1) {\r\n        this.clearFiles()\r\n        this.$refs.fileUploader.handleStart(files[0])\r\n        this.$refs.fileUploader.submit()\r\n        return\r\n      }\r\n      this.$message({\r\n        showClose: true,\r\n        message: '已达最大限制数量，请删除一个文件后再上传',\r\n        type: 'warning'\r\n      })\r\n    },\r\n    clearFiles () {\r\n      if (this.$refs.fileUploader != null) {\r\n        this.$refs.fileUploader.clearFiles()\r\n      }\r\n    },\r\n    getFileList () {\r\n      return this.fileList\r\n    },\r\n    computeMd5 (file) {\r\n      return new Promise((resolve, reject) => {\r\n        const blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice\r\n        const chunkSize = 2097152 // Read in chunks of 2MB\r\n        const chunks = Math.ceil(file.size / chunkSize)\r\n        let currentChunk = 0\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        const fileReader = new FileReader()\r\n\r\n        fileReader.onload = (e) => {\r\n          spark.append(e.target.result) // Append array buffer\r\n          currentChunk++\r\n\r\n          if (currentChunk < chunks) {\r\n            loadNext()\r\n          } else {\r\n            const md5 = spark.end()\r\n            log.debug('computed hash', md5) // Compute hash\r\n\r\n            resolve(md5)\r\n          }\r\n        }\r\n\r\n        fileReader.onerror = function (error) {\r\n          // eslint-disable-next-line prefer-promise-reject-errors\r\n          reject('md5 computer error', error)\r\n        }\r\n\r\n        function loadNext () {\r\n          const start = currentChunk * chunkSize\r\n          const end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize\r\n\r\n          fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\r\n        }\r\n\r\n        loadNext()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .d2p-file-uploader{\r\n    &.is-disabled{\r\n      .avatar-item-wrapper{\r\n        background-color: #F5F7FA;\r\n        border-color: #E4E7ED;\r\n        color: #C0C4CC;\r\n        cursor: not-allowed\r\n      }\r\n      li{\r\n        cursor: not-allowed\r\n      }\r\n      .el-upload-list__item-actions{\r\n        cursor: not-allowed\r\n      }\r\n    }\r\n    .hide-plus{\r\n      .el-upload--picture-card{\r\n        display: none;\r\n      }\r\n    }\r\n    .avatar-uploader{\r\n      display: flex;\r\n      .el-upload{\r\n        width: 100px;\r\n        height: 100px;\r\n        /*display: flex;*/\r\n        /*justify-content: center;*/\r\n        /*align-items: center;*/\r\n        background-color: #fbfdff;\r\n        border: 1px dashed #c0ccda;\r\n        border-radius: 6px;\r\n      }\r\n      .el-upload img{\r\n        max-width: 100px;\r\n        max-height: 100px;\r\n      }\r\n      .el-icon-plus.avatar-uploader-icon {\r\n        vertical-align: top;\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        line-height: 100px;\r\n      }\r\n      .status-uploading{\r\n        border-radius: 6px;\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        left: 0;\r\n        top: 0;\r\n        cursor: default;\r\n        text-align: center;\r\n        color: #fff;\r\n        opacity: 1;\r\n        font-size: 20px;\r\n        background-color: rgba(0, 0, 0, 0.5);\r\n        -webkit-transition: opacity .3s;\r\n        transition: opacity .3s;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        .el-progress{\r\n          width: 70px;\r\n          height: 70px;\r\n          .el-progress__text {\r\n            color:#fff;\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n    .el-upload--picture-card .el-icon-plus.avatar-uploader-icon {\r\n      vertical-align: top;\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n      line-height: 100px;\r\n    }\r\n    .image-uploader .el-upload-list--picture-card .el-upload-list__item-thumbnail {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n      width:auto;\r\n      height: auto;\r\n    }\r\n     .el-upload-list--picture .el-upload-list__item-thumbnail {\r\n      max-height: 100%;\r\n      height: auto;\r\n    }\r\n    .image-uploader .el-upload-list--picture-card .el-upload-list__item {\r\n      /*display: flex;*/\r\n      /*justify-content: center;*/\r\n      /*align-items: center;*/\r\n      text-align: center;\r\n      line-height: 125px;\r\n    }\r\n    .image-uploader{\r\n      /*display: flex;flex-wrap: wrap;*/\r\n      .el-upload-list--picture-card .el-upload-list__item-actions{\r\n        line-height: 100px;\r\n      }\r\n      .el-upload-list--picture-card {\r\n        /*display: flex;*/\r\n        /*flex-wrap: wrap;*/\r\n      }\r\n      .el-upload-list__item-status-label{\r\n        line-height: 1;\r\n      }\r\n    }\r\n\r\n    .el-upload--picture-card {\r\n      background-color: #fbfdff;\r\n      border: 1px dashed #c0ccda;\r\n      border-radius: 6px;\r\n      box-sizing: border-box;\r\n      width: 100px;\r\n      height: 100px;\r\n      cursor: pointer;\r\n      /*display: flex;*/\r\n      /*justify-content: center;*/\r\n      /*align-items: center;*/\r\n    }\r\n    .el-upload-list--picture-card {\r\n      .el-upload-list__item{\r\n        width: 100px;\r\n        height: 100px;\r\n      }\r\n      .el-progress-circle{\r\n        width: 70px !important;\r\n        height: 70px !important;\r\n      }\r\n      .el-progress{\r\n        width: 70px !important;\r\n        height: 70px !important;\r\n      }\r\n    }\r\n    .avatar-item-wrapper{\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      position: relative;\r\n      .avatar{\r\n        display: contents;\r\n      }\r\n    }\r\n\r\n    .preview{\r\n      border-radius: 6px;\r\n      position: absolute;\r\n      width: 100%;\r\n      height: 100%;\r\n      left: 0;\r\n      top: 0;\r\n      cursor: default;\r\n      text-align: center;\r\n      color: #fff;\r\n      opacity: 0;\r\n      font-size: 20px;\r\n      background-color: rgba(0,0,0,.9);\r\n      -webkit-transition: opacity .3s;\r\n      transition: opacity .3s;\r\n      &:hover{\r\n        opacity: 0.9;\r\n      }\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      i{\r\n        margin: 0 7px;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n"]}]}