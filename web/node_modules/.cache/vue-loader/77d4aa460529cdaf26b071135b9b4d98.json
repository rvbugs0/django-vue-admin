{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/tree-selector/lib/tree-selector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/tree-selector/lib/tree-selector.vue","mtime":1674694550348},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBsb2Rhc2ggZnJvbSAnbG9kYXNoJwppbXBvcnQgeyBkMkNydWRQbHVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZDItY3J1ZC1wbHVzJwppbXBvcnQgbG9nIGZyb20gJy4uLy4uL3V0aWxzL3V0aWwubG9nJwovLyDmoJHlvaLpgInmi6nnu4Tku7bvvIzpnIDopoFpbXBvcnQge0QycFRyZWVTZWxlY3Rvcn0gZnJvbSAnZDJwLWV4dGVuZHMnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZDJwLXRyZWUtc2VsZWN0b3InLAogIG1peGluczogW2QyQ3J1ZFBsdXMuaW5wdXQsIGQyQ3J1ZFBsdXMuaW5wdXREaWN0XSwKICBwcm9wczogewogICAgLy8g5YC8CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmcsIEJvb2xlYW4sIEFycmF5LCBPYmplY3RdCiAgICB9LAogICAgLy8g6L+H5ruk77yMdmFsdWXkuK3nmoRub2Rlc+i/h+a7pOaWueazlSDlj4LmlbDkuLpub2RlcwogICAgZmlsdGVyOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlOiBmYWxzZQogICAgfSwKICAgIC8vIOi/h+a7pOeahHBsYWNlaG9sZGVyCiAgICBmaWx0ZXJQbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICfovpPlhaXlhbPplK7lrZfov5vooYzov4fmu6QnCiAgICB9LAogICAgZGlhbG9nVGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn6YCJ5oupJwogICAgfSwKICAgIGNhbmNlbFRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn5Y+W5raIJwogICAgfSwKICAgIGNvbmZpcm1UZXh0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ+ehruWumicKICAgIH0sCiAgICAvLyDmoJHlvaLnu4Tku7boioLngrnov4fmu6TvvIzlj6/ku6XphY3nva5lbFByb3BzLmZpbHRlck5vZGVNZXRob2Qg77yM6KaG55uW6buY6K6k55qE6L+H5ruk5pa55rOVCiAgICB0cmVlRmlsdGVyOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmU6IGZhbHNlLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5piv5ZCm5aSa6YCJ77yM5Lyg5YWlZmFsc2XkuLrljZXpgIkKICAgIG11bHRpcGxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICAvLyDmmK/lkKblv73nlaXpgInkuK3oioLngrnnmoTlrZDoioLngrkKICAgIGlnbm9yZUZ1bGxDaGVja2VkQ2hpbGRyZW46IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LAogICAgLy8g5piv5ZCm5Y+q6L+U5Zue5Y+25a2Q6IqC54K5CiAgICBsZWFmT25seTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LAogICAgLy8g5piv5ZCm5YyF5ZCr5Y2K6YCJ6IqC54K5CiAgICBpbmNsdWRlSGFsZkNoZWNrZWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwKICAgIC8vIGVsLXRyZWXnmoTlsZ7mgKfphY3nva4KICAgIGVsUHJvcHM6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgLyoqCiAgICAgKiDmmK/lkKblj6/ku6XmuIXpmaQKICAgICAqLwogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICAvLyDmlbDmja7lrZflhbjphY3nva4KICAgIGRpY3Q6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlOiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50VmFsdWU6IHVuZGVmaW5lZCwKICAgICAgY29sbGFwc2VUYWdzOiBmYWxzZSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZmlsdGVyVGV4dDogdW5kZWZpbmVkCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIC8vIGlmICh0aGlzLmRpY3QpIHsKICAgIC8vICAgdGhpcy5kaWN0ID0gZDJDcnVkUGx1cy51dGlsLmRpY3QubWVyZ2VEZWZhdWx0KHRoaXMuZGljdCwgdHJ1ZSkKICAgIC8vIH0KICAgIC8vIHRoaXMuaW5pdERhdGEoKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIF9lbFByb3BzICgpIHsKICAgICAgY29uc3QgZGVmYXVsdEVsUHJvcHMgPSB7CiAgICAgICAgc2hvd0NoZWNrYm94OiB0aGlzLm11bHRpcGxlLAogICAgICAgIGhpZ2hsaWdodEN1cnJlbnQ6ICF0aGlzLm11bHRpcGxlLAogICAgICAgIHByb3BzOiB7fQogICAgICB9CiAgICAgIGlmICh0aGlzLmRpY3QgIT0gbnVsbCkgewogICAgICAgIGlmICh0aGlzLmRpY3QubGFiZWwgIT0gbnVsbCkgeyBkZWZhdWx0RWxQcm9wcy5wcm9wcy5sYWJlbCA9IHRoaXMuZGljdC5sYWJlbCB9CiAgICAgICAgaWYgKHRoaXMuZGljdC52YWx1ZSAhPSBudWxsKSB7IGRlZmF1bHRFbFByb3BzLnByb3BzLnZhbHVlID0gdGhpcy5kaWN0LnZhbHVlIH0KICAgICAgICBpZiAodGhpcy5kaWN0LmNoaWxkcmVuICE9IG51bGwpIHsgZGVmYXVsdEVsUHJvcHMucHJvcHMuY2hpbGRyZW4gPSB0aGlzLmRpY3QuY2hpbGRyZW4gfQogICAgICB9CiAgICAgIGRlZmF1bHRFbFByb3BzLm5vZGVLZXkgPSBkZWZhdWx0RWxQcm9wcy5wcm9wcy52YWx1ZQogICAgICBsb2Rhc2gubWVyZ2UoZGVmYXVsdEVsUHJvcHMsIHRoaXMuZWxQcm9wcykKICAgICAgcmV0dXJuIGRlZmF1bHRFbFByb3BzCiAgICB9LAogICAgY29sbGFwc2VUYWdTaXplICgpIHsKICAgICAgcmV0dXJuIFsnc21hbGwnLCAnbWluaSddLmluZGV4T2YodGhpcy5zZWxlY3RTaXplKSA+IC0xCiAgICAgICAgPyAnbWluaScKICAgICAgICA6ICdzbWFsbCcKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmaWx0ZXJUZXh0ICh2YWwpIHsKICAgICAgdGhpcy4kcmVmcy5lbFRyZWUuZmlsdGVyKHZhbCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGluaXREYXRhICgpIHsKICAgIC8vICAgZDJDcnVkUGx1cy51dGlsLmRpY3QuZ2V0KHRoaXMuZGljdCkudGhlbihyZXQgPT4gewogICAgLy8gICAgIHRoaXMuJHNldCh0aGlzLCAnZGF0YScsIHJldCkKICAgIC8vICAgICB0aGlzLnNldFZhbHVlKHRoaXMudmFsdWUpCiAgICAvLyAgIH0pCiAgICAvLyB9LAogICAgb25EaWN0TG9hZGVkICgpIHsKICAgICAgbG9nLmRlYnVnKCdvbkRpY3RMb2FkZWQnLCB0aGlzLmRpY3QsIHRoaXMudmFsdWUpCiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy52YWx1ZSkKICAgIH0sCiAgICBzZXRWYWx1ZSAodmFsdWUpIHsKICAgICAgbG9nLmRlYnVnKCdzZXRWYWx1ZTonLCB0aGlzLmN1cnJlbnRWYWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5fb3B0aW9ucykKICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlID09PSB0aGlzLnZhbHVlKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgbGV0IGFyclZhbHVlID0gdmFsdWUKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gW10KICAgICAgfQoKICAgICAgaWYgKCEoYXJyVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICBhcnJWYWx1ZSA9IFthcnJWYWx1ZV0KICAgICAgfQogICAgICBpZiAodGhpcy5kaWN0ICYmIHRoaXMuZGljdC5nZXROb2RlcykgewogICAgICAgIGxvZy5kZWJ1ZygnZ2V0Tm9kZXM6JywgYXJyVmFsdWUpCiAgICAgICAgdGhpcy5kaWN0LmdldE5vZGVzKGFyclZhbHVlKS50aGVuKG5vZGVzID0+IHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcyhub2RlcywgdmFsdWUpCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBub2RlcyA9IFtdCiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMgPT0gbnVsbCB8fCB0aGlzLl9vcHRpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnJWYWx1ZSkgewogICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX29wdGlvbnMKICAgICAgICAgIGNvbnN0IG5vZGUgPSBkMkNydWRQbHVzLnV0aWwuZGljdC5nZXRCeVZhbHVlKGl0ZW0sIGRhdGEsIHRoaXMuZGljdCkKICAgICAgICAgIGlmIChub2RlICE9IG51bGwpIHsKICAgICAgICAgICAgbm9kZXMucHVzaChub2RlKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMobm9kZXMsIHZhbHVlKQogICAgICB9CiAgICB9LAogICAgc2VsZWN0ZWROb2RlcyAobm9kZXMsIHZhbHVlKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkID0gW10KICAgICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7CiAgICAgICAgbm9kZS5pZCA9IG5vZGVbdGhpcy5kaWN0LnZhbHVlXQogICAgICAgIHNlbGVjdGVkLnB1c2gobm9kZSkKICAgICAgfQogICAgICBsb2cuZGVidWcoJ3NlbGVjdGVkOicsIHNlbGVjdGVkKQogICAgICB0aGlzLiRzZXQodGhpcywgJ3NlbGVjdGVkJywgc2VsZWN0ZWQpCiAgICAgIHRoaXMucmVzZXRJbnB1dEhlaWdodCgpCiAgICB9LAogICAgaGFuZGxlQ2hlY2tDaGFuZ2UgKGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoZWNrLWNoYW5nZScsIGV2ZW50KQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UgKGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2N1cnJlbnQtY2hhbmdlJywgZXZlbnQpCiAgICB9LAogICAgb3BlbkRpYWxvZyAoKSB7CiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCAhPSBudWxsKSB7CiAgICAgICAgICBjb25zdCBpZHMgPSB0aGlzLnNlbGVjdGVkLm1hcChpdGVtID0+IGl0ZW1bdGhpcy5fZWxQcm9wcy5wcm9wcy52YWx1ZV0pCiAgICAgICAgICBpZHMuZm9yRWFjaChpZCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLiRyZWZzLmVsVHJlZS5zdG9yZS5ub2Rlc01hcFtpZF0KICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuZG9FeHBhbmRQYXJlbnQoY3VycmVudCkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmVsVHJlZS5zZXRDaGVja2VkS2V5cyhpZHMsIHRoaXMubGVhZk9ubHkpCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmVsVHJlZS5zZXRDdXJyZW50S2V5KGlkc1swXSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0sIDEpCiAgICB9LAogICAgZG9FeHBhbmRQYXJlbnQgKG5vZGUpIHsKICAgICAgaWYgKG5vZGUucGFyZW50ICE9IG51bGwpIHsKICAgICAgICB0aGlzLmRvRXhwYW5kUGFyZW50KG5vZGUucGFyZW50KQogICAgICB9CiAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlCiAgICB9LAogICAgZ2V0VmFsdWVLZXkgKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuX2VsUHJvcHMucHJvcHMudmFsdWUgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBpdGVtW3RoaXMuX2VsUHJvcHMucHJvcHMudmFsdWVdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWUKICAgICAgfQogICAgfSwKICAgIGdldFZhbHVlTGFiZWwgKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuX2VsUHJvcHMucHJvcHMubGFiZWwgIT0gbnVsbCkgewogICAgICAgIHJldHVybiBpdGVtW3RoaXMuX2VsUHJvcHMucHJvcHMubGFiZWxdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwKICAgICAgfQogICAgfSwKICAgIGdldFZhbHVlQ2hpbGRyZW4gKGl0ZW0pIHsKICAgICAgbGV0IGNoaWxkcmVuID0gJ2NoaWxkcmVuJwogICAgICBpZiAodGhpcy5fZWxQcm9wcy5wcm9wcy5jaGlsZHJlbiAhPSBudWxsKSB7CiAgICAgICAgY2hpbGRyZW4gPSB0aGlzLl9lbFByb3BzLnByb3BzLmNoaWxkcmVuCiAgICAgIH0KICAgICAgcmV0dXJuIGl0ZW1bY2hpbGRyZW5dCiAgICB9LAogICAgc2VsZWN0U3VibWl0ICgpIHsKICAgICAgY29uc3Qgbm9kZXMgPSB0aGlzLnJlZnJlc2hTZWxlY3RlZCgpCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuZG9WYWx1ZUlucHV0Q2hhbmdlZChub2RlcykKICAgIH0sCiAgICBkb1ZhbHVlSW5wdXRDaGFuZ2VkIChub2RlcykgewogICAgICBsZXQgdmFsdWVzID0gdGhpcy5mb3JtYXRWYWx1ZShub2RlcykKICAgICAgdGhpcy5yZXNldElucHV0SGVpZ2h0KCkKICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdmFsdWVzID0gdmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPiAwID8gdmFsdWVzWzBdIDogdW5kZWZpbmVkCiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWx1ZXMKICAgICAgaWYgKHRoaXMuZGlzcGF0Y2gpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoKCdFbEZvcm1JdGVtJywgJ2VsLmZvcm0uYmx1cicpCiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWx1ZXMpCiAgICB9LAogICAgaXRlbUNsb3NlZCAoaXRlbSkgewogICAgICBjb25zdCBuZXdOb2RlcyA9IGxvZGFzaC53aXRob3V0KHRoaXMuc2VsZWN0ZWQsIGl0ZW0pCiAgICAgIGNvbnNvbGUubG9nKCduZXcgdmFsdWUnLCBpdGVtLCBuZXdOb2RlcykKICAgICAgdGhpcy4kc2V0KHRoaXMsICdzZWxlY3RlZCcsIG5ld05vZGVzKQogICAgICB0aGlzLmRvVmFsdWVJbnB1dENoYW5nZWQobmV3Tm9kZXMpCiAgICB9LAogICAgcmVmcmVzaFNlbGVjdGVkICgpIHsKICAgICAgbGV0IG5vZGVzID0gbnVsbAogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgewogICAgICAgIG5vZGVzID0gdGhpcy4kcmVmcy5lbFRyZWUuZ2V0Q2hlY2tlZE5vZGVzKHRoaXMubGVhZk9ubHksIHRoaXMuaW5jbHVkZUhhbGZDaGVja2VkKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLiRyZWZzLmVsVHJlZS5nZXRDdXJyZW50Tm9kZSgpCiAgICAgICAgaWYgKG5vZGUgPT0gbnVsbCkgewogICAgICAgICAgbm9kZXMgPSBbXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub2RlcyA9IFtub2RlXQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5pZ25vcmVGdWxsQ2hlY2tlZENoaWxkcmVuKSB7CiAgICAgICAgbm9kZXMgPSB0aGlzLmZpbHRlckZ1bGxDaGVja2VkQ2hpbGRyZW4obm9kZXMpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsdGVyICE9IG51bGwpIHsKICAgICAgICBub2RlcyA9IHRoaXMuZmlsdGVyKG5vZGVzKQogICAgICB9CiAgICAgIGxvZy5kZWJ1Zygnc2VsZWN0ZWQnLCB0aGlzLnNlbGVjdGVkKQogICAgICB0aGlzLiRzZXQodGhpcywgJ3NlbGVjdGVkJywgbm9kZXMpCiAgICAgIHJldHVybiBub2RlcwogICAgfSwKICAgIHJlc2V0SW5wdXRIZWlnaHQgKCkgewogICAgICBpZiAodGhpcy5jb2xsYXBzZVRhZ3MgJiYgIXRoaXMuZmlsdGVyYWJsZSkgcmV0dXJuCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBpZiAoIXRoaXMuJHJlZnMucmVmZXJlbmNlKSByZXR1cm4KICAgICAgICBjb25zdCBpbnB1dENoaWxkTm9kZXMgPSB0aGlzLiRyZWZzLnJlZmVyZW5jZS4kZWwuY2hpbGROb2RlcwogICAgICAgIGNvbnN0IGlucHV0ID0gW10uZmlsdGVyLmNhbGwoaW5wdXRDaGlsZE5vZGVzLCBpdGVtID0+IGl0ZW0udGFnTmFtZSA9PT0gJ0lOUFVUJylbMF0KICAgICAgICBjb25zdCB0YWdzID0gdGhpcy4kcmVmcy50YWdzCiAgICAgICAgY29uc3Qgc2l6ZUluTWFwID0gdGhpcy5pbml0aWFsSW5wdXRIZWlnaHQgfHwgNDAKICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMAogICAgICAgICAgPyBzaXplSW5NYXAgKyAncHgnCiAgICAgICAgICA6IE1hdGgubWF4KAogICAgICAgICAgICB0YWdzID8gKHRhZ3MuY2xpZW50SGVpZ2h0ICsgKHRhZ3MuY2xpZW50SGVpZ2h0ID4gc2l6ZUluTWFwID8gNiA6IDApKSA6IDAsCiAgICAgICAgICAgIHNpemVJbk1hcAogICAgICAgICAgKSArICdweCcKICAgICAgICBpbnB1dC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQKICAgICAgICBpZiAodGhpcy52aXNpYmxlICYmIHRoaXMuZW1wdHlUZXh0ICE9PSBmYWxzZSkgewogICAgICAgICAgdGhpcy5icm9hZGNhc3QoJ0VsU2VsZWN0RHJvcGRvd24nLCAndXBkYXRlUG9wcGVyJykKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZmlsdGVyRnVsbENoZWNrZWRDaGlsZHJlbiAobm9kZXMpIHsKICAgICAgY29uc3QgaWdub3JlZCA9IG5ldyBTZXQoKQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygbm9kZXMpIHsKICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0VmFsdWVDaGlsZHJlbihpdGVtKQogICAgICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7CiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7CiAgICAgICAgICAgIGlnbm9yZWQuYWRkKHRoaXMuZ2V0VmFsdWVLZXkoY2hpbGQpKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCB2YWx1ZXMgPSBbXQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygbm9kZXMpIHsKICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmdldFZhbHVlS2V5KGl0ZW0pCiAgICAgICAgaWYgKCFpZ25vcmVkLmhhcyhrZXkpKSB7CiAgICAgICAgICB2YWx1ZXMucHVzaChpdGVtKQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdmFsdWVzCiAgICB9LAogICAgZm9ybWF0VmFsdWUgKG5vZGVzKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdCiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBub2RlcykgewogICAgICAgIHZhbHVlcy5wdXNoKHRoaXMuZ2V0VmFsdWVLZXkoaXRlbSkpCiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlcwogICAgfSwKICAgIGZpbHRlck5vZGUgKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlCiAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlTGFiZWwoZGF0YSkuaW5kZXhPZih2YWx1ZSkgIT09IC0xCiAgICB9LAogICAgb25DaGFuZ2UgKHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbHVlKQoKICAgICAgaWYgKHRoaXMuZGlzcGF0Y2gpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoKCdFbEZvcm1JdGVtJywgJ2VsLmZvcm0uYmx1cicpCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["tree-selector.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"tree-selector.vue","sourceRoot":"node_modules/d2p-extends/src/tree-selector/lib","sourcesContent":["<template>\n  <div class=\"d2p-tree-selector\">\n    <div  class=\"el-cascader el-cascader--default\" :class=\"{'is-disabled':disabled}\" @click=\"openDialog\">\n      <div class=\"el-input el-input--default el-input--suffix\" :class=\"{'is-disabled':disabled}\" >\n        <el-input ref=\"reference\" :disabled=\"disabled\"  />\n        <span class=\"el-input__suffix\">\n          <span class=\"el-input__suffix-inner\">\n            <i class=\"el-input__icon el-icon-arrow-down\" @click=\"openDialog\"/>\n          </span>\n        </span>\n      </div>\n      <div class=\"el-cascader__tags\" ref=\"tags\">\n        <transition-group @after-leave=\"resetInputHeight\" >\n          <el-tag\n            v-for=\"item in selected\"\n            :key=\"getValueKey(item)\"\n            :closable=\"clearable\"\n            :size=\"collapseTagSize\"\n            :hit=\"false\"\n            type=\"info\"\n            @close=\"itemClosed(item)\"\n            disable-transitions>\n            <span class=\"el-select__tags-text\">{{ getValueLabel(item) }}</span>\n          </el-tag>\n        </transition-group>\n      </div>\n    </div>\n    <el-dialog custom-class=\"d2p-tree-selector-dialog\"\n      :title=\"dialogTitle\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\" append-to-body>\n      <div class=\"tree-wrapper\">\n        <div v-if=\"treeFilter\" class=\"filter-bar\" style=\"padding-bottom: 20px\">\n          <el-input\n            prefix-icon=\"el-icon-search\"\n            :placeholder=\"filterPlaceholder\"\n            v-model=\"filterText\" size=\"small\" >\n          </el-input>\n        </div>\n\n        <div class=\"tree-body\">\n          <el-tree\n            :data=\"_options\"\n            @check-change=\"handleCheckChange\"\n            @current-change=\"handleCurrentChange\"\n            :filterNodeMethod=\"filterNode\"\n            v-bind=\"_elProps\"\n            ref=\"elTree\">\n          </el-tree>\n        </div>\n\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">{{cancelText}}</el-button>\n          <el-button type=\"primary\" @click=\"selectSubmit\">{{confirmText}}</el-button>\n        </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport lodash from 'lodash'\nimport { d2CrudPlus } from '../../utils/d2-crud-plus'\nimport log from '../../utils/util.log'\n// 树形选择组件，需要import {D2pTreeSelector} from 'd2p-extends'\nexport default {\n  name: 'd2p-tree-selector',\n  mixins: [d2CrudPlus.input, d2CrudPlus.inputDict],\n  props: {\n    // 值\n    value: {\n      type: [Number, String, Boolean, Array, Object]\n    },\n    // 过滤，value中的nodes过滤方法 参数为nodes\n    filter: {\n      type: Function,\n      require: false\n    },\n    // 过滤的placeholder\n    filterPlaceholder: {\n      type: String,\n      default: '输入关键字进行过滤'\n    },\n    dialogTitle: {\n      type: String,\n      default: '选择'\n    },\n    cancelText: {\n      type: String,\n      default: '取消'\n    },\n    confirmText: {\n      type: String,\n      default: '确定'\n    },\n    // 树形组件节点过滤，可以配置elProps.filterNodeMethod ，覆盖默认的过滤方法\n    treeFilter: {\n      type: Boolean,\n      require: false,\n      default: true\n    },\n    // 是否多选，传入false为单选\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    // 是否忽略选中节点的子节点\n    ignoreFullCheckedChildren: { type: Boolean, default: true },\n    // 是否只返回叶子节点\n    leafOnly: { type: Boolean, default: false },\n    // 是否包含半选节点\n    includeHalfChecked: { type: Boolean, default: false },\n    // el-tree的属性配置\n    elProps: {\n      type: Object\n    },\n    /**\n     * 是否可以清除\n     */\n    clearable: {\n      type: Boolean,\n      default: true\n    },\n    // 数据字典配置\n    dict: {\n      type: Object,\n      require: false\n    }\n  },\n  data () {\n    return {\n      currentValue: undefined,\n      collapseTags: false,\n      selected: [],\n      dialogVisible: false,\n      filterText: undefined\n    }\n  },\n  created () {\n    // if (this.dict) {\n    //   this.dict = d2CrudPlus.util.dict.mergeDefault(this.dict, true)\n    // }\n    // this.initData()\n  },\n  computed: {\n    _elProps () {\n      const defaultElProps = {\n        showCheckbox: this.multiple,\n        highlightCurrent: !this.multiple,\n        props: {}\n      }\n      if (this.dict != null) {\n        if (this.dict.label != null) { defaultElProps.props.label = this.dict.label }\n        if (this.dict.value != null) { defaultElProps.props.value = this.dict.value }\n        if (this.dict.children != null) { defaultElProps.props.children = this.dict.children }\n      }\n      defaultElProps.nodeKey = defaultElProps.props.value\n      lodash.merge(defaultElProps, this.elProps)\n      return defaultElProps\n    },\n    collapseTagSize () {\n      return ['small', 'mini'].indexOf(this.selectSize) > -1\n        ? 'mini'\n        : 'small'\n    }\n  },\n  watch: {\n    filterText (val) {\n      this.$refs.elTree.filter(val)\n    }\n  },\n  methods: {\n    // initData () {\n    //   d2CrudPlus.util.dict.get(this.dict).then(ret => {\n    //     this.$set(this, 'data', ret)\n    //     this.setValue(this.value)\n    //   })\n    // },\n    onDictLoaded () {\n      log.debug('onDictLoaded', this.dict, this.value)\n      this.setValue(this.value)\n    },\n    setValue (value) {\n      log.debug('setValue:', this.currentValue, this.value, this._options)\n      if (this.currentValue === this.value) {\n        return\n      }\n      let arrValue = value\n      if (value == null) {\n        this.selected = []\n      }\n\n      if (!(arrValue instanceof Array)) {\n        arrValue = [arrValue]\n      }\n      if (this.dict && this.dict.getNodes) {\n        log.debug('getNodes:', arrValue)\n        this.dict.getNodes(arrValue).then(nodes => {\n          this.selectedNodes(nodes, value)\n        })\n      } else {\n        const nodes = []\n        if (this._options == null || this._options.length === 0) {\n          return\n        }\n        for (const item of arrValue) {\n          const data = this._options\n          const node = d2CrudPlus.util.dict.getByValue(item, data, this.dict)\n          if (node != null) {\n            nodes.push(node)\n          }\n        }\n        this.selectedNodes(nodes, value)\n      }\n    },\n    selectedNodes (nodes, value) {\n      const selected = []\n      for (const node of nodes) {\n        node.id = node[this.dict.value]\n        selected.push(node)\n      }\n      log.debug('selected:', selected)\n      this.$set(this, 'selected', selected)\n      this.resetInputHeight()\n    },\n    handleCheckChange (event) {\n      this.$emit('check-change', event)\n    },\n    handleCurrentChange (event) {\n      this.$emit('current-change', event)\n    },\n    openDialog () {\n      if (this.disabled) {\n        return\n      }\n      this.dialogVisible = true\n      setTimeout(() => {\n        if (this.selected != null) {\n          const ids = this.selected.map(item => item[this._elProps.props.value])\n          ids.forEach(id => {\n            const current = this.$refs.elTree.store.nodesMap[id]\n            if (current != null) {\n              this.doExpandParent(current)\n            }\n          })\n          this.$nextTick(() => {\n            if (this.multiple) {\n              this.$refs.elTree.setCheckedKeys(ids, this.leafOnly)\n            } else if (ids.length > 0) {\n              this.$refs.elTree.setCurrentKey(ids[0])\n            }\n          })\n        }\n      }, 1)\n    },\n    doExpandParent (node) {\n      if (node.parent != null) {\n        this.doExpandParent(node.parent)\n      }\n      node.expanded = true\n    },\n    getValueKey (item) {\n      if (this._elProps.props.value != null) {\n        return item[this._elProps.props.value]\n      } else {\n        return item.value\n      }\n    },\n    getValueLabel (item) {\n      if (this._elProps.props.label != null) {\n        return item[this._elProps.props.label]\n      } else {\n        return item.label\n      }\n    },\n    getValueChildren (item) {\n      let children = 'children'\n      if (this._elProps.props.children != null) {\n        children = this._elProps.props.children\n      }\n      return item[children]\n    },\n    selectSubmit () {\n      const nodes = this.refreshSelected()\n      this.dialogVisible = false\n      this.doValueInputChanged(nodes)\n    },\n    doValueInputChanged (nodes) {\n      let values = this.formatValue(nodes)\n      this.resetInputHeight()\n      if (!this.multiple) {\n        values = values && values.length > 0 ? values[0] : undefined\n      }\n      this.currentValue = values\n      if (this.dispatch) {\n        this.dispatch('ElFormItem', 'el.form.blur')\n      }\n      this.$emit('input', values)\n    },\n    itemClosed (item) {\n      const newNodes = lodash.without(this.selected, item)\n      console.log('new value', item, newNodes)\n      this.$set(this, 'selected', newNodes)\n      this.doValueInputChanged(newNodes)\n    },\n    refreshSelected () {\n      let nodes = null\n      if (this.multiple) {\n        nodes = this.$refs.elTree.getCheckedNodes(this.leafOnly, this.includeHalfChecked)\n      } else {\n        const node = this.$refs.elTree.getCurrentNode()\n        if (node == null) {\n          nodes = []\n        } else {\n          nodes = [node]\n        }\n      }\n      if (this.ignoreFullCheckedChildren) {\n        nodes = this.filterFullCheckedChildren(nodes)\n      }\n      if (this.filter != null) {\n        nodes = this.filter(nodes)\n      }\n      log.debug('selected', this.selected)\n      this.$set(this, 'selected', nodes)\n      return nodes\n    },\n    resetInputHeight () {\n      if (this.collapseTags && !this.filterable) return\n      this.$nextTick(() => {\n        if (!this.$refs.reference) return\n        const inputChildNodes = this.$refs.reference.$el.childNodes\n        const input = [].filter.call(inputChildNodes, item => item.tagName === 'INPUT')[0]\n        const tags = this.$refs.tags\n        const sizeInMap = this.initialInputHeight || 40\n        const height = this.selected.length === 0\n          ? sizeInMap + 'px'\n          : Math.max(\n            tags ? (tags.clientHeight + (tags.clientHeight > sizeInMap ? 6 : 0)) : 0,\n            sizeInMap\n          ) + 'px'\n        input.style.height = height\n        if (this.visible && this.emptyText !== false) {\n          this.broadcast('ElSelectDropdown', 'updatePopper')\n        }\n      })\n    },\n    filterFullCheckedChildren (nodes) {\n      const ignored = new Set()\n      for (const item of nodes) {\n        const children = this.getValueChildren(item)\n        if (children != null) {\n          for (const child of children) {\n            ignored.add(this.getValueKey(child))\n          }\n        }\n      }\n      const values = []\n      for (const item of nodes) {\n        const key = this.getValueKey(item)\n        if (!ignored.has(key)) {\n          values.push(item)\n        }\n      }\n      return values\n    },\n    formatValue (nodes) {\n      const values = []\n      for (const item of nodes) {\n        values.push(this.getValueKey(item))\n      }\n      return values\n    },\n    filterNode (value, data) {\n      if (!value) return true\n      return this.getValueLabel(data).indexOf(value) !== -1\n    },\n    onChange (value) {\n      this.$emit('change', value)\n\n      if (this.dispatch) {\n        this.dispatch('ElFormItem', 'el.form.blur')\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.d2p-tree-selector{\n  width: 100%;\n  .el-cascader{\n    width: 100%;\n  }\n  .is-disabled .el-tag__close.el-icon-close {\n    display: none;\n  }\n}\n.d2p-tree-selector-dialog{\n  &.el-dialog{\n    max-height:70vh;\n    display: flex;\n    flex-direction: column;\n    .el-dialog__body{\n      flex:1;\n      overflow-y: auto;\n    }\n    .el-dialog__header{\n      padding: 20px 20px 20px;\n      border-bottom: 1px solid #eee;\n    }\n    .el-dialog__footer {\n      padding: 10px 20px 10px;\n      border-top: 1px solid #eee;\n    }\n  }\n}\n</style>\n"]}]}