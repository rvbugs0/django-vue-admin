{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/file-uploader/lib/cropper/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/file-uploader/lib/cropper/index.vue","mtime":1674694550323},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWVDcm9wcGVyIGZyb20gJy4vdnVlLWNyb3BwZXInCmltcG9ydCBsb2cgZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbC5sb2cnCi8vIOWbvueJh+ijgeWJquWvueivneahhu+8jOWwgeijhWNyb3BwZXJqcwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2QycC1jcm9wcGVyJywKICBjb21wb25lbnRzOiB7CiAgICBWdWVDcm9wcGVyCiAgfSwKICBwcm9wczogewogICAgLy8g5a+56K+d5qGG5qCH6aKYCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICflm77niYfoo4HliaonCiAgICB9LAogICAgLy8gY3JvcHBlcueahOmrmOW6pu+8jOm7mOiupOS4uua1j+iniOWZqOWPr+inhueql+WPo+mrmOW6pueahDQwJe+8jOacgOWwjzI3MAogICAgY3JvcHBlckhlaWdodDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdCiAgICB9LAogICAgLy8g5a+56K+d5qGG5a695bqm77yM6buY6K6kNTAlCiAgICBkaWFsb2dXaWR0aDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAnNTAlJwogICAgfSwKICAgIC8vIOWbvueJh+Wkp+Wwj+mZkOWItu+8jOWNleS9jU1C77yMMOS4uuS4jemZkOWItgogICAgbWF4U2l6ZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDUKICAgIH0sCiAgICAvLyDkuIrkvKDmj5DnpLoKICAgIHVwbG9hZFRpcDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICAvLyBjcm9wcGVyanPnmoTlj4LmlbDvvIzor6bop4HvvJpodHRwczovL2dpdGh1Yi5jb20vZmVuZ3l1YW5jaGVuL2Nyb3BwZXJqcwogICAgY3JvcHBlcjogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICAvLyDlj6/mjqXmlLbnmoTmlofku7blkI7nvIAKICAgIGFjY2VwdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcuanBnLCAuanBlZywgLnBuZywgLmdpZiwgLndlYnAnCiAgICB9LAogICAgLy8g6L6T5Ye657G75Z6L77yMYmxvYixkYXRhVXJsLGFsbAogICAgb3V0cHV0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2Jsb2InLy8gYmxvYgogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgaXNMb2FkZWQ6IGZhbHNlLAogICAgICBpbWdTcmM6ICcnLAogICAgICBkYXRhOiBudWxsLAogICAgICBmaWxlOiB1bmRlZmluZWQsCiAgICAgIHNjYWxlOiB7CiAgICAgICAgeDogMSwKICAgICAgICB5OiAxCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBfdXBsb2FkVGlwICgpIHsKICAgICAgaWYgKHRoaXMudXBsb2FkVGlwICE9IG51bGwgJiYgdGhpcy51cGxvYWRUaXAgIT09ICcnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudXBsb2FkVGlwCiAgICAgIH0KICAgICAgaWYgKHRoaXMubWF4U2l6ZSA+IDApIHsKICAgICAgICByZXR1cm4gYOWPquaUr+aMgSR7dGhpcy5hY2NlcHQucmVwbGFjZSgvLC9nLCAn44CBJyl9LOWkp+Wwj+S4jei2hei/hyR7dGhpcy5tYXhTaXplfU1gCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGDlj6rmlK/mjIEke3RoaXMuYWNjZXB0fSzlpKflsI/ml6DpmZDliLZgCiAgICAgIH0KICAgIH0sCiAgICBfY3JvcHBlciAoKSB7CiAgICAgIGNvbnN0IGRlZiA9IHsKICAgICAgICBhc3BlY3RSYXRpbzogMSwKICAgICAgICByZWFkeTogdGhpcy5yZWFkeQogICAgICB9CiAgICAgIGlmICh0aGlzLmNyb3BwZXIgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBkZWYKICAgICAgfQogICAgICBjb25zdCBhc3NpZ24gPSBPYmplY3QuYXNzaWduKGRlZiwgdGhpcy5jcm9wcGVyKQogICAgICBsb2cuZGVidWcoJ2Nyb3BwZXIgb3B0aW9uczonLCBhc3NpZ24pCiAgICAgIHJldHVybiBhc3NpZ24KICAgIH0sCiAgICBfY3JvcHBlckhlaWdodCAoKSB7CiAgICAgIGxldCBoZWlnaHQgPSB0aGlzLmNyb3BwZXJIZWlnaHQKICAgICAgaWYgKGhlaWdodCA9PSBudWxsKSB7CiAgICAgICAgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAqIDAuNTUKICAgICAgICBpZiAoaGVpZ2h0IDwgMjcwKSB7CiAgICAgICAgICBoZWlnaHQgPSAyNzAKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiAoaGVpZ2h0KSA9PT0gJ251bWJlcicpIHsKICAgICAgICBoZWlnaHQgKz0gJ3B4JwogICAgICB9CiAgICAgIHJldHVybiBoZWlnaHQKICAgIH0sCiAgICBfZGlhbG9nV2lkdGggKCkgewogICAgICBsZXQgd2lkdGggPSB0aGlzLmRpYWxvZ1dpZHRoCiAgICAgIGlmICh3aWR0aCA9PSBudWxsKSB7CiAgICAgICAgd2lkdGggPSAnNTAlJwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgKHdpZHRoKSA9PT0gJ251bWJlcicpIHsKICAgICAgICB3aWR0aCArPSAncHgnCiAgICAgIH0KICAgICAgcmV0dXJuIHdpZHRoCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuICh1cmwpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICBpZiAodXJsICE9IG51bGwgJiYgdXJsICE9PSAnJykgewogICAgICAgIHRoaXMuaW1nU3JjID0gdXJsCiAgICAgIH0KICAgIH0sCiAgICBjbG9zZSAoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgY2xlYXIgKCkgewogICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2UKICAgICAgaWYgKHRoaXMuJHJlZnMuZmlsZWlucHV0ICE9IG51bGwpIHsKICAgICAgICB0aGlzLiRyZWZzLmZpbGVpbnB1dC52YWx1ZSA9IG51bGwKICAgICAgfQogICAgICBpZiAodGhpcy4kcmVmcy5jcm9wcGVyICE9IG51bGwpIHsKICAgICAgICB0aGlzLiRyZWZzLmNyb3BwZXIuY2xlYXIoKQogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+WdnVlLWNyb3BwZXLnu4Tku7blr7nosaEKICAgIGdldENyb3BwZXIgKCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5jcm9wcGVyCiAgICB9LAogICAgcmVhZHkgKGV2ZW50KSB7CiAgICAgIGxvZy5kZWJ1ZygnY3JvcHBlciByZWFkeTonLCBldmVudCkKICAgICAgLy8gdGhpcy56b29tKC0wLjMpCiAgICB9LAogICAgcHJldmVudERlZmF1bHQgKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKICAgIC8vIOeCueWHu+aMiemSruaJk+W8gOaWh+S7tui1hOa6kOeql+WPowogICAgaGFuZGxlQ2xpY2sgKGUpIHsKICAgICAgdGhpcy4kcmVmcy5maWxlaW5wdXQuY2xpY2soKQogICAgfSwKICAgIC8vIOajgOa1i+mAieaLqeeahOaWh+S7tuaYr+WQpuWQiOmAggogICAgY2hlY2tGaWxlIChmaWxlKSB7CiAgICAgIC8vIOS7hemZkOWbvueJhwogICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoJ2ltYWdlJykgPT09IC0xKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZCI6YCC55qE5paH5Lu257G75Z6LJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgLy8g6LaF5Ye65aSn5bCPCiAgICAgIGlmICh0aGlzLm1heFNpemUgPiAwICYmIGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0ID4gdGhpcy5tYXhTaXplKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5Zu+54mH5aSn5bCP6LaF5Ye65pyA5aSn6ZmQ5Yi277yIJyArIHRoaXMubWF4U2l6ZSArICdNQu+8ie+8jOivt+mHjeaWsOmAieaLqScsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIHJldHVybiB0cnVlCiAgICB9LAoKICAgIC8vIOinpuWPkWlucHV05qGG55qEY2hhbmdl5LqL5Lu26YCJ5oup5Zu+54mHCiAgICBoYW5kbGVDaGFuZ2UgKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIGNvbnN0IGZpbGVzID0gZS50YXJnZXQuZmlsZXMgfHwgZS5kYXRhVHJhbnNmZXIuZmlsZXMKICAgICAgdGhpcy5pc0xvYWRlZCA9IHRydWUKICAgICAgY29uc3QgZmlsZSA9IGZpbGVzWzBdCiAgICAgIGlmICh0aGlzLmNoZWNrRmlsZShmaWxlKSkgewogICAgICAgIHRoaXMuZmlsZSA9IGZpbGUKICAgICAgICB0aGlzLnNldEltYWdlKGUpCiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgLy8gICB0aGlzLnpvb20oLTAuMykKICAgICAgICAvLyB9LCAxKQogICAgICB9CiAgICB9LAogICAgLy8g54K55Ye75YWz6Zet5by556qXCiAgICBoYW5kbGVDbG9zZSAoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcpCiAgICB9LAogICAgZG9Dcm9wcGVyICgpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9hZGVkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSgn6K+35YWI6YCJ5oup5Zu+54mHJykKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICB0aGlzLmRvT3V0cHV0KHRoaXMuZmlsZSkKICAgIH0sCiAgICBkb091dHB1dCAoZmlsZSkgewogICAgICBsb2cuZGVidWcoJ291dHB1dCB0aGlzOicsIHRoaXMpCiAgICAgIGNvbnN0IHJldCA9IHsgZmlsZSB9CiAgICAgIGlmICh0aGlzLm91dHB1dCA9PT0gJ2FsbCcpIHsKICAgICAgICB0aGlzLmdldENyb3BJbWFnZUJsb2IoKGJsb2IpID0+IHsKICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLmNyb3BJbWFnZURhdGFVcmwoKQogICAgICAgICAgcmV0LmJsb2IgPSBibG9iCiAgICAgICAgICByZXQuZGF0YVVybCA9IGRhdGFVcmwKICAgICAgICAgIHRoaXMuJGVtaXQoJ2RvbmUnLCByZXQpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgaWYgKHRoaXMub3V0cHV0ID09PSAnYmxvYicpIHsKICAgICAgICB0aGlzLmdldENyb3BJbWFnZUJsb2IoKGJsb2IpID0+IHsKICAgICAgICAgIHJldC5ibG9iID0gYmxvYgogICAgICAgICAgdGhpcy4kZW1pdCgnZG9uZScsIHJldCkKICAgICAgICB9KQogICAgICB9CiAgICAgIGlmICh0aGlzLm91dHB1dCA9PT0gJ2RhdGFVcmwnKSB7CiAgICAgICAgcmV0LmRhdGFVcmwgPSB0aGlzLmNyb3BJbWFnZURhdGFVcmwoKQogICAgICAgIHRoaXMuJGVtaXQoJ2RvbmUnLCByZXQpCiAgICAgIH0KICAgIH0sCiAgICBlbWl0IChyZXN1bHQpIHsKICAgICAgdGhpcy4kZW1pdCgnZG9uZScsIHJlc3VsdCkKICAgIH0sCiAgICBjcm9wSW1hZ2VEYXRhVXJsICgpIHsKICAgICAgLy8gZ2V0IGltYWdlIGRhdGEgZm9yIHBvc3QgcHJvY2Vzc2luZywgZS5nLiB1cGxvYWQgb3Igc2V0dGluZyBpbWFnZSBzcmMKICAgICAgcmV0dXJuIHRoaXMuJHJlZnMuY3JvcHBlci5nZXRDcm9wcGVkQ2FudmFzKCkudG9EYXRhVVJMKCkKICAgIH0sCiAgICBnZXRDcm9wSW1hZ2VCbG9iIChjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkgewogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcygpLnRvQmxvYihjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkKICAgIH0sCiAgICBmbGlwWCAoKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5zY2FsZVgodGhpcy5zY2FsZS54ICo9IC0xKQogICAgfSwKICAgIGZsaXBZICgpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnNjYWxlWSh0aGlzLnNjYWxlLnkgKj0gLTEpCiAgICB9LAogICAgZ2V0Q3JvcEJveERhdGEgKCkgewogICAgICB0aGlzLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0Q3JvcEJveERhdGEoKSwgbnVsbCwgNCkKICAgIH0sCiAgICBnZXREYXRhICgpIHsKICAgICAgdGhpcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy4kcmVmcy5jcm9wcGVyLmdldERhdGEoKSwgbnVsbCwgNCkKICAgIH0sCiAgICBtb3ZlIChvZmZzZXRYLCBvZmZzZXRZKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5tb3ZlKG9mZnNldFgsIG9mZnNldFkpCiAgICB9LAogICAgcmVzZXQgKCkgewogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIucmVzZXQoKQogICAgfSwKICAgIHJvdGF0ZSAoZGVnKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5yb3RhdGUoZGVnKQogICAgfSwKICAgIHNldENyb3BCb3hEYXRhICgpIHsKICAgICAgaWYgKCF0aGlzLmRhdGEpIHJldHVybgogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIuc2V0Q3JvcEJveERhdGEoSlNPTi5wYXJzZSh0aGlzLmRhdGEpKQogICAgfSwKICAgIHNldERhdGEgKCkgewogICAgICBpZiAoIXRoaXMuZGF0YSkgcmV0dXJuCiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5zZXREYXRhKEpTT04ucGFyc2UodGhpcy5kYXRhKSkKICAgIH0sCiAgICBzZXRJbWFnZSAoZSkgewogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF0KICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZS8nKSA9PT0gLTEpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKCdQbGVhc2Ugc2VsZWN0IGFuIGltYWdlIGZpbGUnKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmICh0eXBlb2YgRmlsZVJlYWRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgICByZWFkZXIub25sb2FkID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICB0aGlzLmltZ1NyYyA9IGV2ZW50LnRhcmdldC5yZXN1bHQKICAgICAgICAgIC8vIHJlYnVpbGQgY3JvcHBlcmpzIHdpdGggdGhlIHVwZGF0ZWQgc291cmNlCiAgICAgICAgICB0aGlzLiRyZWZzLmNyb3BwZXIucmVwbGFjZShldmVudC50YXJnZXQucmVzdWx0KQogICAgICAgIH0KICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoJ1NvcnJ5LCBGaWxlUmVhZGVyIEFQSSBub3Qgc3VwcG9ydGVkJykKICAgICAgfQogICAgfSwKICAgIHNob3dGaWxlQ2hvb3NlciAoKSB7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXQuY2xpY2soKQogICAgfSwKICAgIHpvb20gKHBlcmNlbnQpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnJlbGF0aXZlWm9vbShwZXJjZW50KQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/d2p-extends/src/file-uploader/lib/cropper","sourcesContent":["<template>\n    <el-dialog class=\"cropper-uploader quying-dialog\" :title=\"title\" :visible.sync=\"dialogVisible\" append-to-body\n               :before-close=\"handleClose\" :close-on-click-modal=\"true\" ref=\"editAvatar\" :width=\"_dialogWidth\" >\n          <div class=\"cropper-uploader-wrap\" >\n            <input type=\"file\" v-show=\"false\" ref=\"fileinput\" :accept=\"accept\" @change=\"handleChange\">\n            <!-- step1 -->\n            <div class=\"cropper-uploader__choose cropper-uploader_left\" v-show=\"!isLoaded\">\n              <el-button round @click=\"handleClick\">+选择图片</el-button>\n              <p>{{_uploadTip}}</p>\n            </div>\n            <!-- step2 -->\n            <div class=\"cropper-uploader__edit cropper-uploader_left\" v-show=\"isLoaded\">\n              <div class=\"cropper-uploader__edit-area\" >\n                    <vue-cropper\n                      ref=\"cropper\"\n                      :src=\"imgSrc\"\n                      preview=\".preview\"\n                      :style=\"{height:_cropperHeight}\"\n                      v-bind=\"_cropper\"\n                    />\n              </div>\n              <div class=\"tool-bar\">\n                <el-button-group>\n                  <el-button round size=\"mini\"  icon=\"el-icon-edit\" @click=\"handleClick\">重新选择</el-button>\n                  <el-button round size=\"mini\" type=\"\"  @click=\"flipX\">左右翻转</el-button>\n                  <el-button round size=\"mini\" type=\"\"  @click=\"flipY\">上下翻转</el-button>\n                  <el-button round size=\"mini\" type=\"\"  icon=\"el-icon-zoom-in\" @click=\"zoom(0.1)\"></el-button>\n                  <el-button round size=\"mini\" type=\"\"  icon=\"el-icon-zoom-out\" @click=\"zoom(-0.1)\"></el-button>\n                  <el-button round size=\"mini\" type=\"\" icon=\"el-icon-refresh-right\" @click=\"rotate(90)\">旋转</el-button>\n                  <el-button round size=\"mini\" type=\"\" icon=\"el-icon-refresh\" @click=\"reset\">重置</el-button>\n                </el-button-group>\n              </div>\n            </div>\n            <div class=\"cropper-uploader__preview\">\n              <span class=\"cropper-uploader__preview-title\">预览</span>\n              <div class=\"cropper-uploader__preview-120 preview\"></div>\n              <div class=\"cropper-uploader__preview-65 preview\" :class=\"{'round': _cropper.aspectRatio===1}\"></div>\n            </div>\n          </div>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose\" size=\"mini\">取 消</el-button>\n        <el-button type=\"primary\" size=\"mini\" @click=\"doCropper()\">确 定</el-button>\n      </div>\n    </el-dialog>\n</template>\n\n<script>\nimport VueCropper from './vue-cropper'\nimport log from '../../../utils/util.log'\n// 图片裁剪对话框，封装cropperjs\nexport default {\n  name: 'd2p-cropper',\n  components: {\n    VueCropper\n  },\n  props: {\n    // 对话框标题\n    title: {\n      type: String,\n      default: '图片裁剪'\n    },\n    // cropper的高度，默认为浏览器可视窗口高度的40%，最小270\n    cropperHeight: {\n      type: [String, Number]\n    },\n    // 对话框宽度，默认50%\n    dialogWidth: {\n      type: [String, Number],\n      default: '50%'\n    },\n    // 图片大小限制，单位MB，0为不限制\n    maxSize: {\n      type: Number,\n      default: 5\n    },\n    // 上传提示\n    uploadTip: {\n      type: String\n    },\n    // cropperjs的参数，详见：https://github.com/fengyuanchen/cropperjs\n    cropper: {\n      type: Object\n    },\n    // 可接收的文件后缀\n    accept: {\n      type: String,\n      default: '.jpg, .jpeg, .png, .gif, .webp'\n    },\n    // 输出类型，blob,dataUrl,all\n    output: {\n      type: String,\n      default: 'blob'// blob\n    }\n  },\n  data () {\n    return {\n      dialogVisible: false,\n      isLoaded: false,\n      imgSrc: '',\n      data: null,\n      file: undefined,\n      scale: {\n        x: 1,\n        y: 1\n      }\n    }\n  },\n  computed: {\n    _uploadTip () {\n      if (this.uploadTip != null && this.uploadTip !== '') {\n        return this.uploadTip\n      }\n      if (this.maxSize > 0) {\n        return `只支持${this.accept.replace(/,/g, '、')},大小不超过${this.maxSize}M`\n      } else {\n        return `只支持${this.accept},大小无限制`\n      }\n    },\n    _cropper () {\n      const def = {\n        aspectRatio: 1,\n        ready: this.ready\n      }\n      if (this.cropper == null) {\n        return def\n      }\n      const assign = Object.assign(def, this.cropper)\n      log.debug('cropper options:', assign)\n      return assign\n    },\n    _cropperHeight () {\n      let height = this.cropperHeight\n      if (height == null) {\n        height = document.documentElement.clientHeight * 0.55\n        if (height < 270) {\n          height = 270\n        }\n      }\n      if (typeof (height) === 'number') {\n        height += 'px'\n      }\n      return height\n    },\n    _dialogWidth () {\n      let width = this.dialogWidth\n      if (width == null) {\n        width = '50%'\n      }\n      if (typeof (width) === 'number') {\n        width += 'px'\n      }\n      return width\n    }\n  },\n  methods: {\n    open (url) {\n      this.dialogVisible = true\n      if (url != null && url !== '') {\n        this.imgSrc = url\n      }\n    },\n    close () {\n      this.dialogVisible = false\n    },\n    clear () {\n      this.isLoaded = false\n      if (this.$refs.fileinput != null) {\n        this.$refs.fileinput.value = null\n      }\n      if (this.$refs.cropper != null) {\n        this.$refs.cropper.clear()\n      }\n    },\n    // 获取vue-cropper组件对象\n    getCropper () {\n      return this.$refs.cropper\n    },\n    ready (event) {\n      log.debug('cropper ready:', event)\n      // this.zoom(-0.3)\n    },\n    preventDefault (e) {\n      e.preventDefault()\n      return false\n    },\n    // 点击按钮打开文件资源窗口\n    handleClick (e) {\n      this.$refs.fileinput.click()\n    },\n    // 检测选择的文件是否合适\n    checkFile (file) {\n      // 仅限图片\n      if (file.type.indexOf('image') === -1) {\n        this.$message({\n          message: '请选择合适的文件类型',\n          type: 'warning'\n        })\n        return false\n      }\n      // 超出大小\n      if (this.maxSize > 0 && file.size / 1024 / 1024 > this.maxSize) {\n        this.$message({\n          message: '图片大小超出最大限制（' + this.maxSize + 'MB），请重新选择',\n          type: 'warning'\n        })\n        return false\n      }\n      return true\n    },\n\n    // 触发input框的change事件选择图片\n    handleChange (e) {\n      e.preventDefault()\n      const files = e.target.files || e.dataTransfer.files\n      this.isLoaded = true\n      const file = files[0]\n      if (this.checkFile(file)) {\n        this.file = file\n        this.setImage(e)\n        // setTimeout(() => {\n        //   this.zoom(-0.3)\n        // }, 1)\n      }\n    },\n    // 点击关闭弹窗\n    handleClose () {\n      this.dialogVisible = false\n      this.$emit('cancel')\n    },\n    doCropper () {\n      if (!this.isLoaded) {\n        this.$message('请先选择图片')\n        return\n      }\n      this.dialogVisible = false\n      this.doOutput(this.file)\n    },\n    doOutput (file) {\n      log.debug('output this:', this)\n      const ret = { file }\n      if (this.output === 'all') {\n        this.getCropImageBlob((blob) => {\n          const dataUrl = this.cropImageDataUrl()\n          ret.blob = blob\n          ret.dataUrl = dataUrl\n          this.$emit('done', ret)\n        })\n      }\n\n      if (this.output === 'blob') {\n        this.getCropImageBlob((blob) => {\n          ret.blob = blob\n          this.$emit('done', ret)\n        })\n      }\n      if (this.output === 'dataUrl') {\n        ret.dataUrl = this.cropImageDataUrl()\n        this.$emit('done', ret)\n      }\n    },\n    emit (result) {\n      this.$emit('done', result)\n    },\n    cropImageDataUrl () {\n      // get image data for post processing, e.g. upload or setting image src\n      return this.$refs.cropper.getCroppedCanvas().toDataURL()\n    },\n    getCropImageBlob (callback, type, quality) {\n      this.$refs.cropper.getCroppedCanvas().toBlob(callback, type, quality)\n    },\n    flipX () {\n      this.$refs.cropper.scaleX(this.scale.x *= -1)\n    },\n    flipY () {\n      this.$refs.cropper.scaleY(this.scale.y *= -1)\n    },\n    getCropBoxData () {\n      this.data = JSON.stringify(this.$refs.cropper.getCropBoxData(), null, 4)\n    },\n    getData () {\n      this.data = JSON.stringify(this.$refs.cropper.getData(), null, 4)\n    },\n    move (offsetX, offsetY) {\n      this.$refs.cropper.move(offsetX, offsetY)\n    },\n    reset () {\n      this.$refs.cropper.reset()\n    },\n    rotate (deg) {\n      this.$refs.cropper.rotate(deg)\n    },\n    setCropBoxData () {\n      if (!this.data) return\n      this.$refs.cropper.setCropBoxData(JSON.parse(this.data))\n    },\n    setData () {\n      if (!this.data) return\n      this.$refs.cropper.setData(JSON.parse(this.data))\n    },\n    setImage (e) {\n      const file = e.target.files[0]\n      if (file.type.indexOf('image/') === -1) {\n        this.$message('Please select an image file')\n        return\n      }\n      if (typeof FileReader === 'function') {\n        const reader = new FileReader()\n        reader.onload = (event) => {\n          this.imgSrc = event.target.result\n          // rebuild cropperjs with the updated source\n          this.$refs.cropper.replace(event.target.result)\n        }\n        reader.readAsDataURL(file)\n      } else {\n        this.$message('Sorry, FileReader API not supported')\n      }\n    },\n    showFileChooser () {\n      this.$refs.input.click()\n    },\n    zoom (percent) {\n      this.$refs.cropper.relativeZoom(percent)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  $area-height: 280px;\n  .cropper-uploader {\n    &-wrap {\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      height: 100%;\n    }\n\n    &_left {\n      font-size: 13px;\n      color: #999999;\n      position: relative;\n      background: #ecf2f6;\n      flex-grow:5;\n      margin:10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction:  column\n    }\n\n    &__choose {\n      p {\n        width: 100%;\n        text-align: center;\n      }\n    }\n\n    &__edit {\n      &-area {\n        width:100%;\n        overflow: hidden;\n\n        &-img {\n          object-fit: cover;\n        }\n      }\n      .tool-bar{\n        margin:10px;position: absolute;bottom: -50px;\n      }\n    }\n\n    $top: 30px;\n\n    &__preview {\n      background: #ecf2f6;\n      text-align: center;\n      width: 200px;\n      padding-top: $top;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      font-size: 13px;\n      margin:10px;\n      padding:10px;\n      &-title {\n        color: #999999;\n      }\n      .preview{\n        overflow: hidden;\n        margin:10px;\n        border: 1px #cacaca solid;\n      }\n      .round{\n        border-radius: 500px;\n      }\n\n      img {\n        background: #fff;\n        margin-top: 5px;\n        border-radius: 500px;\n      }\n\n      &-120 {\n        height: 120px;\n        width: 120px;\n      }\n\n      &-65 {\n        height: 65px;\n        width: 65px;\n      }\n\n      &-40 {\n        height: 30px;\n        width: 30px;\n      }\n    }\n  }\n</style>\n"]}]}