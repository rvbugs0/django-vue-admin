{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js??ref--14-0!/Users/raviailani/Downloads/django-vue-admin/web/src/plugin/permission/directive/permission/util.permission.js","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/plugin/permission/directive/permission/util.permission.js","mtime":1674694301487},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js","mtime":1674694549000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9yYXZpYWlsYW5pL0Rvd25sb2Fkcy9kamFuZ28tdnVlLWFkbWluL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKLyoKICogQOWIm+W7uuaWh+S7tuaXtumXtDogMjAyMS0wNi0yNyAxMDoxNDoyNgogKiBAQXV0aGVyOiDnjL/lsI/lpKkKICogQOacgOWQjuS/ruaUueS6ujog54y/5bCP5aSpCiAqIEDmnIDlkI7kv67mlLnml7bpl7Q6IDIwMjEtMDgtMDkgMjE6NTE6MjkKICog6IGU57O7UXE6MTYzODI0NTMwNgogKiBA5paH5Lu25LuL57uNOiDmnYPpmZDmjqfliLYKICovCmltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBoYXNQZXJtaXNzaW9uczogZnVuY3Rpb24gaGFzUGVybWlzc2lvbnModmFsdWUpIHsKICAgIGlmIChwcm9jZXNzLmVudi5WVUVfQVBQX1BNX0VOQUJMRUQpIHsKICAgICAgdmFyIHBhdGggPSByb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnBhdGg7IC8vIOW9k+WJjei3r+eUsQogICAgICB2YXIgbmVlZCA9IFtdOwogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgIG5lZWQucHVzaCh2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheSAmJiB2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgbmVlZCA9IG5lZWQuY29uY2F0KHZhbHVlKTsKICAgICAgfQogICAgICBpZiAobmVlZC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25lZWQgcGVybWlzc2lvbnMhIExpa2Ugdi1wZXJtaXNzaW9uPSJ1c2Vyc3BoZXJlOnVzZXI6dmlldyIgJyk7CiAgICAgIH0KICAgICAgLy8g6I635Y+W5omA5pyJ55qE6I+c5Y2V6Lev55SxKOWMheWQq+adg+mZkCkKICAgICAgdmFyIG1lbnVUcmVlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbWVudURhdGEnKTsKICAgICAgbWVudVRyZWUgPSBKU09OLnBhcnNlKG1lbnVUcmVlKTsKICAgICAgdmFyIHVzZXJQZXJtaXNzaW9uTGlzdCA9IFhFVXRpbHMudG9UcmVlQXJyYXkobWVudVRyZWUpOwogICAgICB2YXIgcGVybWlzc2lvbkxpc3QgPSBbXTsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHVzZXJQZXJtaXNzaW9uTGlzdCksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBpZiAoaXRlbS5tZW51UGVybWlzc2lvbikgewogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGl0ZW0ubWVudVBlcm1pc3Npb24pLAogICAgICAgICAgICAgIF9zdGVwMjsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgdmFyIHBlciA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgIHBlcm1pc3Npb25MaXN0LnB1c2goaXRlbS5wYXRoICsgJzonICsgcGVyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHBlcm1pc3Npb25MaXN0LmluY2x1ZGVzKHBhdGggKyAnOicgKyB2YWx1ZSk7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn07"},{"version":3,"names":["XEUtils","router","hasPermissions","value","process","env","VUE_APP_PM_ENABLED","path","history","current","need","push","Array","length","concat","Error","menuTree","sessionStorage","getItem","JSON","parse","userPermissionList","toTreeArray","permissionList","item","menuPermission","per","includes"],"sources":["/Users/raviailani/Downloads/django-vue-admin/web/src/plugin/permission/directive/permission/util.permission.js"],"sourcesContent":["/*\n * @创建文件时间: 2021-06-27 10:14:26\n * @Auther: 猿小天\n * @最后修改人: 猿小天\n * @最后修改时间: 2021-08-09 21:51:29\n * 联系Qq:1638245306\n * @文件介绍: 权限控制\n */\nimport XEUtils from 'xe-utils'\nimport router from '@/router'\nexport default {\n  hasPermissions (value) {\n    if (process.env.VUE_APP_PM_ENABLED) {\n      const path = router.history.current.path// 当前路由\n      let need = []\n      if (typeof value === 'string') {\n        need.push(value)\n      } else if (value && value instanceof Array && value.length > 0) {\n        need = need.concat(value)\n      }\n      if (need.length === 0) {\n        throw new Error('need permissions! Like v-permission=\"usersphere:user:view\" ')\n      }\n      // 获取所有的菜单路由(包含权限)\n      let menuTree = sessionStorage.getItem('menuData')\n      menuTree = JSON.parse(menuTree)\n      const userPermissionList = XEUtils.toTreeArray(menuTree)\n      const permissionList = []\n      for (const item of userPermissionList) {\n        if (item.menuPermission) {\n          for (const per of item.menuPermission) {\n            permissionList.push(item.path + ':' + per)\n          }\n        }\n      }\n      return permissionList.includes(path + ':' + value)\n    }\n    return true\n  }\n}\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,OAAO,MAAM,UAAU;AAC9B,OAAOC,MAAM,MAAM,UAAU;AAC7B,eAAe;EACbC,cAAc,0BAAEC,KAAK,EAAE;IACrB,IAAIC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAE;MAClC,IAAMC,IAAI,GAAGN,MAAM,CAACO,OAAO,CAACC,OAAO,CAACF,IAAI;MACxC,IAAIG,IAAI,GAAG,EAAE;MACb,IAAI,OAAOP,KAAK,KAAK,QAAQ,EAAE;QAC7BO,IAAI,CAACC,IAAI,CAACR,KAAK,CAAC;MAClB,CAAC,MAAM,IAAIA,KAAK,IAAIA,KAAK,YAAYS,KAAK,IAAIT,KAAK,CAACU,MAAM,GAAG,CAAC,EAAE;QAC9DH,IAAI,GAAGA,IAAI,CAACI,MAAM,CAACX,KAAK,CAAC;MAC3B;MACA,IAAIO,IAAI,CAACG,MAAM,KAAK,CAAC,EAAE;QACrB,MAAM,IAAIE,KAAK,CAAC,6DAA6D,CAAC;MAChF;MACA;MACA,IAAIC,QAAQ,GAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;MACjDF,QAAQ,GAAGG,IAAI,CAACC,KAAK,CAACJ,QAAQ,CAAC;MAC/B,IAAMK,kBAAkB,GAAGrB,OAAO,CAACsB,WAAW,CAACN,QAAQ,CAAC;MACxD,IAAMO,cAAc,GAAG,EAAE;MAAA,2CACNF,kBAAkB;QAAA;MAAA;QAArC,oDAAuC;UAAA,IAA5BG,IAAI;UACb,IAAIA,IAAI,CAACC,cAAc,EAAE;YAAA,4CACLD,IAAI,CAACC,cAAc;cAAA;YAAA;cAArC,uDAAuC;gBAAA,IAA5BC,GAAG;gBACZH,cAAc,CAACZ,IAAI,CAACa,IAAI,CAACjB,IAAI,GAAG,GAAG,GAAGmB,GAAG,CAAC;cAC5C;YAAC;cAAA;YAAA;cAAA;YAAA;UACH;QACF;MAAC;QAAA;MAAA;QAAA;MAAA;MACD,OAAOH,cAAc,CAACI,QAAQ,CAACpB,IAAI,GAAG,GAAG,GAAGJ,KAAK,CAAC;IACpD;IACA,OAAO,IAAI;EACb;AACF,CAAC"}]}