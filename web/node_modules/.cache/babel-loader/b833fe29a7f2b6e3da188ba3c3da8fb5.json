{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/formContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/formContent.vue","mtime":1674694301490},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmVuZHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAnLi4vYXBpJzsKaW1wb3J0IHV0aWwgZnJvbSAnQC9saWJzL3V0aWwnOwppbXBvcnQgdGFibGVTZWxlY3RvciBmcm9tICdAL2NvbXBvbmVudHMvdGFibGUtc2VsZWN0b3IvdGFibGUtc2VsZWN0b3InOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Zvcm1Db250ZW50JywKICBpbmplY3Q6IFsncmVmcmVzaFZpZXcnXSwKICBjb21wb25lbnRzOiB7CiAgICB0YWJsZVNlbGVjdG9yOiB0YWJsZVNlbGVjdG9yCiAgfSwKICBwcm9wczogewogICAgb3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBlZGl0YWJsZVRhYnNJdGVtOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9wdGlvbnM6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihudikgewogICAgICAgIGlmIChudiAmJiBudi5pZCkgewogICAgICAgICAgdGhpcy5nZXRJbml0KCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtTGlzdDogW10sCiAgICAgIGZvcm06IHt9LAogICAgICBjaGlsZFRhYmxlRGF0YTogW10sCiAgICAgIGNoaWxkUmVtb3ZlVmlzaWJsZTogZmFsc2UsCiAgICAgIHZhbGlkUnVsZXM6IHsKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+W/hemhu+Whq+WGmScKICAgICAgICB9XSwKICAgICAgICBrZXk6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflv4XpobvloavlhpknCiAgICAgICAgfV0sCiAgICAgICAgdmFsdWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflv4XpobvloavlhpknCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgdXBsb2FkVXJsOiB1dGlsLmJhc2VVUkwoKSArICdhcGkvc3lzdGVtL2ZpbGUvJywKICAgICAgdXBsb2FkSGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICdKV1QgJyArIHV0aWwuY29va2llcy5nZXQoJ3Rva2VuJykKICAgICAgfSwKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnLAogICAgICBkaWFsb2dJbWdWaXNpYmxlOiBmYWxzZSwKICAgICAgdXBsb2FkSW1nS2V5OiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5pWw5o2uCiAgICBnZXRJbml0OiBmdW5jdGlvbiBnZXRJbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGFwaS5HZXRMaXN0KHsKICAgICAgICBwYXJlbnQ6IHRoaXMub3B0aW9ucy5pZCwKICAgICAgICBsaW1pdDogOTk5CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBfdGhpcy5mb3JtTGlzdCA9IGRhdGE7CiAgICAgICAgdmFyIGZvcm0gPSB7fTsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YSksCiAgICAgICAgICBfc3RlcDsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIHZhciBrZXkgPSBpdGVtLmtleTsKICAgICAgICAgICAgaWYgKGl0ZW0udmFsdWUpIHsKICAgICAgICAgICAgICBmb3JtW2tleV0gPSBpdGVtLnZhbHVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChbNSwgMTIsIDE0XS5pbmRleE9mKGl0ZW0uZm9ybV9pdGVtX3R5cGUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgZm9ybVtrZXldID0gW107CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvcm1ba2V5XSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGl0ZW0uZm9ybV9pdGVtX3R5cGVfbGFiZWwgPT09ICdhcnJheScpIHsKICAgICAgICAgICAgICB0aGF0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gJ3hUYWJsZV8nICsga2V5OwogICAgICAgICAgICAgICAgdmFyICR0YWJsZSA9IF90aGlzLiRyZWZzW3RhYmxlTmFtZV1bMF07CiAgICAgICAgICAgICAgICAkdGFibGUubG9hZERhdGEoaXRlbS5jaGlubGRlcm4pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgX2xvb3AoKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICAgIF90aGlzLmZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZvcm0pKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5pWw5o2uCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBmb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm0pKTsKICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmb3JtKTsKICAgICAgdmFyIHZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZm9ybSk7CiAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBfdGhpczIuZm9ybUxpc3RbaW5kZXhdOwogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2UKICAgICAgICB2YXIgZm9ybV9pdGVtX3R5cGVfbGFiZWwgPSBpdGVtLmZvcm1faXRlbV90eXBlX2xhYmVsOwoKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlCiAgICAgICAgaWYgKGZvcm1faXRlbV90eXBlX2xhYmVsID09PSAnYXJyYXknKSB7CiAgICAgICAgICB2YXIgcGFyZW50SWQgPSBpdGVtLmlkOwogICAgICAgICAgdmFyIHRhYmxlTmFtZSA9ICd4VGFibGVfJyArIGl0ZW0ua2V5OwogICAgICAgICAgdmFyICR0YWJsZSA9IF90aGlzMi4kcmVmc1t0YWJsZU5hbWVdWzBdOwogICAgICAgICAgdmFyIF8kdGFibGUkZ2V0VGFibGVEYXRhID0gJHRhYmxlLmdldFRhYmxlRGF0YSgpLAogICAgICAgICAgICB0YWJsZURhdGEgPSBfJHRhYmxlJGdldFRhYmxlRGF0YS50YWJsZURhdGE7CiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRhYmxlRGF0YSksCiAgICAgICAgICAgIF9zdGVwMjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIGNoaWxkID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgIGlmICghY2hpbGQuaWQgJiYgY2hpbGQua2V5ICYmIGNoaWxkLnZhbHVlKSB7CiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYXJlbnRJZDsKICAgICAgICAgICAgICAgIGNoaWxkLmlkID0gbnVsbDsKICAgICAgICAgICAgICAgIF90aGlzMi5mb3JtTGlzdC5wdXNoKGNoaWxkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5b+F5aGr6aG555qE5Yik5patCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoaXRlbS5ydWxlKSwKICAgICAgICAgICAgX3N0ZXAzOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICB2YXIgYXJyID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICAgIGlmIChhcnIucmVxdWlyZWQgJiYgdGFibGVEYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihpdGVtLnRpdGxlICsgJ+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgdjogdm9pZCAwCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpdGVtLnZhbHVlID0gdGFibGVEYXRhOwogICAgICAgIH0KICAgICAgICAvLyDotYvlgLzmk43kvZwKICAgICAgICBrZXlzLm1hcChmdW5jdGlvbiAobWFwS2V5LCBtYXBJbmRleCkgewogICAgICAgICAgaWYgKG1hcEtleSA9PT0gaXRlbS5rZXkpIHsKICAgICAgICAgICAgaWYgKGl0ZW0uZm9ybV9pdGVtX3R5cGVfbGFiZWwgIT09ICdhcnJheScpIHsKICAgICAgICAgICAgICBpdGVtLnZhbHVlID0gdmFsdWVzW21hcEluZGV4XTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyDlv4XloavpobnnmoTpqozor4EKICAgICAgICAgICAgaWYgKFsnaW1nJywgJ2ltZ3MnXS5pbmRleE9mKGl0ZW0uZm9ybV9pdGVtX3R5cGVfbGFiZWwpID4gLTEpIHsKICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGl0ZW0ucnVsZSksCiAgICAgICAgICAgICAgICBfc3RlcDQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIHZhciBfYXJyID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgICAgICAgICBpZiAoX2Fyci5yZXF1aXJlZCAmJiBpdGVtLnZhbHVlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihpdGVtLnRpdGxlICsgJ+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwogICAgICBmb3IgKHZhciBpbmRleCBpbiB0aGlzLmZvcm1MaXN0KSB7CiAgICAgICAgdmFyIF9yZXQgPSBfbG9vcDIoKTsKICAgICAgICBpZiAoX3R5cGVvZihfcmV0KSA9PT0gIm9iamVjdCIpIHJldHVybiBfcmV0LnY7CiAgICAgIH0KICAgICAgdGhhdC4kcmVmcy5mb3JtLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgdGhhdC4kcmVmcy5mb3JtLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgYXBpLnNhdmVDb250ZW50KF90aGlzMi5vcHRpb25zLmlkLCBfdGhpczIuZm9ybUxpc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgICAgIF90aGlzMi5yZWZyZXNoVmlldygpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6L+95YqgCiAgICBvbkFwcGVuZDogZnVuY3Rpb24gb25BcHBlbmQodGFibGVOYW1lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciAkdGFibGUsIF8kdGFibGUkZ2V0VGFibGVEYXRhMiwgdGFibGVEYXRhLCB0YWJsZUxlbmd0aCwgXyR0YWJsZSRpbnNlcnQsIG5ld1JvdywgZXJyTWFwLCBfJHRhYmxlJGluc2VydDIsIF9uZXdSb3c7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgJHRhYmxlID0gX3RoaXMzLiRyZWZzW3RhYmxlTmFtZV1bMF07CiAgICAgICAgICAgICAgXyR0YWJsZSRnZXRUYWJsZURhdGEyID0gJHRhYmxlLmdldFRhYmxlRGF0YSgpLCB0YWJsZURhdGEgPSBfJHRhYmxlJGdldFRhYmxlRGF0YTIudGFibGVEYXRhOwogICAgICAgICAgICAgIHRhYmxlTGVuZ3RoID0gdGFibGVEYXRhLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoISh0YWJsZUxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF8kdGFibGUkaW5zZXJ0ID0gJHRhYmxlLmluc2VydCgpLCBuZXdSb3cgPSBfJHRhYmxlJGluc2VydC5yb3c7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3Um93KTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuICR0YWJsZS52YWxpZGF0ZSgpLmNhdGNoKGZ1bmN0aW9uIChlcnJNYXApIHsKICAgICAgICAgICAgICAgIHJldHVybiBlcnJNYXA7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgZXJyTWFwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpZiAoZXJyTWFwKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoJ+agoemqjOS4jemAmui/h++8gScpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfJHRhYmxlJGluc2VydDIgPSAkdGFibGUuaW5zZXJ0KCksIF9uZXdSb3cgPSBfJHRhYmxlJGluc2VydDIucm93OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX25ld1Jvdyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOWtkOihqOWIoOmZpAogICAgb25SZW1vdmVDaGlsZDogZnVuY3Rpb24gb25SZW1vdmVDaGlsZChyb3csIGluZGV4LCByZWZOYW1lKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZyhyb3csIGluZGV4KTsKICAgICAgaWYgKHJvdy5pZCkgewogICAgICAgIGFwaS5EZWxPYmoocm93LmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzNC5yZWZyZXNoVmlldygpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hpbGRUYWJsZURhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICB2YXIgdGFibGVOYW1lID0gJ3hUYWJsZV8nICsgcmVmTmFtZTsKICAgICAgICB2YXIgdGFibGVEYXRhID0gdGhpcy4kcmVmc1t0YWJsZU5hbWVdWzBdLnJlbW92ZShyb3cpOwogICAgICAgIGNvbnNvbGUubG9nKHRhYmxlRGF0YSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlm77niYfpooTop4gKICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybCA9IGZpbGUudXJsOwogICAgICB0aGlzLmRpYWxvZ0ltZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWIpOaWreaYr+WQpuS4uuWbvueJhwogICAgLy8g5bCB6KOF5LiA5Liq5Yik5pat5Zu+54mH5paH5Lu25ZCO57yA5ZCN55qE5pa55rOVCiAgICBpc0ltYWdlOiBmdW5jdGlvbiBpc0ltYWdlKGZpbGVOYW1lKSB7CiAgICAgIGlmICh0eXBlb2YgZmlsZU5hbWUgIT09ICdzdHJpbmcnKSByZXR1cm47CiAgICAgIHZhciBuYW1lID0gZmlsZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgcmV0dXJuIG5hbWUuZW5kc1dpdGgoJy5wbmcnKSB8fCBuYW1lLmVuZHNXaXRoKCcuanBlZycpIHx8IG5hbWUuZW5kc1dpdGgoJy5qcGcnKSB8fCBuYW1lLmVuZHNXaXRoKCcucG5nJykgfHwgbmFtZS5lbmRzV2l0aCgnLmJtcCcpOwogICAgfSwKICAgIC8vIOS4iuS8oOaIkOWKnwogICAgaGFuZGxlVXBsb2FkU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlVXBsb2FkU3VjY2VzcyhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QsIGltZ0tleSkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBjb2RlID0gcmVzcG9uc2UuY29kZSwKICAgICAgICBtc2cgPSByZXNwb25zZS5tc2c7CiAgICAgIGlmIChjb2RlID09PSAyMDAwKSB7CiAgICAgICAgdmFyIHVybCA9IHJlc3BvbnNlLmRhdGEudXJsOwogICAgICAgIHZhciBuYW1lID0gZmlsZS5uYW1lOwogICAgICAgIHZhciB0eXBlID0gdGhhdC5pc0ltYWdlKG5hbWUpOwogICAgICAgIGlmICghdHlwZSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Y+q5YWB6K645LiK5Lyg5Zu+54mHJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciB1cGxvYWRJbWdLZXkgPSB0aGF0LmZvcm1baW1nS2V5XTsKICAgICAgICAgIGlmICghdXBsb2FkSW1nS2V5IHx8IHVwbG9hZEltZ0tleSA9PT0gJycpIHsKICAgICAgICAgICAgdGhhdC5mb3JtW2ltZ0tleV0gPSBbXTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGxlbikKICAgICAgICAgIHZhciBkaWN0ID0gewogICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICB1cmw6IHV0aWwuYmFzZVVSTCgpICsgdXJsCiAgICAgICAgICB9OwogICAgICAgICAgdGhhdC5mb3JtW2ltZ0tleV0ucHVzaChkaWN0KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aSx6LSlLCcgKyBKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWksei0pQogICAgaGFuZGxlRXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKUnKTsKICAgIH0sCiAgICAvLyDkuIrkvKDotoXlh7rpmZDliLYKICAgIGhhbmRsZUV4Y2VlZDogZnVuY3Rpb24gaGFuZGxlRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfotoXov4fmlofku7bkuIrkvKDmlbDph48nKTsKICAgIH0sCiAgICAvLyDliKDpmaTml7bnmoTpkqnlrZAKICAgIGJlZm9yZVJlbW92ZTogZnVuY3Rpb24gYmVmb3JlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0LCBrZXkpIHsKICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgdGhpcy5mb3JtW2tleV0ubWFwKGZ1bmN0aW9uICh2YWx1ZSwgaW54KSB7CiAgICAgICAgaWYgKHZhbHVlLnVpZCA9PT0gZmlsZS51aWQpIGluZGV4ID0gaW54OwogICAgICB9KTsKICAgICAgdGhpcy5mb3JtW2tleV0uc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDphY3nva7nmoTooYzliKDpmaQKICAgIG9uRGVsUm93OiBmdW5jdGlvbiBvbkRlbFJvdyhvYmopIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGFwaS5EZWxPYmoob2JqLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczUucmVmcmVzaFZpZXcoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6KGM57yW6L6RCiAgICBvbkVkaXQ6IGZ1bmN0aW9uIG9uRWRpdChpbmRleCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJHNldCh0aGF0LmZvcm1MaXN0W2luZGV4XSwgJ25ld19rZXknLCB0aGF0LmZvcm1MaXN0W2luZGV4XS5rZXkpOwogICAgICB0aGF0LiRzZXQodGhhdC5mb3JtTGlzdFtpbmRleF0sICdlZGl0JywgdHJ1ZSk7CiAgICB9LAogICAgLy8g6KGM57yW6L6R5L+d5a2YCiAgICBvbkVkaXRTYXZlOiBmdW5jdGlvbiBvbkVkaXRTYXZlKG9iaikgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgb2JqLmtleSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqLm5ld19rZXkpKTsKICAgICAgYXBpLlVwZGF0ZU9iaihvYmopLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNi5yZWZyZXNoVmlldygpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB0aGlzLmdldEluaXQoKQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;AA8OA;AACA;AACA;AAEA;EACAA;EACAC;EACAC;IACAC;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;IACA;EACA;EACAE;IACAH;MACAI;QACA;UACA;QACA;MACA;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC,QACA;UACAC;UACAC;QACA,EACA;QACAC,MACA;UACAF;UACAC;QACA,EACA;QACAE,QACA;UACAH;UACAC;QACA;MAEA;MACAG;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACAC;QAAAC;QAAAC;MAAA;QACA;QACA;QACA;QAAA,2CACArB;UAAA;QAAA;UAAA;YAAA;YACA;YACA;cACAE;YACA;cACA;gBACAA;cACA;gBACAA;cACA;YACA;YACA;cACAoB;gBACA;gBACA;gBACAC;cACA;YACA;UACA;UAlBA;YAAA;UAAA;QAkBA;UAAA;QAAA;UAAA;QAAA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MAAA,+BACA;QACA;QACA;QACA;;QAEA;QACA;UACA;UACA;UACA;UACA;YAAAC;UAAA,4CACAA;YAAA;UAAA;YAAA;cAAA;cACA;gBACAC;gBACAA;gBACA;cACA;YACA;YACA;UAAA;YAAA;UAAA;YAAA;UAAA;UAAA,4CACAC;YAAA;UAAA;YAAA;cAAA;cACA;gBACAL;gBAAA;kBAAA;gBAAA;cAEA;YACA;UAAA;YAAA;UAAA;YAAA;UAAA;UACAK;QACA;QACA;QACAC;UACA;YACA;cACAD;YACA;YACA;YACA;cAAA,4CACAA;gBAAA;cAAA;gBAAA;kBAAA;kBACA;oBACAL;oBACA;kBACA;gBACA;cAAA;gBAAA;cAAA;gBAAA;cAAA;YACA;UACA;QACA;MACA;MA5CA;QAAA;QAAA;MAAA;MA6CAA;MACAA;QACA;UACAH,mCACA;YACA;YACA;UACA;QACA;UACAU;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAP;cAAA,wBACAA;cACAQ;cAAA,MACAA;gBAAA;gBAAA;cAAA;cAAA,iBACAR;cACAM;cAAA;cAAA;YAAA;cAAA;cAAA,OAEAN;gBAAA;cAAA;YAAA;cAAAS;cACA;gBACA;cACA;gBAAA,kBACAT;gBACAM;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACAI;MAAA;MACAJ;MACA;QACAV;UACA;QACA;MACA;QACA;QACA;QACA;QACAU;MACA;IACA;IACA;IACAK;MACA;MACA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA,IACAC,OAEAC,SAFAD;QACAE,MACAD,SADAC;MAEA;QACA;QACA;QACA;QACA;UACA;QACA;UACA;UACA;YACAjB;UACA;UACA;UACA;YACAjC;YACAmD;UACA;UACAlB;QACA;MACA;QACA;MACA;IACA;IACA;IACAmB;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAzB;QACA;MACA;IACA;IACA;IACA0B;MACA;MACAvB;MACAA;IACA;IACA;IACAwB;MAAA;MACAC;MACA5B;QACA;MACA;IACA;EACA;EACA6B;IACA;EAAA;AAEA","names":["name","inject","components","tableSelector","props","options","type","editableTabsItem","watch","handler","immediate","data","formList","form","childTableData","childRemoveVisible","validRules","title","required","message","key","value","uploadUrl","uploadHeaders","Authorization","dialogImageUrl","dialogImgVisible","uploadImgKey","methods","getInit","api","parent","limit","that","$table","onSubmit","tableData","child","item","keys","console","onAppend","tableLength","errMap","onRemoveChild","handlePictureCardPreview","isImage","handleUploadSuccess","code","response","msg","url","handleError","handleExceed","beforeRemove","onDelRow","onEdit","onEditSave","obj","mounted"],"sourceRoot":"src/views/system/config/components","sources":["formContent.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row :gutter=\"10\">\n      <el-col :span=\"4\">变量标题</el-col>\n      <el-col :span=\"10\">变量值</el-col>\n      <el-col :span=\"4\" >变量名</el-col>\n      <el-col :span=\"2\">是否前端配置</el-col>\n      <el-col :span=\"3\" :offset=\"1\">操作</el-col>\n    </el-row>\n    <el-form ref=\"form\" :model=\"form\" label-width=\"240px\" label-position=\"left\" style=\"margin-top: 20px\">\n      <el-form-item :label=\"item.title\" :prop=\"['array'].indexOf(item.form_item_type_label) >-1?'':item.key\"\n                    :key=\"index\" :rules=\"item.rule || []\"\n                    v-for=\"(item,index) in formList\"\n\n      >\n        <template slot=\"label\">\n          <el-input v-if=\"item.edit\" v-model=\"item.title\" style=\"display: inline-block;width: 200px;\" placeholder=\"请输入标题\"></el-input>\n          <span v-else>{{item.title}}</span>\n        </template>\n        <el-col :span=\"11\" >\n          <!--    文本      -->\n          <el-input :key=\"index\" v-if=\"['text','textarea'].indexOf(item.form_item_type_label) >-1\"\n                    :type=\"item.form_item_type_label\"\n                    v-model=\"form[item.key]\" :placeholder=\"item.placeholder\" clearable></el-input>\n\n          <el-input-number :key=\"index\" v-else-if=\"item.form_item_type_label === 'number'\" v-model=\"form[item.key]\"\n                           :min=\"0\"></el-input-number>\n          <!--     datetime、date、time     -->\n          <el-date-picker\n            v-else-if=\"['datetime','date','time'].indexOf(item.form_item_type_label) >-1\"\n            v-model=\"form[item.key]\"\n            :key=\"index\"\n            :type=\"item.form_item_type_label\"\n            :placeholder=\"item.placeholder\">\n          </el-date-picker>\n          <!--    select      -->\n          <el-select\n            :key=\"index\"\n            v-else-if=\"item.form_item_type_label === 'select'\"\n            v-model=\"form[item.key]\"\n            :placeholder=\"item.placeholder\"\n            clearable\n          >\n            <el-option\n              v-for=\"item in dictionary(item.setting)  || []\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n          <!--    checkbox      -->\n          <el-checkbox-group\n            :key=\"index\"\n            v-else-if=\"item.form_item_type_label === 'checkbox'\"\n            v-model=\"form[item.key]\"\n            :placeholder=\"item.placeholder\"\n          >\n            <el-checkbox\n              v-for=\"item in dictionary(item.setting)  || []\"\n              :key=\"item.value\"\n              :label=\"item.value\"\n              :value=\"item.value\">\n              {{ item.label }}\n            </el-checkbox>\n          </el-checkbox-group>\n          <!--    radio      -->\n          <el-radio-group\n            :key=\"index\"\n            v-else-if=\"item.form_item_type_label === 'radio'\"\n            v-model=\"form[item.key]\"\n            :placeholder=\"item.placeholder\"\n            clearable\n          >\n            <el-radio\n              v-for=\"item in dictionary(item.setting)  || []\"\n              :key=\"item.value\"\n              :label=\"item.value\"\n              :value=\"item.value\">\n              {{ item.label }}\n            </el-radio>\n          </el-radio-group>\n          <!--    switch      -->\n          <el-switch\n            :key=\"index\"\n            v-else-if=\"item.form_item_type_label === 'switch'\"\n            v-model=\"form[item.key]\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\">\n          </el-switch>\n          <!--     图片     -->\n          <div v-else-if=\"['img','imgs'].indexOf(item.form_item_type_label) >-1\" :key=\"index\">\n            <el-upload\n              :action=\"uploadUrl\"\n              :headers=\"uploadHeaders\"\n              name=\"file\"\n              :accept=\"'image/*'\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-success=\"(response, file, fileList)=>{handleUploadSuccess(response, file, fileList,item.key)}\"\n              :on-error=\"handleError\"\n              :on-exceed=\"handleExceed\"\n              :before-remove=\"(file, fileList)=>{beforeRemove(file, fileList, item.key)}\"\n              :multiple=\"item.form_item_type_label!=='img'\"\n              :limit=\"item.form_item_type_label==='img'?1:5\"\n              :ref=\"'imgUpload_'+item.key\"\n              :data-keyname=\"item.key\"\n              :file-list=\"item.value?item.value:[]\"\n              list-type=\"picture-card\"\n            >\n              <i class=\"el-icon-plus\"></i>\n              <div slot=\"tip\" class=\"el-upload__tip\">选取图片后,需手动上传到服务器,并且只能上传jpg/png文件</div>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogImgVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </div>\n          <!--     文件     -->\n          <div v-else-if=\"['file'].indexOf(item.form_item_type_label) >-1\" :key=\"index\">\n            <el-upload\n              :action=\"uploadUrl\"\n              :headers=\"uploadHeaders\"\n              name=\"file\"\n              :on-preview=\"handlePictureCardPreview\"\n              :on-success=\"(response, file, fileList)=>{handleUploadSuccess(response, file, fileList,item.key)}\"\n              :on-error=\"handleError\"\n              :on-exceed=\"handleExceed\"\n              :before-remove=\"(file, fileList)=>{beforeRemove(file, fileList, item.key)}\"\n              :limit=\"5\"\n              :ref=\"'fileUpload_'+item.key\"\n              :data-keyname=\"item.key\"\n              :file-list=\"item.value\"\n              list-type=\"picture-card\"\n            >\n              <i class=\"el-icon-plus\"></i>\n              <div slot=\"tip\" class=\"el-upload__tip\">选取图片后,需手动上传到服务器,并且只能上传jpg/png文件</div>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogImgVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n          </div>\n          <!--    关联表      -->\n          <div v-else-if=\"['foreignkey','manytomany'].indexOf(item.form_item_type_label) >-1\" :key=\"index\">\n            <table-selector\n              v-model=\"form[item.key]\"\n              :el-props='{\n              pagination: true,\n              columns: item.setting.searchField}'\n            :dict=\"{\n              url:'/api/system/system_config/get_table_data/'+item.id+'/',\n               value: item.setting.primarykey,\n                label: item.setting.field,\n            }\"\n            :pagination=\"true\"\n              :multiple=\"item.form_item_type_label ==='manytomany'\"\n            ></table-selector>\n          </div>\n          <!--   数组       -->\n          <div v-else-if=\"item.form_item_type_label==='array'\" :key=\"index\">\n            <vxe-table\n              border\n              resizable\n              auto-resize\n              show-overflow\n              keep-source\n              :ref=\"'xTable_'+item.key\"\n              height=\"200\"\n              :edit-rules=\"validRules\"\n              :edit-config=\"{trigger: 'click', mode: 'row', showStatus: true}\">\n              <vxe-column field=\"title\" title=\"标题\" :edit-render=\"{autofocus: '.vxe-input--inner'}\">\n                <template #edit=\"{ row }\">\n                  <vxe-input v-model=\"row.title\" type=\"text\"></vxe-input>\n                </template>\n              </vxe-column>\n              <vxe-column field=\"key\" title=\"键名\" :edit-render=\"{autofocus: '.vxe-input--inner'}\">\n                <template #edit=\"{ row }\">\n                  <vxe-input v-model=\"row.key\" type=\"text\"></vxe-input>\n                </template>\n              </vxe-column>\n              <vxe-column field=\"value\" title=\"键值\" :edit-render=\"{}\">\n                <template #edit=\"{ row }\">\n                  <vxe-input v-model=\"row.value\" type=\"text\"></vxe-input>\n                </template>\n              </vxe-column>\n              <vxe-column title=\"操作\" width=\"100\" show-overflow>\n                <template #default=\"{ row,index }\">\n                  <el-popover\n                    placement=\"top\"\n                    width=\"160\"\n                    v-model=\"childRemoveVisible\">\n                    <p>删除后无法恢复,确定删除吗？</p>\n                    <div style=\"text-align: right; margin: 0\">\n                      <el-button size=\"mini\" type=\"text\" @click=\"childRemoveVisible = false\">取消</el-button>\n                      <el-button type=\"primary\" size=\"mini\" @click=\"onRemoveChild(row,index,item.key)\">确定</el-button>\n                    </div>\n                    <el-button type=\"text\" slot=\"reference\">删除</el-button>\n                  </el-popover>\n                </template>\n              </vxe-column>\n            </vxe-table>\n            <div>\n              <el-button size=\"mini\" @click=\"onAppend('xTable_'+item.key)\">追加</el-button>\n            </div>\n          </div>\n        </el-col>\n        <el-col :span=\"4\" :offset=\"1\">\n          <el-input v-if=\"item.edit\" v-model=\"item.new_key\" style=\"width: 200px;\" placeholder=\"请输入变量key\">\n            <template slot=\"prepend\">\n              <span style=\"padding: 0px 5px\">{{ editableTabsItem.key }}</span>\n              </template>\n          </el-input>\n          <span v-else>{{ editableTabsItem.key }}.{{ item.key }}</span>\n          </el-col>\n        <el-col :span=\"3\" :offset=\"1\">\n          <el-switch\n          v-model=\"item.status\"\n          active-color=\"#13ce66\"\n          inactive-color=\"#ff4949\">\n        </el-switch>\n        </el-col>\n        <el-col :span=\"2\">\n          <el-button v-if=\"item.edit\" size=\"mini\" type=\"primary\"  icon=\"el-icon-success\" @click=\"onEditSave(item)\"></el-button>\n          <el-button v-else size=\"mini\" type=\"primary\"  icon=\"el-icon-edit\" @click=\"onEdit(index)\"></el-button>\n           <el-popconfirm\n              title=\"确定删除该条数据吗？\"\n              @confirm=\"onDelRow(item)\"\n            >\n              <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" slot=\"reference\"></el-button>\n            </el-popconfirm>\n\n        </el-col>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as api from '../api'\nimport util from '@/libs/util'\nimport tableSelector from '@/components/table-selector/table-selector'\n\nexport default {\n  name: 'formContent',\n  inject: ['refreshView'],\n  components: {\n    tableSelector\n  },\n  props: {\n    options: {\n      type: Object\n    },\n    editableTabsItem: {\n      type: Object\n    }\n  },\n  watch: {\n    options: {\n      handler (nv) {\n        if (nv && nv.id) {\n          this.getInit()\n        }\n      },\n      immediate: true\n    }\n  },\n  data () {\n    return {\n      formList: [],\n      form: {},\n      childTableData: [],\n      childRemoveVisible: false,\n      validRules: {\n        title: [\n          {\n            required: true,\n            message: '必须填写'\n          }\n        ],\n        key: [\n          {\n            required: true,\n            message: '必须填写'\n          }\n        ],\n        value: [\n          {\n            required: true,\n            message: '必须填写'\n          }\n        ]\n      },\n      uploadUrl: util.baseURL() + 'api/system/file/',\n      uploadHeaders: {\n        Authorization: 'JWT ' + util.cookies.get('token')\n      },\n      dialogImageUrl: '',\n      dialogImgVisible: false,\n      uploadImgKey: null\n    }\n  },\n  methods: {\n    // 获取数据\n    getInit () {\n      const that = this\n      api.GetList({ parent: this.options.id, limit: 999 }).then(res => {\n        const { data } = res.data\n        this.formList = data\n        const form = {}\n        for (const item of data) {\n          const key = item.key\n          if (item.value) {\n            form[key] = item.value\n          } else {\n            if ([5, 12, 14].indexOf(item.form_item_type) !== -1) {\n              form[key] = []\n            } else {\n              form[key] = undefined\n            }\n          }\n          if (item.form_item_type_label === 'array') {\n            that.$nextTick(() => {\n              const tableName = 'xTable_' + key\n              const $table = this.$refs[tableName][0]\n              $table.loadData(item.chinldern)\n            })\n          }\n        }\n        this.form = JSON.parse(JSON.stringify(form))\n      })\n    },\n    // 提交数据\n    onSubmit () {\n      const that = this\n      const form = JSON.parse(JSON.stringify(this.form))\n      const keys = Object.keys(form)\n      const values = Object.values(form)\n      for (const index in this.formList) {\n        const item = this.formList[index]\n        // eslint-disable-next-line camelcase\n        const form_item_type_label = item.form_item_type_label\n\n        // eslint-disable-next-line camelcase\n        if (form_item_type_label === 'array') {\n          const parentId = item.id\n          const tableName = 'xTable_' + item.key\n          const $table = this.$refs[tableName][0]\n          const { tableData } = $table.getTableData()\n          for (const child of tableData) {\n            if (!child.id && child.key && child.value) {\n              child.parent = parentId\n              child.id = null\n              this.formList.push(child)\n            }\n          }\n          // 必填项的判断\n          for (const arr of item.rule) {\n            if (arr.required && tableData.length === 0) {\n              that.$message.error(item.title + '不能为空')\n              return\n            }\n          }\n          item.value = tableData\n        }\n        // 赋值操作\n        keys.map((mapKey, mapIndex) => {\n          if (mapKey === item.key) {\n            if (item.form_item_type_label !== 'array') {\n              item.value = values[mapIndex]\n            }\n            // 必填项的验证\n            if (['img', 'imgs'].indexOf(item.form_item_type_label) > -1) {\n              for (const arr of item.rule) {\n                if (arr.required && item.value === null) {\n                  that.$message.error(item.title + '不能为空')\n                  return\n                }\n              }\n            }\n          }\n        })\n      }\n      that.$refs.form.clearValidate()\n      that.$refs.form.validate((valid) => {\n        if (valid) {\n          api.saveContent(this.options.id,\n            this.formList).then(res => {\n            this.$message.success('保存成功')\n            this.refreshView()\n          })\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    // 追加\n    async onAppend (tableName) {\n      const $table = this.$refs[tableName][0]\n      const { tableData } = $table.getTableData()\n      const tableLength = tableData.length\n      if (tableLength === 0) {\n        const { row: newRow } = $table.insert()\n        console.log(newRow)\n      } else {\n        const errMap = await $table.validate().catch(errMap => errMap)\n        if (errMap) {\n          this.$message.error('校验不通过！')\n        } else {\n          const { row: newRow } = $table.insert()\n          console.log(newRow)\n        }\n      }\n    },\n    // 子表删除\n    onRemoveChild (row, index, refName) {\n      console.log(row, index)\n      if (row.id) {\n        api.DelObj(row.id).then(res => {\n          this.refreshView()\n        })\n      } else {\n        this.childTableData.splice(index, 1)\n        const tableName = 'xTable_' + refName\n        const tableData = this.$refs[tableName][0].remove(row)\n        console.log(tableData)\n      }\n    },\n    // 图片预览\n    handlePictureCardPreview (file) {\n      this.dialogImageUrl = file.url\n      this.dialogImgVisible = true\n    },\n    // 判断是否为图片\n    // 封装一个判断图片文件后缀名的方法\n    isImage (fileName) {\n      if (typeof fileName !== 'string') return\n      const name = fileName.toLowerCase()\n      return name.endsWith('.png') || name.endsWith('.jpeg') || name.endsWith('.jpg') || name.endsWith('.png') || name.endsWith('.bmp')\n    },\n    // 上传成功\n    handleUploadSuccess (response, file, fileList, imgKey) {\n      const that = this\n      const {\n        code,\n        msg\n      } = response\n      if (code === 2000) {\n        const { url } = response.data\n        const { name } = file\n        const type = that.isImage(name)\n        if (!type) {\n          this.$message.error('只允许上传图片')\n        } else {\n          const uploadImgKey = that.form[imgKey]\n          if (!uploadImgKey || uploadImgKey === '') {\n            that.form[imgKey] = []\n          }\n          // console.log(len)\n          const dict = {\n            name: name,\n            url: util.baseURL() + url\n          }\n          that.form[imgKey].push(dict)\n        }\n      } else {\n        this.$message.error('上传失败,' + JSON.stringify(msg))\n      }\n    },\n    // 上传失败\n    handleError () {\n      this.$message.error('上传失败')\n    },\n    // 上传超出限制\n    handleExceed () {\n      this.$message.error('超过文件上传数量')\n    },\n    // 删除时的钩子\n    beforeRemove (file, fileList, key) {\n      var index = 0\n      this.form[key].map((value, inx) => {\n        if (value.uid === file.uid) index = inx\n      })\n      this.form[key].splice(index, 1)\n    },\n    // 配置的行删除\n    onDelRow (obj) {\n      api.DelObj(obj.id).then(res => {\n        this.refreshView()\n      })\n    },\n    // 行编辑\n    onEdit (index) {\n      const that = this\n      that.$set(that.formList[index], 'new_key', that.formList[index].key)\n      that.$set(that.formList[index], 'edit', true)\n    },\n    // 行编辑保存\n    onEditSave (obj) {\n      obj.key = JSON.parse(JSON.stringify(obj.new_key))\n      api.UpdateObj(obj).then(res => {\n        this.refreshView()\n      })\n    }\n  },\n  mounted () {\n    // this.getInit()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}