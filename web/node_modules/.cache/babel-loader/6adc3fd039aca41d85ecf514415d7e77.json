{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/full-editor/lib/d2-wang-editor/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/d2p-extends/src/full-editor/lib/d2-wang-editor/index.vue","mtime":1674694550335},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBXYW5nRWRpdG9yIGZyb20gJ3dhbmdlZGl0b3InOwovLyBpbXBvcnQgeyBEMnBVcGxvYWRlciB9IGZyb20gJ2QycC1leHRlbmRzJwppbXBvcnQgbG9kYXNoIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB3YW5nQ29uZmlnIGZyb20gJy4vdXRpbHMvY29uZmlnJzsKaW1wb3J0IEQycFVwbG9hZGVyIGZyb20gJy4uLy4uLy4uL3VwbG9hZGVyJzsKaW1wb3J0IHsgZDJDcnVkUGx1cyB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2QyLWNydWQtcGx1cyc7CmltcG9ydCBsb2cgZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbC5sb2cnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2QycC13YW5nLWVkaXRvcicsCiAgbWl4aW5zOiBbZDJDcnVkUGx1cy5pbnB1dEJhc2VdLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBjb25maWc6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgLyoqCiAgICAgKiDlkIzkuIDkuKrpobXpnaLlpJrkuKplZGl05pe277yM6ZyA6KaB6YWN572u5LiN5ZCM55qEaW5kZXgKICAgICAqLwogICAgaW5kZXg6IHsKICAgICAgZGVmYXVsdDogJzEnCiAgICB9LAogICAgdXBsb2FkZXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0b3I6IG51bGwsCiAgICAgIGN1cnJlbnRWYWx1ZTogJycsCiAgICAgIG9wdGlvbnM6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlkOiBmdW5jdGlvbiBpZCgpIHsKICAgICAgcmV0dXJuICd3YW5nZWRpdG9yJyArIHRoaXMuaW5kZXg7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICAvLyDnoa7orqTmmK/mlrDnmoTlgLwKICAgICAgICBpZiAodmFsICE9PSB0aGlzLmN1cnJlbnRWYWx1ZSkgewogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWw7CiAgICAgICAgICAvLyDlsJ3or5Xmm7TmlrAKICAgICAgICAgIGlmICh0aGlzLmVkaXRvcikgewogICAgICAgICAgICBpZiAodGhpcy5kaXNwYXRjaCkgewogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goJ0VsRm9ybUl0ZW0nLCAnZWwuZm9ybS5ibHVyJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdmFsKTsKICAgICAgICAgICAgLy8gdGhpcy5lZGl0b3IudHh0Lmh0bWwodGhpcy52YWx1ZSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCgogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBlZGl0b3IgPSBuZXcgV2FuZ0VkaXRvcignIycgKyB0aGlzLmlkKTsKICAgICAgbG9kYXNoLm1lcmdlKHdhbmdDb25maWcsIHRoaXMuY29uZmlnKTsKICAgICAgbG9kYXNoLm1lcmdlKGVkaXRvci5jb25maWcsIHdhbmdDb25maWcpOwogICAgICBlZGl0b3IuY29uZmlnLm9uY2hhbmdlID0gZnVuY3Rpb24gKG5ld0h0bWwpIHsKICAgICAgICBfdGhpcy4kZW1pdCgnaW5wdXQnLCBuZXdIdG1sKTsKICAgICAgICBfdGhpcy5jdXJyZW50VmFsdWUgPSBuZXdIdG1sOwogICAgICB9OwogICAgICBpZiAoIWVkaXRvci5jb25maWcudXBsb2FkSW1nU2VydmVyKSB7CiAgICAgICAgZWRpdG9yLmNvbmZpZy5jdXN0b21VcGxvYWRJbWcgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzdWx0RmlsZXMsIGluc2VydEltZ0ZuKSB7CiAgICAgICAgICAgIHZhciBmaWxlLCBpdGVtLCBvblByb2dyZXNzLCBvbkVycm9yLCBvcHRpb24sIHJldDsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0RmlsZXMg5pivIGlucHV0IOS4remAieS4reeahOaWh+S7tuWIl+ihqAogICAgICAgICAgICAgICAgICAvLyBpbnNlcnRJbWdGbiDmmK/ojrflj5blm77niYcgdXJsIOWQju+8jOaPkuWFpeWIsOe8lui+keWZqOeahOaWueazlQogICAgICAgICAgICAgICAgICBmaWxlID0gcmVzdWx0RmlsZXNbMF07CiAgICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAndXBsb2FkaW5nJywKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogMAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBvblByb2dyZXNzID0gZnVuY3Rpb24gb25Qcm9ncmVzcyhlKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5wcm9ncmVzcyA9IGUucGVyY2VudDsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uc3RhdHVzID0gJ2Vycm9yJzsKICAgICAgICAgICAgICAgICAgICBpdGVtLm1lc3NhZ2UgPSAn5paH5Lu25LiK5Lyg5Ye66ZSZOicgKyBlLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKGUpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBvcHRpb24gPSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZTogZmlsZSwKICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLAogICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IG9uUHJvZ3Jlc3MsCiAgICAgICAgICAgICAgICAgICAgb25FcnJvcjogb25FcnJvcgogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRvVXBsb2FkKG9wdGlvbik7CiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgIHJldCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOWbvueJh++8jOi/lOWbnue7k+aenO+8jOWwhuWbvueJh+aPkuWFpeWIsOe8lui+keWZqOS4rQogICAgICAgICAgICAgICAgICBpbnNlcnRJbWdGbihyZXQudXJsKTsKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MikgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCk7CiAgICAgIH0KICAgICAgZWRpdG9yLmNyZWF0ZSgpOwogICAgICBlZGl0b3IudHh0Lmh0bWwodGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjsKICAgIH0sCiAgICBkb1VwbG9hZDogZnVuY3Rpb24gZG9VcGxvYWQob3B0aW9uKSB7CiAgICAgIG9wdGlvbi5jb25maWcgPSB0aGlzLnVwbG9hZGVyOwogICAgICByZXR1cm4gdGhpcy5nZXRVcGxvYWRlcigpLnRoZW4oZnVuY3Rpb24gKHVwbG9hZGVyKSB7CiAgICAgICAgcmV0dXJuIHVwbG9hZGVyLnVwbG9hZChvcHRpb24pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVcGxvYWRlcjogZnVuY3Rpb24gZ2V0VXBsb2FkZXIoKSB7CiAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlOwogICAgICBpZiAodGhpcy51cGxvYWRlciAhPSBudWxsICYmIHRoaXMudXBsb2FkZXIudHlwZSAhPSBudWxsKSB7CiAgICAgICAgdHlwZSA9IHRoaXMudXBsb2FkZXIudHlwZTsKICAgICAgfQogICAgICByZXR1cm4gRDJwVXBsb2FkZXIuZ2V0VXBsb2FkZXIodHlwZSk7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICByZXR1cm4gdGhpcy5nZXRVcGxvYWRlcigpLmJlZm9yZVVwbG9hZChmaWxlKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyDosIPnlKjplIDmr4EgQVBJIOWvueW9k+WJjee8lui+keWZqOWunuS+i+i/m+ihjOmUgOavgQogICAgdGhpcy5lZGl0b3IuZGVzdHJveSgpOwogICAgdGhpcy5lZGl0b3IgPSBudWxsOwogIH0KfTs="},{"version":3,"mappings":";;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACAC;MACAC;MACAC;MACAC;IACA;IACAC;MACAH;IACA;IACA;AACA;AACA;IACAI;MACAF;IACA;IACAG;MACAL;MACAE;QACA;MACA;IACA;EACA;EACAI;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAb;MACAc;QACA;QACA;UACA;UACA;UACA;YACA;cACA;YACA;YACA;YACA;UACA;QACA;MACA;;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC;MACAA;MACAX;QACA;QACA;MACA;MAEA;QACAA;UAAA;YAAA;YAAA;cAAA;gBAAA;kBACA;kBACA;kBACAY;kBAEAC;oBACAC;oBACAC;kBACA;kBAEAC;oBACAH;kBACA;kBACAI;oBACAJ;oBACAA;oBACAK;kBACA;kBACAC;oBACAP;oBACAQ;oBACAJ;oBACAC;kBACA;kBAAA;kBAAA,OAEA;gBAAA;kBAAAI;kBACA;kBACAC;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA;UAAA;YAAA;UAAA;QAAA;MACA;MAEAtB;MACAA;MACA;IACA;IACAuB;MACAJ;MACA;QACA;MACA;IACA;IACAK;MACA;MACA;QACA/B;MACA;MACA;IACA;IACAgC;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;AACA","names":["name","mixins","props","value","type","required","default","config","index","uploader","data","editor","currentValue","options","computed","id","watch","handler","immediate","mounted","methods","init","lodash","file","item","status","progress","onProgress","onError","log","option","fileName","ret","insertImgFn","doUpload","getUploader","beforeUpload","beforeDestroy"],"sourceRoot":"node_modules/d2p-extends/src/full-editor/lib/d2-wang-editor","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"d2p-wangeditor\">\n    <div :id=\"id\"></div>\n    <textarea name=\"\" class=\"wang-editor-preview\" readonly v-model=\"currentValue\"></textarea>\n  </div>\n</template>\n\n<script>\n\nimport WangEditor from 'wangeditor'\n// import { D2pUploader } from 'd2p-extends'\nimport lodash from 'lodash'\nimport wangConfig from './utils/config'\nimport D2pUploader from '../../../uploader'\nimport { d2CrudPlus } from '../../../utils/d2-crud-plus'\nimport log from '../../../utils/util.log'\nexport default {\n  name: 'd2p-wang-editor',\n  mixins: [d2CrudPlus.inputBase],\n  props: {\n    value: {\n      type: String,\n      required: false,\n      default: ''\n    },\n    config: {\n      type: Object\n    },\n    /**\n     * 同一个页面多个edit时，需要配置不同的index\n     */\n    index: {\n      default: '1'\n    },\n    uploader: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  data () {\n    return {\n      editor: null,\n      currentValue: '',\n      options: {}\n    }\n  },\n  computed: {\n    id () {\n      return 'wangeditor' + this.index\n    }\n  },\n  watch: {\n    value: {\n      handler (val) {\n        // 确认是新的值\n        if (val !== this.currentValue) {\n          this.currentValue = val\n          // 尝试更新\n          if (this.editor) {\n            if (this.dispatch) {\n              this.dispatch('ElFormItem', 'el.form.blur')\n            }\n            this.$emit('change', val)\n            // this.editor.txt.html(this.value)\n          }\n        }\n      },\n      immediate: true\n    }\n  },\n  mounted () {\n    this.init()\n  },\n  methods: {\n    init () {\n      const editor = new WangEditor('#' + this.id)\n      lodash.merge(wangConfig, this.config)\n      lodash.merge(editor.config, wangConfig)\n      editor.config.onchange = (newHtml) => {\n        this.$emit('input', newHtml)\n        this.currentValue = newHtml\n      }\n\n      if (!editor.config.uploadImgServer) {\n        editor.config.customUploadImg = async (resultFiles, insertImgFn) => {\n          // resultFiles 是 input 中选中的文件列表\n          // insertImgFn 是获取图片 url 后，插入到编辑器的方法\n          var file = resultFiles[0]\n\n          const item = {\n            status: 'uploading',\n            progress: 0\n          }\n\n          const onProgress = (e) => {\n            item.progress = e.percent\n          }\n          const onError = (e) => {\n            item.status = 'error'\n            item.message = '文件上传出错:' + e.message\n            log.debug(e)\n          }\n          const option = {\n            file: file,\n            fileName: file.name,\n            onProgress,\n            onError\n          }\n\n          const ret = await this.doUpload(option)\n          // 上传图片，返回结果，将图片插入到编辑器中\n          insertImgFn(ret.url)\n        }\n      }\n\n      editor.create()\n      editor.txt.html(this.currentValue)\n      this.editor = editor\n    },\n    doUpload (option) {\n      option.config = this.uploader\n      return this.getUploader().then(uploader => {\n        return uploader.upload(option)\n      })\n    },\n    getUploader () {\n      let type = this.type\n      if (this.uploader != null && this.uploader.type != null) {\n        type = this.uploader.type\n      }\n      return D2pUploader.getUploader(type)\n    },\n    beforeUpload (file) {\n      return this.getUploader().beforeUpload(file)\n    }\n  },\n  beforeDestroy () {\n    // 调用销毁 API 对当前编辑器实例进行销毁\n    this.editor.destroy()\n    this.editor = null\n  }\n}\n</script>\n<style lang=\"scss\">\n.d2p-wangeditor{\n  .wang-editor-preview{display: none;}\n\n  .w-e-menu .w-e-panel-container .w-e-panel-tab-content input[type=text] {\n    height: auto;\n    }\n\n}\n</style>\n"]}]}