{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js??ref--14-0!/Users/raviailani/Downloads/django-vue-admin/web/src/api/websocket.js","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/api/websocket.js","mtime":1674694301472},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js","mtime":1674694549000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgRWxlbWVudFVJIGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKZnVuY3Rpb24gaW5pdFdlYlNvY2tldChlKSB7CiAgdmFyIHRva2VuID0gdXRpbC5jb29raWVzLmdldCgndG9rZW4nKTsKICBpZiAodG9rZW4pIHsKICAgIHZhciB3c1VyaSA9IHV0aWwud3NCYXNlVVJMKCkgKyAnd3MvJyArIHRva2VuICsgJy8nOwogICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJpKTsgLy8g6L+Z6YeM6Z2i55qEdGhpc+mDveaMh+WQkXZ1ZQogICAgdGhpcy5zb2NrZXQub25lcnJvciA9IHdlYlNvY2tldE9uRXJyb3I7CiAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSB3ZWJTb2NrZXRPbk1lc3NhZ2U7CiAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gY2xvc2VXZWJzb2NrZXQ7CiAgfQp9CmZ1bmN0aW9uIHdlYlNvY2tldE9uRXJyb3IoZSkgewogIEVsZW1lbnRVSS5Ob3RpZmljYXRpb24oewogICAgdGl0bGU6ICcnLAogICAgbWVzc2FnZTogJ1dlYlNvY2tldOi/nuaOpeWPkeeUn+mUmeivrycgKyBKU09OLnN0cmluZ2lmeShlKSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcsCiAgICBkdXJhdGlvbjogMzAwMAogIH0pOwp9CgovKioKICog5o6l5pS25raI5oGvCiAqIEBwYXJhbSBlCiAqIEByZXR1cm5zIHthbnl9CiAqLwpmdW5jdGlvbiB3ZWJTb2NrZXRPbk1lc3NhZ2UoZSkgewogIHZhciBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGEpOwogIHZhciB1bnJlYWQgPSBkYXRhLnVucmVhZDsKICBzdG9yZS5kaXNwYXRjaCgnZDJhZG1pbi9tZXNzYWdlY2VudGVyL3NldFVucmVhZCcsIHVucmVhZCB8fCAwKTsKICBpZiAoZGF0YS5jb250ZW50VHlwZSA9PT0gJ1NZU1RFTScpIHsKICAgIEVsZW1lbnRVSS5Ob3RpZmljYXRpb24oewogICAgICB0aXRsZTogJ+ezu+e7n+a2iOaBrycsCiAgICAgIG1lc3NhZ2U6IGRhdGEuY29udGVudCwKICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcsCiAgICAgIGR1cmF0aW9uOiAzMDAwCiAgICB9KTsKICB9IGVsc2UgaWYgKGRhdGEuY29udGVudFR5cGUgPT09ICdFUlJPUicpIHsKICAgIEVsZW1lbnRVSS5Ob3RpZmljYXRpb24oewogICAgICB0aXRsZTogJycsCiAgICAgIG1lc3NhZ2U6IGRhdGEuY29udGVudCwKICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnLAogICAgICBkdXJhdGlvbjogMAogICAgfSk7CiAgfSBlbHNlIGlmIChkYXRhLmNvbnRlbnRUeXBlID09PSAnSU5GTycpIHsKICAgIEVsZW1lbnRVSS5Ob3RpZmljYXRpb24oewogICAgICB0aXRsZTogJ+a4qemmqOaPkOekuicsCiAgICAgIG1lc3NhZ2U6IGRhdGEuY29udGVudCwKICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcsCiAgICAgIGR1cmF0aW9uOiAwCiAgICB9KTsKICB9IGVsc2UgewogICAgRWxlbWVudFVJLk5vdGlmaWNhdGlvbih7CiAgICAgIHRpdGxlOiAn5rip6aao5o+Q56S6JywKICAgICAgbWVzc2FnZTogZGF0YS5jb250ZW50LAogICAgICB0eXBlOiAnaW5mbycsCiAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JywKICAgICAgZHVyYXRpb246IDMwMDAKICAgIH0pOwogIH0KfQovLyDlhbPpl613ZWJzaW9ja2V0CmZ1bmN0aW9uIGNsb3NlV2Vic29ja2V0KCkgewogIGNvbnNvbGUubG9nKCfov57mjqXlt7LlhbPpl60uLi4nKTsKICBFbGVtZW50VUkuTm90aWZpY2F0aW9uKHsKICAgIHRpdGxlOiAnd2Vic29ja2V0JywKICAgIG1lc3NhZ2U6ICfov57mjqXlt7LlhbPpl60uLi4nLAogICAgdHlwZTogJ2RhbmdlcicsCiAgICBwb3NpdGlvbjogJ2JvdHRvbS1yaWdodCcsCiAgICBkdXJhdGlvbjogMzAwMAogIH0pOwp9CgovKioKICog5Y+R6YCB5raI5oGvCiAqIEBwYXJhbSBtZXNzYWdlCiAqLwpmdW5jdGlvbiB3ZWJTb2NrZXRTZW5kKG1lc3NhZ2UpIHsKICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTsKfQpleHBvcnQgZGVmYXVsdCB7CiAgaW5pdFdlYlNvY2tldDogaW5pdFdlYlNvY2tldCwKICBjbG9zZVdlYnNvY2tldDogY2xvc2VXZWJzb2NrZXQsCiAgd2ViU29ja2V0U2VuZDogd2ViU29ja2V0U2VuZAp9Ow=="},{"version":3,"names":["ElementUI","util","store","initWebSocket","e","token","cookies","get","wsUri","wsBaseURL","socket","WebSocket","onerror","webSocketOnError","onmessage","webSocketOnMessage","onclose","closeWebsocket","Notification","title","message","JSON","stringify","type","position","duration","data","parse","unread","dispatch","contentType","content","console","log","webSocketSend","send"],"sources":["/Users/raviailani/Downloads/django-vue-admin/web/src/api/websocket.js"],"sourcesContent":["import ElementUI from 'element-ui'\nimport util from '@/libs/util'\nimport store from '@/store'\nfunction initWebSocket (e) {\n  const token = util.cookies.get('token')\n  if (token) {\n    const wsUri = util.wsBaseURL() + 'ws/' + token + '/'\n    this.socket = new WebSocket(wsUri)// 这里面的this都指向vue\n    this.socket.onerror = webSocketOnError\n    this.socket.onmessage = webSocketOnMessage\n    this.socket.onclose = closeWebsocket\n  }\n}\n\nfunction webSocketOnError (e) {\n  ElementUI.Notification({\n    title: '',\n    message: 'WebSocket连接发生错误' + JSON.stringify(e),\n    type: 'error',\n    position: 'bottom-right',\n    duration: 3000\n  })\n}\n\n/**\n * 接收消息\n * @param e\n * @returns {any}\n */\nfunction webSocketOnMessage (e) {\n  const data = JSON.parse(e.data)\n  const { unread } = data\n  store.dispatch('d2admin/messagecenter/setUnread', unread || 0)\n  if (data.contentType === 'SYSTEM') {\n    ElementUI.Notification({\n      title: '系统消息',\n      message: data.content,\n      type: 'success',\n      position: 'bottom-right',\n      duration: 3000\n    })\n  } else if (data.contentType === 'ERROR') {\n    ElementUI.Notification({\n      title: '',\n      message: data.content,\n      type: 'error',\n      position: 'bottom-right',\n      duration: 0\n    })\n  } else if (data.contentType === 'INFO') {\n    ElementUI.Notification({\n      title: '温馨提示',\n      message: data.content,\n      type: 'success',\n      position: 'bottom-right',\n      duration: 0\n    })\n  } else {\n    ElementUI.Notification({\n      title: '温馨提示',\n      message: data.content,\n      type: 'info',\n      position: 'bottom-right',\n      duration: 3000\n    })\n  }\n}\n// 关闭websiocket\nfunction closeWebsocket () {\n  console.log('连接已关闭...')\n  ElementUI.Notification({\n    title: 'websocket',\n    message: '连接已关闭...',\n    type: 'danger',\n    position: 'bottom-right',\n    duration: 3000\n  })\n}\n\n/**\n * 发送消息\n * @param message\n */\nfunction webSocketSend (message) {\n  this.socket.send(JSON.stringify(message))\n}\nexport default {\n  initWebSocket, closeWebsocket, webSocketSend\n}\n"],"mappings":"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"}]}