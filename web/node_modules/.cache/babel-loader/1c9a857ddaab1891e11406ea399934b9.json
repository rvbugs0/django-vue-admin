{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js??ref--14-0!/Users/raviailani/Downloads/django-vue-admin/web/src/api/service.js","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/api/service.js","mtime":1674694301472},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js","mtime":1674694549000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgQWRhcHRlciBmcm9tICdheGlvcy1tb2NrLWFkYXB0ZXInOwppbXBvcnQgeyBnZXQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7CmltcG9ydCB7IGRhdGFOb3RGb3VuZCwgZXJyb3JDcmVhdGUsIGVycm9yTG9nIH0gZnJvbSAnLi90b29scyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgcXMgZnJvbSAncXMnOwoKLyoqCiAqIEBkZXNjcmlwdGlvbiDliJvlu7ror7fmsYLlrp7kvosKICovCmF4aW9zLmRlZmF1bHRzLnJldHJ5ID0gMTsKYXhpb3MuZGVmYXVsdHMucmV0cnlEZWxheSA9IDEwMDA7CmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UobXNnKSB7CiAgaWYgKHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gbXNnOwogIH0KICBpZiAoX3R5cGVvZihtc2cpID09PSAnb2JqZWN0JykgewogICAgaWYgKG1zZy5jb2RlID09PSAndG9rZW5fbm90X3ZhbGlkJykgewogICAgICB1dGlsLmNvb2tpZXMucmVtb3ZlKCd0b2tlbicpOwogICAgICB1dGlsLmNvb2tpZXMucmVtb3ZlKCd1dWlkJyk7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICB9KTsKICAgICAgcm91dGVyLmdvKDApOwogICAgICByZXR1cm4gJ+eZu+W9lei2heaXtu+8jOivt+mHjeaWsOeZu+W9le+8gSc7CiAgICB9CiAgICBpZiAobXNnLmNvZGUgPT09ICd1c2VyX25vdF9mb3VuZCcpIHsKICAgICAgdXRpbC5jb29raWVzLnJlbW92ZSgndG9rZW4nKTsKICAgICAgdXRpbC5jb29raWVzLnJlbW92ZSgndXVpZCcpOwogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgfSk7CiAgICAgIHJvdXRlci5nbygwKTsKICAgICAgcmV0dXJuICfnlKjmiLfml6DmlYjvvIzor7fph43mlrDnmbvlvZXvvIEnOwogICAgfQogICAgcmV0dXJuIE9iamVjdC52YWx1ZXMobXNnKTsKICB9CiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtc2cpLnNsaWNlKDgsIC0xKSA9PT0gJ0FycmF5JykgewogICAgcmV0dXJuIG1zZzsKICB9CiAgcmV0dXJuIG1zZzsKfQpmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlKCkgewogIC8vIOWIm+W7uuS4gOS4qiBheGlvcyDlrp7kvosKICB2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgICBiYXNlVVJMOiB1dGlsLmJhc2VVUkwoKSwKICAgIHRpbWVvdXQ6IDIwMDAwLAogICAgcGFyYW1zU2VyaWFsaXplcjogZnVuY3Rpb24gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpIHsKICAgICAgcmV0dXJuIHFzLnN0cmluZ2lmeShwYXJhbXMsIHsKICAgICAgICBpbmRpY2VzOiBmYWxzZQogICAgICB9KTsKICAgIH0KICB9KTsKICAvLyDor7fmsYLmi6bmiKoKICBzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICByZXR1cm4gY29uZmlnOwogIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgLy8g5Y+R6YCB5aSx6LSlCiAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwogIC8vIOWTjeW6lOaLpuaIqgogIHNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIC8vIGRhdGFBeGlvcyDmmK8gYXhpb3Mg6L+U5Zue5pWw5o2u5Lit55qEIGRhdGEKICAgIHZhciBkYXRhQXhpb3MgPSByZXNwb25zZS5kYXRhOwogICAgaWYgKHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtZGlzcG9zaXRpb24nXSkgewogICAgICBkYXRhQXhpb3MgPSByZXNwb25zZTsKICAgIH0KICAgIC8vIOi/meS4queKtuaAgeeggeaYr+WSjOWQjuerr+e6puWumueahAogICAgdmFyIF9kYXRhQXhpb3MgPSBkYXRhQXhpb3MsCiAgICAgIGNvZGUgPSBfZGF0YUF4aW9zLmNvZGU7CiAgICAvLyDmoLnmja4gY29kZSDov5vooYzliKTmlq0KICAgIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHsKICAgICAgLy8g5aaC5p6c5rKh5pyJIGNvZGUg5Luj6KGo6L+Z5LiN5piv6aG555uu5ZCO56uv5byA5Y+R55qE5o6l5Y+jIOavlOWmguWPr+iDveaYryBEMkFkbWluIOivt+axguacgOaWsOeJiOacrAogICAgICByZXR1cm4gZGF0YUF4aW9zOwogICAgfSBlbHNlIHsKICAgICAgLy8g5pyJIGNvZGUg5Luj6KGo6L+Z5piv5LiA5Liq5ZCO56uv5o6l5Y+jIOWPr+S7pei/m+ihjOi/m+S4gOatpeeahOWIpOaWrQogICAgICBzd2l0Y2ggKGNvZGUpIHsKICAgICAgICBjYXNlIDIwMDA6CiAgICAgICAgICAvLyBbIOekuuS+iyBdIGNvZGUgPT09IDIwMDAg5Luj6KGo5rKh5pyJ6ZSZ6K+vCiAgICAgICAgICAvLyBUT0RPIOWPr+iDvee7k+aenOi/mOmcgOimgWNvZGXlkoxtc2fov5vooYzlkI7nu63lpITnkIbvvIzmiYDku6XljrvmjokuZGF0Yei/lOWbnuWFqOmDqOe7k+aenAogICAgICAgICAgLy8gcmV0dXJuIGRhdGFBeGlvcy5kYXRhCiAgICAgICAgICByZXR1cm4gZGF0YUF4aW9zOwogICAgICAgIGNhc2UgNDAxOgogICAgICAgICAgLy8gVE9ETyDnva7mjaJ0b2tlbiDmnKrlrozlloQKICAgICAgICAgIHV0aWwuY29va2llcy5yZW1vdmUoJ3Rva2VuJyk7CiAgICAgICAgICB1dGlsLmNvb2tpZXMucmVtb3ZlKCd1dWlkJyk7CiAgICAgICAgICB1dGlsLmNvb2tpZXMucmVtb3ZlKCdyZWZyZXNoJyk7CiAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgICAgICB9KTsKICAgICAgICAgIGVycm9yQ3JlYXRlKCIiLmNvbmNhdChnZXRFcnJvck1lc3NhZ2UoZGF0YUF4aW9zLm1zZykpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNDA0OgogICAgICAgICAgZGF0YU5vdEZvdW5kKCIiLmNvbmNhdChkYXRhQXhpb3MubXNnKSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDQwMDA6CiAgICAgICAgICAvLyDliKDpmaRjb29raWUKICAgICAgICAgIGVycm9yQ3JlYXRlKCIiLmNvbmNhdChnZXRFcnJvck1lc3NhZ2UoZGF0YUF4aW9zLm1zZykpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNDAwOgogICAgICAgICAgZXJyb3JDcmVhdGUoIiIuY29uY2F0KGRhdGFBeGlvcy5tc2cpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAvLyDkuI3mmK/mraPnoa7nmoQgY29kZQogICAgICAgICAgZXJyb3JDcmVhdGUoIiIuY29uY2F0KGRhdGFBeGlvcy5tc2csICI6ICIpLmNvbmNhdChyZXNwb25zZS5jb25maWcudXJsKSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgdmFyIHN0YXR1cyA9IGdldChlcnJvciwgJ3Jlc3BvbnNlLnN0YXR1cycpOwogICAgc3dpdGNoIChzdGF0dXMpIHsKICAgICAgY2FzZSA0MDA6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfor7fmsYLplJnor68nOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDQwMToKICAgICAgICByZWZyZXNoVGtlbigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdXRpbC5jb29raWVzLnNldCgndG9rZW4nLCByZXMuYWNjZXNzKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgICB9KTsKICAgICAgICAgIHJvdXRlci5nbygwKTsKICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyq6K6k6K+B77yM6K+355m75b2VJzsKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSA0MDM6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmi5Lnu53orr/pl64nOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDQwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gIlx1OEJGN1x1NkM0Mlx1NTczMFx1NTc0MFx1NTFGQVx1OTUxOTogIi5jb25jYXQoZXJyb3IucmVzcG9uc2UuY29uZmlnLnVybCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgNDA4OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+35rGC6LaF5pe2JzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSA1MDA6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnI3liqHlmajlhoXpg6jplJnor68nOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDUwMToKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+acjeWKoeacquWunueOsCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgNTAyOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn572R5YWz6ZSZ6K+vJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSA1MDM6CiAgICAgICAgZXJyb3IubWVzc2FnZSA9ICfmnI3liqHkuI3lj6/nlKgnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDUwNDoKICAgICAgICBlcnJvci5tZXNzYWdlID0gJ+e9keWFs+i2heaXtic7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgNTA1OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAnSFRUUOeJiOacrOS4jeWPl+aUr+aMgSc7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBlcnJvckxvZyhlcnJvcik7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0pOwogIHJldHVybiBzZXJ2aWNlOwp9CgovKioKICogQGRlc2NyaXB0aW9uIOWIm+W7uuivt+axguaWueazlQogKiBAcGFyYW0ge09iamVjdH0gc2VydmljZSBheGlvcyDlrp7kvosKICovCmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RGdW5jdGlvbihzZXJ2aWNlKSB7CiAgLy8g5qCh6aqM5piv5ZCm5Li656ef5oi35qih5byP44CC56ef5oi35qih5byP5oqK5Z+f5ZCN5pu/5o2i5oiQIOWfn+WQjSDliqDnq6/lj6MKICByZXR1cm4gZnVuY3Rpb24gKGNvbmZpZykgewogICAgdmFyIHRva2VuID0gdXRpbC5jb29raWVzLmdldCgndG9rZW4nKTsKICAgIC8vIOi/m+ihjOW4g+WwlOWAvOWFvOWuuQogICAgdmFyIHBhcmFtcyA9IGdldChjb25maWcsICdwYXJhbXMnLCB7fSk7CiAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3Qka2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcyk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykgewogICAgICB2YXIga2V5ID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgaWYgKFN0cmluZyhwYXJhbXNba2V5XSkgPT09ICd0cnVlJykgewogICAgICAgIHBhcmFtc1trZXldID0gMTsKICAgICAgfQogICAgICBpZiAoU3RyaW5nKHBhcmFtc1trZXldKSA9PT0gJ2ZhbHNlJykgewogICAgICAgIHBhcmFtc1trZXldID0gMDsKICAgICAgfQogICAgfQogICAgdmFyIGNvbmZpZ0RlZmF1bHQgPSB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAnSldUICcgKyB0b2tlbiwKICAgICAgICAnQ29udGVudC1UeXBlJzogZ2V0KGNvbmZpZywgJ2hlYWRlcnMuQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKQogICAgICB9LAogICAgICB0aW1lb3V0OiA2MDAwMCwKICAgICAgYmFzZVVSTDogdXRpbC5iYXNlVVJMKCksCiAgICAgIGRhdGE6IHt9LAogICAgICBwYXJhbXM6IHBhcmFtcwogICAgfTsKICAgIHJldHVybiBzZXJ2aWNlKE9iamVjdC5hc3NpZ24oY29uZmlnRGVmYXVsdCwgY29uZmlnKSk7CiAgfTsKfQoKLy8g55So5LqO55yf5a6e572R57uc6K+35rGC55qE5a6e5L6L5ZKM6K+35rGC5pa55rOVCmV4cG9ydCB2YXIgc2VydmljZSA9IGNyZWF0ZVNlcnZpY2UoKTsKZXhwb3J0IHZhciByZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdEZ1bmN0aW9uKHNlcnZpY2UpOwoKLy8g55So5LqO5qih5ouf572R57uc6K+35rGC55qE5a6e5L6L5ZKM6K+35rGC5pa55rOVCmV4cG9ydCB2YXIgc2VydmljZUZvck1vY2sgPSBjcmVhdGVTZXJ2aWNlKCk7CmV4cG9ydCB2YXIgcmVxdWVzdEZvck1vY2sgPSBjcmVhdGVSZXF1ZXN0RnVuY3Rpb24oc2VydmljZUZvck1vY2spOwoKLy8g572R57uc6K+35rGC5pWw5o2u5qih5ouf5bel5YW3CmV4cG9ydCB2YXIgbW9jayA9IG5ldyBBZGFwdGVyKHNlcnZpY2VGb3JNb2NrKTsKCi8vIOWIt+aWsHRva2VuCnZhciByZWZyZXNoVGtlbiA9IGZ1bmN0aW9uIHJlZnJlc2hUa2VuKCkgewogIHZhciByZWZyZXNoID0gdXRpbC5jb29raWVzLmdldCgncmVmcmVzaCcpOwogIHJldHVybiByZXF1ZXN0KHsKICAgIHVybDogJ3Rva2VuL3JlZnJlc2gvJywKICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgZGF0YTogewogICAgICByZWZyZXNoOiByZWZyZXNoCiAgICB9CiAgfSk7Cn07CgovKioKICog5LiL6L295paH5Lu2CiAqIEBwYXJhbSB1cmwKICogQHBhcmFtIHBhcmFtcwogKiBAcGFyYW0gbWV0aG9kCiAqIEBwYXJhbSBmaWxlbmFtZQogKi8KZXhwb3J0IHZhciBkb3dubG9hZEZpbGUgPSBmdW5jdGlvbiBkb3dubG9hZEZpbGUoX3JlZikgewogIHZhciB1cmwgPSBfcmVmLnVybCwKICAgIHBhcmFtcyA9IF9yZWYucGFyYW1zLAogICAgbWV0aG9kID0gX3JlZi5tZXRob2QsCiAgICBfcmVmJGZpbGVuYW1lID0gX3JlZi5maWxlbmFtZSwKICAgIGZpbGVuYW1lID0gX3JlZiRmaWxlbmFtZSA9PT0gdm9pZCAwID8gJ+aWh+S7tuWvvOWHuicgOiBfcmVmJGZpbGVuYW1lOwogIHJlcXVlc3QoewogICAgdXJsOiB1cmwsCiAgICBtZXRob2Q6IG1ldGhvZCwKICAgIHBhcmFtczogcGFyYW1zLAogICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgIC8vIGhlYWRlcnM6IHtBY2NlcHQ6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQnfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgdmFyIHhsc3hOYW1lID0gd2luZG93LmRlY29kZVVSSShyZXMuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddLnNwbGl0KCc9JylbMV0pOwogICAgdmFyIGZpbGVOYW1lID0geGxzeE5hbWUgfHwgIiIuY29uY2F0KGZpbGVuYW1lLCAiLnhsc3giKTsKICAgIGlmIChyZXMpIHsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICAgICAgdHlwZTogJ2NoYXJzZXQ9dXRmLTgnCiAgICAgIH0pOwogICAgICB2YXIgZWxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGVsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7CiAgICAgIGVsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsaW5rKTsKICAgICAgZWxpbmsuY2xpY2soKTsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChlbGluay5ocmVmKTsgLy8g6YeK5pS+VVJMIOWvueixoTAKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluayk7CiAgICB9CiAgfSk7Cn07"},{"version":3,"names":["axios","Adapter","get","util","dataNotFound","errorCreate","errorLog","router","qs","defaults","retry","retryDelay","getErrorMessage","msg","code","cookies","remove","push","path","go","Object","values","prototype","toString","call","slice","createService","service","create","baseURL","timeout","paramsSerializer","params","stringify","indices","interceptors","request","use","config","error","console","log","Promise","reject","response","dataAxios","data","headers","undefined","url","status","message","refreshTken","then","res","set","access","catch","e","name","createRequestFunction","token","keys","key","String","configDefault","Authorization","assign","serviceForMock","requestForMock","mock","refresh","method","downloadFile","filename","responseType","xlsxName","window","decodeURI","split","fileName","blob","Blob","type","elink","document","createElement","download","style","display","href","URL","createObjectURL","body","appendChild","click","revokeObjectURL","removeChild"],"sources":["/Users/raviailani/Downloads/django-vue-admin/web/src/api/service.js"],"sourcesContent":["import axios from 'axios'\nimport Adapter from 'axios-mock-adapter'\nimport { get } from 'lodash'\nimport util from '@/libs/util'\nimport { dataNotFound, errorCreate, errorLog } from './tools'\nimport router from '@/router'\nimport qs from 'qs'\n\n/**\n * @description 创建请求实例\n */\naxios.defaults.retry = 1\naxios.defaults.retryDelay = 1000\n\nexport function getErrorMessage (msg) {\n  if (typeof msg === 'string') {\n    return msg\n  }\n  if (typeof msg === 'object') {\n    if (msg.code === 'token_not_valid') {\n      util.cookies.remove('token')\n      util.cookies.remove('uuid')\n      router.push({ path: '/login' })\n      router.go(0)\n      return '登录超时，请重新登录！'\n    }\n    if (msg.code === 'user_not_found') {\n      util.cookies.remove('token')\n      util.cookies.remove('uuid')\n      router.push({ path: '/login' })\n      router.go(0)\n      return '用户无效，请重新登录！'\n    }\n    return Object.values(msg)\n  }\n  if (Object.prototype.toString.call(msg).slice(8, -1) === 'Array') {\n    return msg\n  }\n  return msg\n}\n\nfunction createService () {\n  // 创建一个 axios 实例\n  const service = axios.create({\n    baseURL: util.baseURL(),\n    timeout: 20000,\n    paramsSerializer: (params) => qs.stringify(params, { indices: false })\n  })\n  // 请求拦截\n  service.interceptors.request.use(\n    config => config,\n    error => {\n      // 发送失败\n      console.log(error)\n      return Promise.reject(error)\n    }\n  )\n  // 响应拦截\n  service.interceptors.response.use(\n    response => {\n      // dataAxios 是 axios 返回数据中的 data\n      let dataAxios = response.data\n      if (response.headers['content-disposition']) {\n        dataAxios = response\n      }\n      // 这个状态码是和后端约定的\n      const { code } = dataAxios\n      // 根据 code 进行判断\n      if (code === undefined) {\n        // 如果没有 code 代表这不是项目后端开发的接口 比如可能是 D2Admin 请求最新版本\n        return dataAxios\n      } else {\n        // 有 code 代表这是一个后端接口 可以进行进一步的判断\n        switch (code) {\n          case 2000:\n            // [ 示例 ] code === 2000 代表没有错误\n            // TODO 可能结果还需要code和msg进行后续处理，所以去掉.data返回全部结果\n            // return dataAxios.data\n            return dataAxios\n          case 401:\n            // TODO 置换token 未完善\n            util.cookies.remove('token')\n            util.cookies.remove('uuid')\n            util.cookies.remove('refresh')\n            router.push({ path: '/login' })\n            errorCreate(`${getErrorMessage(dataAxios.msg)}`)\n            break\n          case 404:\n            dataNotFound(`${dataAxios.msg}`)\n            break\n          case 4000:\n            // 删除cookie\n            errorCreate(`${getErrorMessage(dataAxios.msg)}`)\n            break\n          case 400:\n            errorCreate(`${dataAxios.msg}`)\n            break\n          default:\n            // 不是正确的 code\n            errorCreate(`${dataAxios.msg}: ${response.config.url}`)\n            break\n        }\n      }\n    },\n    error => {\n      const status = get(error, 'response.status')\n      switch (status) {\n        case 400:\n          error.message = '请求错误'\n          break\n        case 401:\n          refreshTken().then(res => {\n            util.cookies.set('token', res.access)\n          }).catch(e => {\n            router.push({ name: 'login' })\n            router.go(0)\n            error.message = '未认证，请登录'\n          })\n          break\n        case 403:\n          error.message = '拒绝访问'\n          break\n        case 404:\n          error.message = `请求地址出错: ${error.response.config.url}`\n          break\n        case 408:\n          error.message = '请求超时'\n          break\n        case 500:\n          error.message = '服务器内部错误'\n          break\n        case 501:\n          error.message = '服务未实现'\n          break\n        case 502:\n          error.message = '网关错误'\n          break\n        case 503:\n          error.message = '服务不可用'\n          break\n        case 504:\n          error.message = '网关超时'\n          break\n        case 505:\n          error.message = 'HTTP版本不受支持'\n          break\n        default:\n          break\n      }\n      errorLog(error)\n      return Promise.reject(error)\n    }\n  )\n  return service\n}\n\n/**\n * @description 创建请求方法\n * @param {Object} service axios 实例\n */\nfunction createRequestFunction (service) {\n  // 校验是否为租户模式。租户模式把域名替换成 域名 加端口\n  return function (config) {\n    const token = util.cookies.get('token')\n    // 进行布尔值兼容\n    var params = get(config, 'params', {})\n    for (const key of Object.keys(params)) {\n      if (String(params[key]) === 'true') {\n        params[key] = 1\n      }\n      if (String(params[key]) === 'false') {\n        params[key] = 0\n      }\n    }\n    const configDefault = {\n      headers: {\n        Authorization: 'JWT ' + token,\n        'Content-Type': get(config, 'headers.Content-Type', 'application/json')\n      },\n      timeout: 60000,\n      baseURL: util.baseURL(),\n      data: {},\n      params: params\n    }\n    return service(Object.assign(configDefault, config))\n  }\n}\n\n// 用于真实网络请求的实例和请求方法\nexport const service = createService()\nexport const request = createRequestFunction(service)\n\n// 用于模拟网络请求的实例和请求方法\nexport const serviceForMock = createService()\nexport const requestForMock = createRequestFunction(serviceForMock)\n\n// 网络请求数据模拟工具\nexport const mock = new Adapter(serviceForMock)\n\n// 刷新token\nconst refreshTken = function () {\n  const refresh = util.cookies.get('refresh')\n  return request({\n    url: 'token/refresh/',\n    method: 'post',\n    data: {\n      refresh: refresh\n    }\n  })\n}\n\n/**\n * 下载文件\n * @param url\n * @param params\n * @param method\n * @param filename\n */\nexport const downloadFile = function ({ url, params, method, filename = '文件导出' }) {\n  request({\n    url: url,\n    method: method,\n    params: params,\n    responseType: 'blob'\n    // headers: {Accept: 'application/vnd.openxmlformats-officedocument'}\n  }).then(res => {\n    const xlsxName = window.decodeURI(res.headers['content-disposition'].split('=')[1])\n    const fileName = xlsxName || `${filename}.xlsx`\n    if (res) {\n      const blob = new Blob([res.data], { type: 'charset=utf-8' })\n      const elink = document.createElement('a')\n      elink.download = fileName\n      elink.style.display = 'none'\n      elink.href = URL.createObjectURL(blob)\n      document.body.appendChild(elink)\n      elink.click()\n      URL.revokeObjectURL(elink.href) // 释放URL 对象0\n      document.body.removeChild(elink)\n    }\n  })\n}\n"],"mappings":"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"}]}