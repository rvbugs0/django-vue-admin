{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/src/components/tree-selector/lib/tree-selector.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/components/tree-selector/lib/tree-selector.vue","mtime":1674694301482},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy9yYXZpYWlsYW5pL0Rvd25sb2Fkcy9kamFuZ28tdnVlLWFkbWluL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgbG9kYXNoIGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGQyQ3J1ZFBsdXMgfSBmcm9tICdkMi1jcnVkLXBsdXMnOwppbXBvcnQgbG9nIGZyb20gJ2QycC1leHRlbmRzL3NyYy91dGlscy91dGlsLmxvZyc7Ci8vIOagkeW9oumAieaLqee7hOS7tu+8jOmcgOimgWltcG9ydCB7RDJwVHJlZVNlbGVjdG9yfSBmcm9tICdkMnAtZXh0ZW5kcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkMnAtdHJlZS1zZWxlY3RvcicsCiAgbWl4aW5zOiBbZDJDcnVkUGx1cy5pbnB1dCwgZDJDcnVkUGx1cy5pbnB1dERpY3RdLAogIHByb3BzOiB7CiAgICAvLyDlgLwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZywgQm9vbGVhbiwgQXJyYXksIE9iamVjdF0KICAgIH0sCiAgICAvLyDov4fmu6TvvIx2YWx1ZeS4reeahG5vZGVz6L+H5ruk5pa55rOVIOWPguaVsOS4um5vZGVzCiAgICBmaWx0ZXI6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIHJlcXVpcmU6IGZhbHNlCiAgICB9LAogICAgLy8g5Y2g5L2N56ymCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJ+ivt+mAieaLqScKICAgIH0sCiAgICAvLyDov4fmu6TnmoRwbGFjZWhvbGRlcgogICAgZmlsdGVyUGxhY2Vob2xkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAn6L6T5YWl5YWz6ZSu5a2X6L+b6KGM6L+H5rukJwogICAgfSwKICAgIGRpYWxvZ1RpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ+mAieaLqScKICAgIH0sCiAgICBjYW5jZWxUZXh0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ+WPlua2iCcKICAgIH0sCiAgICBjb25maXJtVGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICfnoa7lrponCiAgICB9LAogICAgLy8g5qCR5b2i57uE5Lu26IqC54K56L+H5ruk77yM5Y+v5Lul6YWN572uZWxQcm9wcy5maWx0ZXJOb2RlTWV0aG9kIO+8jOimhueblum7mOiupOeahOi/h+a7pOaWueazlQogICAgdHJlZUZpbHRlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlOiBmYWxzZSwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8vIOaYr+WQpuWkmumAie+8jOS8oOWFpWZhbHNl5Li65Y2V6YCJCiAgICBtdWx0aXBsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5piv5ZCm5b+955Wl6YCJ5Lit6IqC54K555qE5a2Q6IqC54K5CiAgICBpZ25vcmVGdWxsQ2hlY2tlZENoaWxkcmVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICAvLyDmmK/lkKblj6rov5Tlm57lj7blrZDoioLngrkKICAgIGxlYWZPbmx5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5piv5ZCm5YyF5ZCr5Y2K6YCJ6IqC54K5CiAgICBpbmNsdWRlSGFsZkNoZWNrZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyBlbC10cmVl55qE5bGe5oCn6YWN572uCiAgICBlbFByb3BzOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIC8qKgogICAgICog5piv5ZCm5Y+v5Lul5riF6ZmkCiAgICAgKi8KICAgIGNsZWFyYWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5pWw5o2u5a2X5YW46YWN572uCiAgICBkaWN0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZTogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50VmFsdWU6IHVuZGVmaW5lZCwKICAgICAgY29sbGFwc2VUYWdzOiBmYWxzZSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZmlsdGVyVGV4dDogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIGlmICh0aGlzLmRpY3QpIHsKICAgIC8vICAgdGhpcy5kaWN0ID0gZDJDcnVkUGx1cy51dGlsLmRpY3QubWVyZ2VEZWZhdWx0KHRoaXMuZGljdCwgdHJ1ZSkKICAgIC8vIH0KICAgIC8vIHRoaXMuaW5pdERhdGEoKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIF9lbFByb3BzOiBmdW5jdGlvbiBfZWxQcm9wcygpIHsKICAgICAgdmFyIGRlZmF1bHRFbFByb3BzID0gewogICAgICAgIHNob3dDaGVja2JveDogdGhpcy5tdWx0aXBsZSwKICAgICAgICBoaWdobGlnaHRDdXJyZW50OiAhdGhpcy5tdWx0aXBsZSwKICAgICAgICBwcm9wczoge30KICAgICAgfTsKICAgICAgaWYgKHRoaXMuZGljdCAhPSBudWxsKSB7CiAgICAgICAgaWYgKHRoaXMuZGljdC5sYWJlbCAhPSBudWxsKSB7CiAgICAgICAgICBkZWZhdWx0RWxQcm9wcy5wcm9wcy5sYWJlbCA9IHRoaXMuZGljdC5sYWJlbDsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZGljdC52YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgICBkZWZhdWx0RWxQcm9wcy5wcm9wcy52YWx1ZSA9IHRoaXMuZGljdC52YWx1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZGljdC5jaGlsZHJlbiAhPSBudWxsKSB7CiAgICAgICAgICBkZWZhdWx0RWxQcm9wcy5wcm9wcy5jaGlsZHJlbiA9IHRoaXMuZGljdC5jaGlsZHJlbjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZGVmYXVsdEVsUHJvcHMubm9kZUtleSA9IGRlZmF1bHRFbFByb3BzLnByb3BzLnZhbHVlOwogICAgICBsb2Rhc2gubWVyZ2UoZGVmYXVsdEVsUHJvcHMsIHRoaXMuZWxQcm9wcyk7CiAgICAgIHJldHVybiBkZWZhdWx0RWxQcm9wczsKICAgIH0sCiAgICBjb2xsYXBzZVRhZ1NpemU6IGZ1bmN0aW9uIGNvbGxhcHNlVGFnU2l6ZSgpIHsKICAgICAgcmV0dXJuIFsnc21hbGwnLCAnbWluaSddLmluZGV4T2YodGhpcy5zZWxlY3RTaXplKSA+IC0xID8gJ21pbmknIDogJ3NtYWxsJzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmaWx0ZXJUZXh0OiBmdW5jdGlvbiBmaWx0ZXJUZXh0KHZhbCkgewogICAgICB0aGlzLiRyZWZzLmVsVHJlZS5maWx0ZXIodmFsKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGluaXREYXRhICgpIHsKICAgIC8vICAgZDJDcnVkUGx1cy51dGlsLmRpY3QuZ2V0KHRoaXMuZGljdCkudGhlbihyZXQgPT4gewogICAgLy8gICAgIHRoaXMuJHNldCh0aGlzLCAnZGF0YScsIHJldCkKICAgIC8vICAgICB0aGlzLnNldFZhbHVlKHRoaXMudmFsdWUpCiAgICAvLyAgIH0pCiAgICAvLyB9LAogICAgb25EaWN0TG9hZGVkOiBmdW5jdGlvbiBvbkRpY3RMb2FkZWQoKSB7CiAgICAgIGxvZy5kZWJ1Zygnb25EaWN0TG9hZGVkJywgdGhpcy5kaWN0LCB0aGlzLnZhbHVlKTsKICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnZhbHVlKTsKICAgIH0sCiAgICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgbG9nLmRlYnVnKCdzZXRWYWx1ZTonLCB0aGlzLmN1cnJlbnRWYWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5fb3B0aW9ucyk7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRWYWx1ZSA9PT0gdGhpcy52YWx1ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYXJyVmFsdWUgPSB2YWx1ZTsKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gW107CiAgICAgIH0KICAgICAgaWYgKCEoYXJyVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICBhcnJWYWx1ZSA9IFthcnJWYWx1ZV07CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGljdCAmJiB0aGlzLmRpY3QuZ2V0Tm9kZXMpIHsKICAgICAgICBsb2cuZGVidWcoJ2dldE5vZGVzOicsIGFyclZhbHVlKTsKICAgICAgICB0aGlzLmRpY3QuZ2V0Tm9kZXMoYXJyVmFsdWUpLnRoZW4oZnVuY3Rpb24gKG5vZGVzKSB7CiAgICAgICAgICBfdGhpcy5zZWxlY3RlZE5vZGVzKG5vZGVzLCB2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG5vZGVzID0gW107CiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMgPT0gbnVsbCB8fCB0aGlzLl9vcHRpb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXJyVmFsdWUpLAogICAgICAgICAgX3N0ZXA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5fb3B0aW9uczsKICAgICAgICAgICAgdmFyIG5vZGUgPSBkMkNydWRQbHVzLnV0aWwuZGljdC5nZXRCeVZhbHVlKGl0ZW0sIGRhdGEsIHRoaXMuZGljdCk7CiAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwpIHsKICAgICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMobm9kZXMsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdGVkTm9kZXM6IGZ1bmN0aW9uIHNlbGVjdGVkTm9kZXMobm9kZXMsIHZhbHVlKSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IFtdOwogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwKICAgICAgICBfc3RlcDI7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgbm9kZS5pZCA9IG5vZGVbdGhpcy5kaWN0LnZhbHVlXTsKICAgICAgICAgIHNlbGVjdGVkLnB1c2gobm9kZSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgICBsb2cuZGVidWcoJ3NlbGVjdGVkOicsIHNlbGVjdGVkKTsKICAgICAgdGhpcy4kc2V0KHRoaXMsICdzZWxlY3RlZCcsIHNlbGVjdGVkKTsKICAgICAgdGhpcy5yZXNldElucHV0SGVpZ2h0KCk7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoZWNrQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoZWNrLWNoYW5nZScsIGV2ZW50KTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKGV2ZW50KSB7CiAgICAgIHRoaXMuJGVtaXQoJ2N1cnJlbnQtY2hhbmdlJywgZXZlbnQpOwogICAgfSwKICAgIG9wZW5EaWFsb2c6IGZ1bmN0aW9uIG9wZW5EaWFsb2coKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMyLnNlbGVjdGVkICE9IG51bGwpIHsKICAgICAgICAgIHZhciBpZHMgPSBfdGhpczIuc2VsZWN0ZWQubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVtW190aGlzMi5fZWxQcm9wcy5wcm9wcy52YWx1ZV07CiAgICAgICAgICB9KTsKICAgICAgICAgIGlkcy5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICB2YXIgY3VycmVudCA9IF90aGlzMi4kcmVmcy5lbFRyZWUuc3RvcmUubm9kZXNNYXBbaWRdOwogICAgICAgICAgICBpZiAoY3VycmVudCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmRvRXhwYW5kUGFyZW50KGN1cnJlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMi4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMyLm11bHRpcGxlKSB7CiAgICAgICAgICAgICAgX3RoaXMyLiRyZWZzLmVsVHJlZS5zZXRDaGVja2VkS2V5cyhpZHMsIF90aGlzMi5sZWFmT25seSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBfdGhpczIuJHJlZnMuZWxUcmVlLnNldEN1cnJlbnRLZXkoaWRzWzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCAxKTsKICAgIH0sCiAgICBkb0V4cGFuZFBhcmVudDogZnVuY3Rpb24gZG9FeHBhbmRQYXJlbnQobm9kZSkgewogICAgICBpZiAobm9kZS5wYXJlbnQgIT0gbnVsbCkgewogICAgICAgIHRoaXMuZG9FeHBhbmRQYXJlbnQobm9kZS5wYXJlbnQpOwogICAgICB9CiAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlOwogICAgfSwKICAgIGdldFZhbHVlS2V5OiBmdW5jdGlvbiBnZXRWYWx1ZUtleShpdGVtKSB7CiAgICAgIGlmICh0aGlzLl9lbFByb3BzLnByb3BzLnZhbHVlICE9IG51bGwpIHsKICAgICAgICByZXR1cm4gaXRlbVt0aGlzLl9lbFByb3BzLnByb3BzLnZhbHVlXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTsKICAgICAgfQogICAgfSwKICAgIGdldFZhbHVlTGFiZWw6IGZ1bmN0aW9uIGdldFZhbHVlTGFiZWwoaXRlbSkgewogICAgICBpZiAodGhpcy5fZWxQcm9wcy5wcm9wcy5sYWJlbCAhPSBudWxsKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1bdGhpcy5fZWxQcm9wcy5wcm9wcy5sYWJlbF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWw7CiAgICAgIH0KICAgIH0sCiAgICBnZXRWYWx1ZUNoaWxkcmVuOiBmdW5jdGlvbiBnZXRWYWx1ZUNoaWxkcmVuKGl0ZW0pIHsKICAgICAgdmFyIGNoaWxkcmVuID0gJ2NoaWxkcmVuJzsKICAgICAgaWYgKHRoaXMuX2VsUHJvcHMucHJvcHMuY2hpbGRyZW4gIT0gbnVsbCkgewogICAgICAgIGNoaWxkcmVuID0gdGhpcy5fZWxQcm9wcy5wcm9wcy5jaGlsZHJlbjsKICAgICAgfQogICAgICByZXR1cm4gaXRlbVtjaGlsZHJlbl07CiAgICB9LAogICAgc2VsZWN0U3VibWl0OiBmdW5jdGlvbiBzZWxlY3RTdWJtaXQoKSB7CiAgICAgIHZhciBub2RlcyA9IHRoaXMucmVmcmVzaFNlbGVjdGVkKCk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmRvVmFsdWVJbnB1dENoYW5nZWQobm9kZXMpOwogICAgfSwKICAgIGRvVmFsdWVJbnB1dENoYW5nZWQ6IGZ1bmN0aW9uIGRvVmFsdWVJbnB1dENoYW5nZWQobm9kZXMpIHsKICAgICAgdmFyIHZhbHVlcyA9IHRoaXMuZm9ybWF0VmFsdWUobm9kZXMpOwogICAgICB0aGlzLnJlc2V0SW5wdXRIZWlnaHQoKTsKICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdmFsdWVzID0gdmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPiAwID8gdmFsdWVzWzBdIDogdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdmFsdWVzOwogICAgICBpZiAodGhpcy5kaXNwYXRjaCkgewogICAgICAgIHRoaXMuZGlzcGF0Y2goJ0VsRm9ybUl0ZW0nLCAnZWwuZm9ybS5ibHVyJyk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWx1ZXMpOwogICAgfSwKICAgIGl0ZW1DbG9zZWQ6IGZ1bmN0aW9uIGl0ZW1DbG9zZWQoaXRlbSkgewogICAgICB2YXIgbmV3Tm9kZXMgPSBsb2Rhc2gud2l0aG91dCh0aGlzLnNlbGVjdGVkLCBpdGVtKTsKICAgICAgY29uc29sZS5sb2coJ25ldyB2YWx1ZScsIGl0ZW0sIG5ld05vZGVzKTsKICAgICAgdGhpcy4kc2V0KHRoaXMsICdzZWxlY3RlZCcsIG5ld05vZGVzKTsKICAgICAgdGhpcy5kb1ZhbHVlSW5wdXRDaGFuZ2VkKG5ld05vZGVzKTsKICAgIH0sCiAgICByZWZyZXNoU2VsZWN0ZWQ6IGZ1bmN0aW9uIHJlZnJlc2hTZWxlY3RlZCgpIHsKICAgICAgdmFyIG5vZGVzID0gbnVsbDsKICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHsKICAgICAgICBub2RlcyA9IHRoaXMuJHJlZnMuZWxUcmVlLmdldENoZWNrZWROb2Rlcyh0aGlzLmxlYWZPbmx5LCB0aGlzLmluY2x1ZGVIYWxmQ2hlY2tlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLiRyZWZzLmVsVHJlZS5nZXRDdXJyZW50Tm9kZSgpOwogICAgICAgIGlmIChub2RlID09IG51bGwpIHsKICAgICAgICAgIG5vZGVzID0gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5vZGVzID0gW25vZGVdOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5pZ25vcmVGdWxsQ2hlY2tlZENoaWxkcmVuKSB7CiAgICAgICAgbm9kZXMgPSB0aGlzLmZpbHRlckZ1bGxDaGVja2VkQ2hpbGRyZW4obm9kZXMpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlciAhPSBudWxsKSB7CiAgICAgICAgbm9kZXMgPSB0aGlzLmZpbHRlcihub2Rlcyk7CiAgICAgIH0KICAgICAgbG9nLmRlYnVnKCdzZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWQpOwogICAgICB0aGlzLiRzZXQodGhpcywgJ3NlbGVjdGVkJywgbm9kZXMpOwogICAgICByZXR1cm4gbm9kZXM7CiAgICB9LAogICAgcmVzZXRJbnB1dEhlaWdodDogZnVuY3Rpb24gcmVzZXRJbnB1dEhlaWdodCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICh0aGlzLmNvbGxhcHNlVGFncyAmJiAhdGhpcy5maWx0ZXJhYmxlKSByZXR1cm47CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIV90aGlzMy4kcmVmcy5yZWZlcmVuY2UpIHJldHVybjsKICAgICAgICB2YXIgaW5wdXRDaGlsZE5vZGVzID0gX3RoaXMzLiRyZWZzLnJlZmVyZW5jZS4kZWwuY2hpbGROb2RlczsKICAgICAgICB2YXIgaW5wdXQgPSBbXS5maWx0ZXIuY2FsbChpbnB1dENoaWxkTm9kZXMsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS50YWdOYW1lID09PSAnSU5QVVQnOwogICAgICAgIH0pWzBdOwogICAgICAgIHZhciB0YWdzID0gX3RoaXMzLiRyZWZzLnRhZ3M7CiAgICAgICAgdmFyIHNpemVJbk1hcCA9IF90aGlzMy5pbml0aWFsSW5wdXRIZWlnaHQgfHwgNDA7CiAgICAgICAgdmFyIGhlaWdodCA9IF90aGlzMy5zZWxlY3RlZC5sZW5ndGggPT09IDAgPyBzaXplSW5NYXAgKyAncHgnIDogTWF0aC5tYXgodGFncyA/IHRhZ3MuY2xpZW50SGVpZ2h0ICsgKHRhZ3MuY2xpZW50SGVpZ2h0ID4gc2l6ZUluTWFwID8gNiA6IDApIDogMCwgc2l6ZUluTWFwKSArICdweCc7CiAgICAgICAgaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgIGlmIChfdGhpczMudmlzaWJsZSAmJiBfdGhpczMuZW1wdHlUZXh0ICE9PSBmYWxzZSkgewogICAgICAgICAgX3RoaXMzLmJyb2FkY2FzdCgnRWxTZWxlY3REcm9wZG93bicsICd1cGRhdGVQb3BwZXInKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZpbHRlckZ1bGxDaGVja2VkQ2hpbGRyZW46IGZ1bmN0aW9uIGZpbHRlckZ1bGxDaGVja2VkQ2hpbGRyZW4obm9kZXMpIHsKICAgICAgdmFyIGlnbm9yZWQgPSBuZXcgU2V0KCk7CiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICAgIF9zdGVwMzsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmdldFZhbHVlQ2hpbGRyZW4oaXRlbSk7CiAgICAgICAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCkgewogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNoaWxkcmVuKSwKICAgICAgICAgICAgICBfc3RlcDU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IF9zdGVwNS52YWx1ZTsKICAgICAgICAgICAgICAgIGlnbm9yZWQuYWRkKHRoaXMuZ2V0VmFsdWVLZXkoY2hpbGQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjUuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IzLmYoKTsKICAgICAgfQogICAgICB2YXIgdmFsdWVzID0gW107CiAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLAogICAgICAgIF9zdGVwNDsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgdmFyIF9pdGVtID0gX3N0ZXA0LnZhbHVlOwogICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0VmFsdWVLZXkoX2l0ZW0pOwogICAgICAgICAgaWYgKCFpZ25vcmVkLmhhcyhrZXkpKSB7CiAgICAgICAgICAgIHZhbHVlcy5wdXNoKF9pdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZXM7CiAgICB9LAogICAgZm9ybWF0VmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFZhbHVlKG5vZGVzKSB7CiAgICAgIHZhciB2YWx1ZXMgPSBbXTsKICAgICAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksCiAgICAgICAgX3N0ZXA2OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwNi52YWx1ZTsKICAgICAgICAgIHZhbHVlcy5wdXNoKHRoaXMuZ2V0VmFsdWVLZXkoaXRlbSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNi5mKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlczsKICAgIH0sCiAgICBmaWx0ZXJOb2RlOiBmdW5jdGlvbiBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZUxhYmVsKGRhdGEpLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0sCiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UodmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdmFsdWUpOwogICAgICBpZiAodGhpcy5kaXNwYXRjaCkgewogICAgICAgIHRoaXMuZGlzcGF0Y2goJ0VsRm9ybUl0ZW0nLCAnZWwuZm9ybS5ibHVyJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACA;IACAC;MACAC;IACA;IACA;IACAC;MACAD;MACAE;IACA;IACA;IACAC;MACAH;MACAI;MACAC;IACA;IACA;IACAC;MACAN;MACAK;IACA;IACAE;MACAP;MACAK;IACA;IACAG;MACAR;MACAK;IACA;IACAI;MACAT;MACAK;IACA;IACA;IACAK;MACAV;MACAE;MACAG;IACA;IACA;IACAM;MACAX;MACAK;IACA;IACA;IACAO;MAAAZ;MAAAK;IAAA;IACA;IACAQ;MAAAb;MAAAK;IAAA;IACA;IACAS;MAAAd;MAAAK;IAAA;IACA;IACAU;MACAf;IACA;IACA;AACA;AACA;IACAgB;MACAhB;MACAK;IACA;IACA;IACAY;MACAjB;MACAE;IACA;EACA;EACAgB;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;EAAA,CACA;EACAC;IACAC;MACA;QACAC;QACAC;QACA9B;MACA;MACA;QACA;UAAA+B;QAAA;QACA;UAAAA;QAAA;QACA;UAAAA;QAAA;MACA;MACAA;MACAC;MACA;IACA;IACAC;MACA,yDACA,SACA;IACA;EACA;EACAC;IACAT;MACA;IACA;EACA;EACAU;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACAC;MACA;IACA;IACAC;MAAA;MACAD;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MAEA;QACAE;MACA;MACA;QACAF;QACA;UACA;QACA;MACA;QACA;QACA;UACA;QACA;QAAA,2CACAE;UAAA;QAAA;UAAA;YAAA;YACA;YACA;YACA;cACAC;YACA;UACA;QAAA;UAAA;QAAA;UAAA;QAAA;QACA;MACA;IACA;IACAC;MACA;MAAA,4CACAD;QAAA;MAAA;QAAA;UAAA;UACAE;UACAnB;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACAc;MACA;MACA;IACA;IACAM;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;MACA;MACAC;QACA;UACA;YAAA;UAAA;UACAC;YACA;YACA;cACA;YACA;UACA;UACA;YACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACAN;IACA;IACAO;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;MACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACAC;MACA;MACA;IACA;IACAC;MACA;MACA;QACAlB;MACA;QACA;QACA;UACAA;QACA;UACAA;QACA;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACAH;MACA;MACA;IACA;IACAsB;MAAA;MACA;MACA;QACA;QACA;QACA;UAAA;QAAA;QACA;QACA;QACA,4CACAC,mBACAC,SACAC,wEACAF,UACA;QACAG;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;MAAA,4CACAxB;QAAA;MAAA;QAAA;UAAA;UACA;UACA;YAAA,4CACAY;cAAA;YAAA;cAAA;gBAAA;gBACAa;cACA;YAAA;cAAA;YAAA;cAAA;YAAA;UACA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;MAAA,4CACAzB;QAAA;MAAA;QAAA;UAAA;UACA;UACA;YACAe;UACA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACAW;MACA;MAAA,4CACA1B;QAAA;MAAA;QAAA;UAAA;UACAe;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACAY;MACA;MACA;IACA;IACAC;MACA;MAEA;QACA;MACA;IACA;EACA;AACA","names":["name","mixins","props","value","type","filter","require","placeholder","required","default","filterPlaceholder","dialogTitle","cancelText","confirmText","treeFilter","multiple","ignoreFullCheckedChildren","leafOnly","includeHalfChecked","elProps","clearable","dict","data","currentValue","collapseTags","selected","dialogVisible","filterText","created","computed","_elProps","showCheckbox","highlightCurrent","defaultElProps","lodash","collapseTagSize","watch","methods","onDictLoaded","log","setValue","arrValue","nodes","selectedNodes","node","handleCheckChange","handleCurrentChange","openDialog","setTimeout","ids","doExpandParent","getValueKey","getValueLabel","getValueChildren","children","selectSubmit","doValueInputChanged","values","itemClosed","console","refreshSelected","resetInputHeight","sizeInMap","Math","tags","input","filterFullCheckedChildren","ignored","formatValue","filterNode","onChange"],"sourceRoot":"src/components/tree-selector/lib","sources":["tree-selector.vue"],"sourcesContent":["<template>\n  <div class=\"d2p-tree-selector\">\n    <div  class=\"el-cascader el-cascader--default\" :class=\"{'is-disabled':disabled}\" @click=\"openDialog\">\n      <div class=\"el-input el-input--default el-input--suffix\" :class=\"{'is-disabled':disabled}\" >\n        <el-input ref=\"reference\" :disabled=\"disabled\" :placeholder=\"value ? '' : placeholder\"/>\n        <span class=\"el-input__suffix\">\n          <span class=\"el-input__suffix-inner\">\n            <i class=\"el-input__icon el-icon-arrow-down\" @click=\"openDialog\"/>\n          </span>\n        </span>\n      </div>\n      <div class=\"el-cascader__tags\" ref=\"tags\">\n        <transition-group @after-leave=\"resetInputHeight\" >\n          <el-tag\n            v-for=\"item in selected\"\n            :key=\"getValueKey(item)\"\n            :closable=\"clearable\"\n            :size=\"collapseTagSize\"\n            :hit=\"false\"\n            type=\"info\"\n            @close=\"itemClosed(item)\"\n            disable-transitions>\n            <span class=\"el-select__tags-text\">{{ getValueLabel(item) }}</span>\n          </el-tag>\n        </transition-group>\n      </div>\n    </div>\n    <el-dialog custom-class=\"d2p-tree-selector-dialog\"\n      :title=\"dialogTitle\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\" append-to-body>\n      <div class=\"tree-wrapper\">\n        <div v-if=\"treeFilter\" class=\"filter-bar\" style=\"padding-bottom: 20px\">\n          <el-input\n            prefix-icon=\"el-icon-search\"\n            :placeholder=\"filterPlaceholder\"\n            v-model=\"filterText\" size=\"small\" >\n          </el-input>\n        </div>\n\n        <div class=\"tree-body\">\n          <el-tree\n            :data=\"_options\"\n            @check-change=\"handleCheckChange\"\n            @current-change=\"handleCurrentChange\"\n            :filterNodeMethod=\"filterNode\"\n            v-bind=\"_elProps\"\n            ref=\"elTree\">\n          </el-tree>\n        </div>\n\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">{{cancelText}}</el-button>\n          <el-button type=\"primary\" @click=\"selectSubmit\">{{confirmText}}</el-button>\n        </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport lodash from 'lodash'\nimport { d2CrudPlus } from 'd2-crud-plus'\nimport log from 'd2p-extends/src/utils/util.log'\n// 树形选择组件，需要import {D2pTreeSelector} from 'd2p-extends'\nexport default {\n  name: 'd2p-tree-selector',\n  mixins: [d2CrudPlus.input, d2CrudPlus.inputDict],\n  props: {\n    // 值\n    value: {\n      type: [Number, String, Boolean, Array, Object]\n    },\n    // 过滤，value中的nodes过滤方法 参数为nodes\n    filter: {\n      type: Function,\n      require: false\n    },\n    // 占位符\n    placeholder: {\n      type: String,\n      required: false,\n      default: '请选择'\n    },\n    // 过滤的placeholder\n    filterPlaceholder: {\n      type: String,\n      default: '输入关键字进行过滤'\n    },\n    dialogTitle: {\n      type: String,\n      default: '选择'\n    },\n    cancelText: {\n      type: String,\n      default: '取消'\n    },\n    confirmText: {\n      type: String,\n      default: '确定'\n    },\n    // 树形组件节点过滤，可以配置elProps.filterNodeMethod ，覆盖默认的过滤方法\n    treeFilter: {\n      type: Boolean,\n      require: false,\n      default: true\n    },\n    // 是否多选，传入false为单选\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    // 是否忽略选中节点的子节点\n    ignoreFullCheckedChildren: { type: Boolean, default: true },\n    // 是否只返回叶子节点\n    leafOnly: { type: Boolean, default: false },\n    // 是否包含半选节点\n    includeHalfChecked: { type: Boolean, default: false },\n    // el-tree的属性配置\n    elProps: {\n      type: Object\n    },\n    /**\n     * 是否可以清除\n     */\n    clearable: {\n      type: Boolean,\n      default: true\n    },\n    // 数据字典配置\n    dict: {\n      type: Object,\n      require: false\n    }\n  },\n  data () {\n    return {\n      currentValue: undefined,\n      collapseTags: false,\n      selected: [],\n      dialogVisible: false,\n      filterText: undefined\n    }\n  },\n  created () {\n    // if (this.dict) {\n    //   this.dict = d2CrudPlus.util.dict.mergeDefault(this.dict, true)\n    // }\n    // this.initData()\n  },\n  computed: {\n    _elProps () {\n      const defaultElProps = {\n        showCheckbox: this.multiple,\n        highlightCurrent: !this.multiple,\n        props: {}\n      }\n      if (this.dict != null) {\n        if (this.dict.label != null) { defaultElProps.props.label = this.dict.label }\n        if (this.dict.value != null) { defaultElProps.props.value = this.dict.value }\n        if (this.dict.children != null) { defaultElProps.props.children = this.dict.children }\n      }\n      defaultElProps.nodeKey = defaultElProps.props.value\n      lodash.merge(defaultElProps, this.elProps)\n      return defaultElProps\n    },\n    collapseTagSize () {\n      return ['small', 'mini'].indexOf(this.selectSize) > -1\n        ? 'mini'\n        : 'small'\n    }\n  },\n  watch: {\n    filterText (val) {\n      this.$refs.elTree.filter(val)\n    }\n  },\n  methods: {\n    // initData () {\n    //   d2CrudPlus.util.dict.get(this.dict).then(ret => {\n    //     this.$set(this, 'data', ret)\n    //     this.setValue(this.value)\n    //   })\n    // },\n    onDictLoaded () {\n      log.debug('onDictLoaded', this.dict, this.value)\n      this.setValue(this.value)\n    },\n    setValue (value) {\n      log.debug('setValue:', this.currentValue, this.value, this._options)\n      if (this.currentValue === this.value) {\n        return\n      }\n      let arrValue = value\n      if (value == null) {\n        this.selected = []\n      }\n\n      if (!(arrValue instanceof Array)) {\n        arrValue = [arrValue]\n      }\n      if (this.dict && this.dict.getNodes) {\n        log.debug('getNodes:', arrValue)\n        this.dict.getNodes(arrValue).then(nodes => {\n          this.selectedNodes(nodes, value)\n        })\n      } else {\n        const nodes = []\n        if (this._options == null || this._options.length === 0) {\n          return\n        }\n        for (const item of arrValue) {\n          const data = this._options\n          const node = d2CrudPlus.util.dict.getByValue(item, data, this.dict)\n          if (node != null) {\n            nodes.push(node)\n          }\n        }\n        this.selectedNodes(nodes, value)\n      }\n    },\n    selectedNodes (nodes, value) {\n      const selected = []\n      for (const node of nodes) {\n        node.id = node[this.dict.value]\n        selected.push(node)\n      }\n      log.debug('selected:', selected)\n      this.$set(this, 'selected', selected)\n      this.resetInputHeight()\n    },\n    handleCheckChange (event) {\n      this.$emit('check-change', event)\n    },\n    handleCurrentChange (event) {\n      this.$emit('current-change', event)\n    },\n    openDialog () {\n      if (this.disabled) {\n        return\n      }\n      this.dialogVisible = true\n      setTimeout(() => {\n        if (this.selected != null) {\n          const ids = this.selected.map(item => item[this._elProps.props.value])\n          ids.forEach(id => {\n            const current = this.$refs.elTree.store.nodesMap[id]\n            if (current != null) {\n              this.doExpandParent(current)\n            }\n          })\n          this.$nextTick(() => {\n            if (this.multiple) {\n              this.$refs.elTree.setCheckedKeys(ids, this.leafOnly)\n            } else if (ids.length > 0) {\n              this.$refs.elTree.setCurrentKey(ids[0])\n            }\n          })\n        }\n      }, 1)\n    },\n    doExpandParent (node) {\n      if (node.parent != null) {\n        this.doExpandParent(node.parent)\n      }\n      node.expanded = true\n    },\n    getValueKey (item) {\n      if (this._elProps.props.value != null) {\n        return item[this._elProps.props.value]\n      } else {\n        return item.value\n      }\n    },\n    getValueLabel (item) {\n      if (this._elProps.props.label != null) {\n        return item[this._elProps.props.label]\n      } else {\n        return item.label\n      }\n    },\n    getValueChildren (item) {\n      let children = 'children'\n      if (this._elProps.props.children != null) {\n        children = this._elProps.props.children\n      }\n      return item[children]\n    },\n    selectSubmit () {\n      const nodes = this.refreshSelected()\n      this.dialogVisible = false\n      this.doValueInputChanged(nodes)\n    },\n    doValueInputChanged (nodes) {\n      let values = this.formatValue(nodes)\n      this.resetInputHeight()\n      if (!this.multiple) {\n        values = values && values.length > 0 ? values[0] : undefined\n      }\n      this.currentValue = values\n      if (this.dispatch) {\n        this.dispatch('ElFormItem', 'el.form.blur')\n      }\n      this.$emit('input', values)\n    },\n    itemClosed (item) {\n      const newNodes = lodash.without(this.selected, item)\n      console.log('new value', item, newNodes)\n      this.$set(this, 'selected', newNodes)\n      this.doValueInputChanged(newNodes)\n    },\n    refreshSelected () {\n      let nodes = null\n      if (this.multiple) {\n        nodes = this.$refs.elTree.getCheckedNodes(this.leafOnly, this.includeHalfChecked)\n      } else {\n        const node = this.$refs.elTree.getCurrentNode()\n        if (node == null) {\n          nodes = []\n        } else {\n          nodes = [node]\n        }\n      }\n      if (this.ignoreFullCheckedChildren) {\n        nodes = this.filterFullCheckedChildren(nodes)\n      }\n      if (this.filter != null) {\n        nodes = this.filter(nodes)\n      }\n      log.debug('selected', this.selected)\n      this.$set(this, 'selected', nodes)\n      return nodes\n    },\n    resetInputHeight () {\n      if (this.collapseTags && !this.filterable) return\n      this.$nextTick(() => {\n        if (!this.$refs.reference) return\n        const inputChildNodes = this.$refs.reference.$el.childNodes\n        const input = [].filter.call(inputChildNodes, item => item.tagName === 'INPUT')[0]\n        const tags = this.$refs.tags\n        const sizeInMap = this.initialInputHeight || 40\n        const height = this.selected.length === 0\n          ? sizeInMap + 'px'\n          : Math.max(\n            tags ? (tags.clientHeight + (tags.clientHeight > sizeInMap ? 6 : 0)) : 0,\n            sizeInMap\n          ) + 'px'\n        input.style.height = height\n        if (this.visible && this.emptyText !== false) {\n          this.broadcast('ElSelectDropdown', 'updatePopper')\n        }\n      })\n    },\n    filterFullCheckedChildren (nodes) {\n      const ignored = new Set()\n      for (const item of nodes) {\n        const children = this.getValueChildren(item)\n        if (children != null) {\n          for (const child of children) {\n            ignored.add(this.getValueKey(child))\n          }\n        }\n      }\n      const values = []\n      for (const item of nodes) {\n        const key = this.getValueKey(item)\n        if (!ignored.has(key)) {\n          values.push(item)\n        }\n      }\n      return values\n    },\n    formatValue (nodes) {\n      const values = []\n      for (const item of nodes) {\n        values.push(this.getValueKey(item))\n      }\n      return values\n    },\n    filterNode (value, data) {\n      if (!value) return true\n      return this.getValueLabel(data).indexOf(value) !== -1\n    },\n    onChange (value) {\n      this.$emit('change', value)\n\n      if (this.dispatch) {\n        this.dispatch('ElFormItem', 'el.form.blur')\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.d2p-tree-selector{\n  width: 100%;\n  .el-cascader{\n    width: 100%;\n  }\n  .is-disabled .el-tag__close.el-icon-close {\n    display: none;\n  }\n}\n.d2p-tree-selector-dialog{\n  &.el-dialog{\n    max-height:70vh;\n    display: flex;\n    flex-direction: column;\n    .el-dialog__body{\n      flex:1;\n      overflow-y: auto;\n    }\n    .el-dialog__header{\n      padding: 20px 20px 20px;\n      border-bottom: 1px solid #eee;\n    }\n    .el-dialog__footer {\n      padding: 10px 20px 10px;\n      border-top: 1px solid #eee;\n    }\n  }\n}\n</style>\n"]}]}