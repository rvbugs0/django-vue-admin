{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js??ref--14-0!/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/theme.js","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/theme.js","mtime":1674694301488},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js","mtime":1674694549000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHNldHRpbmcgZnJvbSAnQC9zZXR0aW5nLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIC8vIOS4u+mimAogICAgbGlzdDogZ2V0KHNldHRpbmcsICd0aGVtZS5saXN0JywgW10pLAogICAgLy8g546w5Zyo5r+A5rS755qE5Li76aKYIOi/meW6lOivpeaYr+S4gOS4quWQjeWtlyDkuI3mmK/lr7nosaEKICAgIGFjdGl2ZU5hbWU6IGdldChzZXR0aW5nLCAndGhlbWUubGlzdFswXS5uYW1lJywgJ2QyJykKICB9LAogIGdldHRlcnM6IHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOi/lOWbnuW9k+WJjeeahOS4u+mimOS/oeaBryDkuI3mmK/kuIDkuKrlkI3lrZcg6ICM5piv5b2T5YmN5r+A5rS75Li76aKY55qE5omA5pyJ5pWw5o2uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUKICAgICAqLwogICAgYWN0aXZlU2V0dGluZzogZnVuY3Rpb24gYWN0aXZlU2V0dGluZyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubGlzdC5maW5kKGZ1bmN0aW9uICh0aGVtZSkgewogICAgICAgIHJldHVybiB0aGVtZS5uYW1lID09PSBzdGF0ZS5hY3RpdmVOYW1lOwogICAgICB9KTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOa/gOa0u+S4gOS4quS4u+mimAogICAgICogQHBhcmFtIHtTdHJpbmd9IHRoZW1lVmFsdWUg6ZyA6KaB5r+A5rS755qE5Li76aKY5ZCN56ewCiAgICAgKi8KICAgIHNldDogZnVuY3Rpb24gc2V0KF9yZWYsIHRoZW1lTmFtZSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYuc3RhdGUsIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgLy8g5qOA5p+l6L+Z5Liq5Li76aKY5Zyo5Li76aKY5YiX6KGo6YeM5piv5ZCm5a2Y5ZyoCiAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlTmFtZSA9IHN0YXRlLmxpc3QuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gdGhlbWVOYW1lOwogICAgICAgICAgICAgIH0pID8gdGhlbWVOYW1lIDogc3RhdGUubGlzdFswXS5uYW1lOwogICAgICAgICAgICAgIC8vIOWwhiB2dWV4IOS4reeahOS4u+mimOW6lOeUqOWIsCBkb20KICAgICAgICAgICAgICBjb21taXQoJ2RvbScpOwogICAgICAgICAgICAgIC8vIOaMgeS5heWMlgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgcGF0aDogJ3RoZW1lLmFjdGl2ZU5hbWUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLmFjdGl2ZU5hbWUsCiAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5LuO5oyB5LmF5YyW5pWw5o2u5Yqg6L295Li76aKY6K6+572uICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKi8KICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBhY3RpdmVOYW1lOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlLCBjb21taXQgPSBfcmVmMi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9nZXQnLCB7CiAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgcGF0aDogJ3RoZW1lLmFjdGl2ZU5hbWUnLAogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzdGF0ZS5saXN0WzBdLm5hbWUsCiAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgYWN0aXZlTmFtZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGlmICghc3RhdGUubGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5uYW1lID09PSBhY3RpdmVOYW1lOwogICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlTmFtZSA9IGFjdGl2ZU5hbWU7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHN0YXRlLmFjdGl2ZU5hbWUgPSBzdGF0ZS5saXN0WzBdLm5hbWU7CiAgICAgICAgICAgICAgLy8g5oyB5LmF5YyWCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvc2V0JywgewogICAgICAgICAgICAgICAgZGJOYW1lOiAnc3lzJywKICAgICAgICAgICAgICAgIHBhdGg6ICd0aGVtZS5hY3RpdmVOYW1lJywKICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS5hY3RpdmVOYW1lLAogICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAvLyDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tCiAgICAgICAgICAgICAgY29tbWl0KCdkb20nKTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUKICAgICAqLwogICAgZG9tOiBmdW5jdGlvbiBkb20oc3RhdGUpIHsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSAidGhlbWUtIi5jb25jYXQoc3RhdGUuYWN0aXZlTmFtZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["get","setting","namespaced","state","list","activeName","getters","activeSetting","find","theme","name","actions","set","themeName","commit","dispatch","e","dbName","path","value","user","root","load","defaultValue","mutations","dom","document","body","className"],"sources":["/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/theme.js"],"sourcesContent":["import { get } from 'lodash'\nimport setting from '@/setting.js'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 主题\n    list: get(setting, 'theme.list', []),\n    // 现在激活的主题 这应该是一个名字 不是对象\n    activeName: get(setting, 'theme.list[0].name', 'd2')\n  },\n  getters: {\n    /**\n     * @description 返回当前的主题信息 不是一个名字 而是当前激活主题的所有数据\n     * @param {Object} state state\n     */\n    activeSetting (state) {\n      return state.list.find(theme => theme.name === state.activeName)\n    }\n  },\n  actions: {\n    /**\n     * @description 激活一个主题\n     * @param {String} themeValue 需要激活的主题名称\n     */\n    async set ({ state, commit, dispatch }, themeName) {\n      // 检查这个主题在主题列表里是否存在\n      state.activeName = state.list.find(e => e.name === themeName) ? themeName : state.list[0].name\n      // 将 vuex 中的主题应用到 dom\n      commit('dom')\n      // 持久化\n      await dispatch('d2admin/db/set', {\n        dbName: 'sys',\n        path: 'theme.activeName',\n        value: state.activeName,\n        user: true\n      }, { root: true })\n    },\n    /**\n     * @description 从持久化数据加载主题设置     * @param {Object} context\n     */\n    async load ({ state, commit, dispatch }) {\n      // store 赋值\n      const activeName = await dispatch('d2admin/db/get', {\n        dbName: 'sys',\n        path: 'theme.activeName',\n        defaultValue: state.list[0].name,\n        user: true\n      }, { root: true })\n      // 检查这个主题在主题列表里是否存在\n      if (state.list.find(e => e.name === activeName)) {\n        state.activeName = activeName\n      } else {\n        state.activeName = state.list[0].name\n        // 持久化\n        await dispatch('d2admin/db/set', {\n          dbName: 'sys',\n          path: 'theme.activeName',\n          value: state.activeName,\n          user: true\n        }, { root: true })\n      }\n      // 将 vuex 中的主题应用到 dom\n      commit('dom')\n    }\n  },\n  mutations: {\n    /**\n     * @description 将 vuex 中的主题应用到 dom\n     * @param {Object} state state\n     */\n    dom (state) {\n      document.body.className = `theme-${state.activeName}`\n    }\n  }\n}\n"],"mappings":"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"}]}