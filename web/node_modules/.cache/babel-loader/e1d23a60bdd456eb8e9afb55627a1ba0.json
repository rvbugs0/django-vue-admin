{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/components/associationTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/views/system/config/components/components/associationTable.vue","mtime":1674694301490},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/vue-loader/lib/index.js","mtime":1674694549360}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAnLi4vLi4vYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhc3NvY2lhdGlvblRhYmxlJywKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBtb2RlbDogewogICAgcHJvcDogJ3ZhbHVlJywKICAgIGV2ZW50OiAndXBkYXRlVmFsJwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1PYmo6IHsKICAgICAgICB0YWJsZTogbnVsbCwKICAgICAgICBwcmltYXJ5a2V5OiBudWxsLAogICAgICAgIGZpZWxkOiBudWxsLAogICAgICAgIHNlYXJjaEZpZWxkOiBudWxsLAogICAgICAgIG9sZFNlYXJjaEZpZWxkOiBudWxsCiAgICAgIH0sCiAgICAgIHNlYXJjaEZpZWxkOiBudWxsLAogICAgICB0YWJsZU9wdGlvbnM6IFtdLAogICAgICBsYWJlbE9wdGlvbnM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yid5aeL5YyW5pWw5o2uCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBhcGkuR2V0QXNzb2NpYXRpb25UYWJsZSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMudGFibGVPcHRpb25zID0gZGF0YTsKICAgICAgICAvLyDorr7nva7pu5jorqTpgInkuK0KICAgICAgICBfdGhpcy5mb3JtT2JqLnRhYmxlID0gZGF0YVswXS50YWJsZTsKICAgICAgICBfdGhpcy5sYWJlbE9wdGlvbnMgPSBkYXRhWzBdLnRhYmxlRmllbGRzOwogICAgICAgIF90aGlzLmZvcm1PYmoucHJpbWFyeWtleSA9ICdpZCc7CiAgICAgICAgX3RoaXMuZm9ybU9iai5maWVsZCA9ICdpZCc7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmAieS4reS6i+S7tgogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UodmFsKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIF90aGF0JHRhYmxlT3B0aW9ucyRmaSA9IHRoYXQudGFibGVPcHRpb25zLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLnRhYmxlID09PSB2YWw7CiAgICAgICAgfSksCiAgICAgICAgdGFibGVGaWVsZHMgPSBfdGhhdCR0YWJsZU9wdGlvbnMkZmkudGFibGVGaWVsZHM7CiAgICAgIHRoYXQubGFiZWxPcHRpb25zID0gdGFibGVGaWVsZHM7CiAgICB9LAogICAgLy8g6L+H5ruk5p2h5Lu26YCJ5LitCiAgICBoYW5kbGVTZWFyY2g6IGZ1bmN0aW9uIGhhbmRsZVNlYXJjaCh2YWwpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgZmllbGRzID0gdGhhdC5sYWJlbE9wdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIHZhbC5pbmRleE9mKGl0ZW0uZmllbGQpID4gLTE7CiAgICAgIH0pOwogICAgICB0aGF0LmZvcm1PYmouc2VhcmNoRmllbGQgPSBmaWVsZHM7CiAgICB9LAogICAgLy8g5pu05paw5pWw5o2uCiAgICBoYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZSgpIHsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlVmFsJywgdGhpcy5mb3JtT2JqKTsKICAgIH0sCiAgICAvLyDmlbDmja7pqozor4EKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIHJlcyA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLmFzc29jaWF0aW9uLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgcmVzID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiByZXM7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"mappings":";;;AAiEA;AAEA;EACAA;EACAC;IACAC;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAD;MACAE;MACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;UACA;QACA;QAFAC;MAGAC;IACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACAD;IACA;IACA;IACAE;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;UACAC;QACA;UACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["name","props","value","type","model","prop","event","data","formObj","table","primarykey","field","searchField","oldSearchField","tableOptions","labelOptions","methods","init","api","handleChange","tableFields","that","handleSearch","handleUpdate","onSubmit","res","created"],"sourceRoot":"src/views/system/config/components/components","sources":["associationTable.vue"],"sourcesContent":["<template>\n  <div>\n    <el-form :model=\"formObj\" ref=\"association\">\n      <el-form-item label=\"关联表\" prop=\"table\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.table\" filterable clearable placeholder=\"请选择\" @change=\"handleChange\">\n          <el-option\n            v-for=\"item in tableOptions\"\n            :key=\"item.table\"\n            :label=\"item.tableName\"\n            :value=\"item.table\">\n            <span style=\"float: left\">{{ item.tableName }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.table }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"显示字段\" prop=\"field\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.field\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"item in labelOptions\"\n            :key=\"item.table\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"储存字段\" prop=\"primarykey\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.primarykey\" filterable clearable placeholder=\"请选择\">\n          <el-option\n            v-for=\"(item,index) in labelOptions\"\n            :key=\"index\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"过滤条件\" prop=\"oldSearchField\" :rules=\"[\n      { required: true, message: '必填项', trigger: 'blur' }\n    ]\">\n        <el-select v-model=\"formObj.oldSearchField\" multiple filterable clearable placeholder=\"请选择\"\n                   @change=\"handleSearch\">\n          <el-option\n            v-for=\"(item,index) in labelOptions\"\n            :key=\"index\"\n            :label=\"item.title\"\n            :value=\"item.field\">\n            <span style=\"float: left\">{{ item.field }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">{{ item.title }}</span>\n          </el-option>\n        </el-select>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport * as api from '../../api'\n\nexport default {\n  name: 'associationTable',\n  props: {\n    value: {\n      type: Object\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'updateVal'\n  },\n  data () {\n    return {\n      formObj: {\n        table: null,\n        primarykey: null,\n        field: null,\n        searchField: null,\n        oldSearchField: null\n      },\n      searchField: null,\n      tableOptions: [],\n      labelOptions: []\n    }\n  },\n  methods: {\n    // 初始化数据\n    init () {\n      api.GetAssociationTable().then(res => {\n        const { data } = res\n        this.tableOptions = data\n        // 设置默认选中\n        this.formObj.table = data[0].table\n        this.labelOptions = data[0].tableFields\n        this.formObj.primarykey = 'id'\n        this.formObj.field = 'id'\n      })\n    },\n    // 选中事件\n    handleChange (val) {\n      const that = this\n      const { tableFields } = that.tableOptions.find(item => {\n        return item.table === val\n      })\n      that.labelOptions = tableFields\n    },\n    // 过滤条件选中\n    handleSearch (val) {\n      const that = this\n      const fields = that.labelOptions.filter(item => {\n        return val.indexOf(item.field) > -1\n      })\n      that.formObj.searchField = fields\n    },\n    // 更新数据\n    handleUpdate () {\n      this.$emit('updateVal', this.formObj)\n    },\n    // 数据验证\n    onSubmit () {\n      let res = false\n      this.$refs.association.validate((valid) => {\n        if (valid) {\n          res = true\n        } else {\n          return false\n        }\n      })\n      return res\n    }\n  },\n  created () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}