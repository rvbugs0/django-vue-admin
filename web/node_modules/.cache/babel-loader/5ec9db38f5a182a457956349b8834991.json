{"remainingRequest":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js!/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js??ref--14-0!/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/size.js","dependencies":[{"path":"/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/size.js","mtime":1674694301488},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/babel.config.js","mtime":1674694301461},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/cache-loader/dist/cjs.js","mtime":1674694548948},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/babel-loader/lib/index.js","mtime":1674694549283},{"path":"/Users/raviailani/Downloads/django-vue-admin/web/node_modules/eslint-loader/index.js","mtime":1674694549000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3JhdmlhaWxhbmkvRG93bmxvYWRzL2RqYW5nby12dWUtYWRtaW4vd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgLy8g5bC65a+4CiAgICB2YWx1ZTogJycgLy8gbWVkaXVtIHNtYWxsIG1pbmkKICB9LAoKICBhY3Rpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlsIblvZPliY3nmoTorr7nva7lupTnlKjliLAgZWxlbWVudAogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVmcmVzaCDmmK/lkKblnKjorr7nva7kuYvlkI7liLfmlrDpobXpnaIKICAgICAqLwogICAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KF9yZWYsIHJlZnJlc2gpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgVnVlLnByb3RvdHlwZS4kRUxFTUVOVC5zaXplID0gc3RhdGUudmFsdWU7CiAgICAgIGlmIChyZWZyZXNoKSB7CiAgICAgICAgY29tbWl0KCdkMmFkbWluL3BhZ2Uva2VlcEFsaXZlQ2xlYW4nLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9yZWZyZXNoJyk7CiAgICAgIH0KICAgIH0sCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDnoa7orqTlt7Lnu4/liqDovb3nu4Tku7blsLrlr7jorr7nva4gaHR0cHM6Ly9naXRodWIuY29tL2QyLXByb2plY3RzL2QyLWFkbWluL2lzc3Vlcy8xOTgKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKi8KICAgIGlzTG9hZGVkOiBmdW5jdGlvbiBpc0xvYWRlZChfcmVmMikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgaWYgKHN0YXRlLnZhbHVlKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChzdGF0ZS52YWx1ZSkgcmVzb2x2ZShjbGVhckludGVydmFsKHRpbWVyKSk7CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDorr7nva7lsLrlr7gKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2l6ZSDlsLrlr7gKICAgICAqLwogICAgc2V0OiBmdW5jdGlvbiBzZXQoX3JlZjMsIHNpemUpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgLy8gc3RvcmUg6LWL5YC8CiAgICAgICAgICAgICAgc3RhdGUudmFsdWUgPSBzaXplOwogICAgICAgICAgICAgIC8vIOW6lOeUqAogICAgICAgICAgICAgIGRpc3BhdGNoKCdhcHBseScsIHRydWUpOwogICAgICAgICAgICAgIC8vIOaMgeS5heWMlgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgcGF0aDogJ3NpemUudmFsdWUnLAogICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLnZhbHVlLAogICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOS7juaMgeS5heWMluaVsOaNruivu+WPluWwuuWvuOiuvue9rgogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqLwogICAgbG9hZDogZnVuY3Rpb24gbG9hZChfcmVmNCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlLCBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvZ2V0JywgewogICAgICAgICAgICAgICAgZGJOYW1lOiAnc3lzJywKICAgICAgICAgICAgICAgIHBhdGg6ICdzaXplLnZhbHVlJywKICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2RlZmF1bHQnLAogICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHN0YXRlLnZhbHVlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgLy8g5bqU55SoCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FwcGx5Jyk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Vue","router","namespaced","state","value","actions","apply","refresh","commit","prototype","$ELEMENT","size","root","replace","isLoaded","Promise","resolve","timer","setInterval","clearInterval","set","dispatch","dbName","path","user","load","defaultValue"],"sources":["/Users/raviailani/Downloads/django-vue-admin/web/src/store/modules/d2admin/modules/size.js"],"sourcesContent":["import Vue from 'vue'\nimport router from '@/router'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 尺寸\n    value: '' // medium small mini\n  },\n  actions: {\n    /**\n     * @description 将当前的设置应用到 element\n     * @param {Object} context\n     * @param {Boolean} refresh 是否在设置之后刷新页面\n     */\n    apply ({ state, commit }, refresh) {\n      Vue.prototype.$ELEMENT.size = state.value\n      if (refresh) {\n        commit('d2admin/page/keepAliveClean', null, { root: true })\n        router.replace('/refresh')\n      }\n    },\n    /**\n     * @description 确认已经加载组件尺寸设置 https://github.com/d2-projects/d2-admin/issues/198\n     * @param {Object} context\n     */\n    isLoaded ({ state }) {\n      if (state.value) return Promise.resolve()\n      return new Promise(resolve => {\n        const timer = setInterval(() => {\n          if (state.value) resolve(clearInterval(timer))\n        }, 10)\n      })\n    },\n    /**\n     * @description 设置尺寸\n     * @param {Object} context\n     * @param {String} size 尺寸\n     */\n    async set ({ state, dispatch }, size) {\n      // store 赋值\n      state.value = size\n      // 应用\n      dispatch('apply', true)\n      // 持久化\n      await dispatch('d2admin/db/set', {\n        dbName: 'sys',\n        path: 'size.value',\n        value: state.value,\n        user: true\n      }, { root: true })\n    },\n    /**\n     * @description 从持久化数据读取尺寸设置\n     * @param {Object} context\n     */\n    async load ({ state, dispatch }) {\n      // store 赋值\n      state.value = await dispatch('d2admin/db/get', {\n        dbName: 'sys',\n        path: 'size.value',\n        defaultValue: 'default',\n        user: true\n      }, { root: true })\n      // 应用\n      dispatch('apply')\n    }\n  }\n}\n"],"mappings":";;;;;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,MAAM,MAAM,UAAU;AAE7B,eAAe;EACbC,UAAU,EAAE,IAAI;EAChBC,KAAK,EAAE;IACL;IACAC,KAAK,EAAE,EAAE,CAAC;EACZ,CAAC;;EACDC,OAAO,EAAE;IACP;AACJ;AACA;AACA;AACA;IACIC,KAAK,uBAAqBC,OAAO,EAAE;MAAA,IAA1BJ,KAAK,QAALA,KAAK;QAAEK,MAAM,QAANA,MAAM;MACpBR,GAAG,CAACS,SAAS,CAACC,QAAQ,CAACC,IAAI,GAAGR,KAAK,CAACC,KAAK;MACzC,IAAIG,OAAO,EAAE;QACXC,MAAM,CAAC,6BAA6B,EAAE,IAAI,EAAE;UAAEI,IAAI,EAAE;QAAK,CAAC,CAAC;QAC3DX,MAAM,CAACY,OAAO,CAAC,UAAU,CAAC;MAC5B;IACF,CAAC;IACD;AACJ;AACA;AACA;IACIC,QAAQ,2BAAa;MAAA,IAATX,KAAK,SAALA,KAAK;MACf,IAAIA,KAAK,CAACC,KAAK,EAAE,OAAOW,OAAO,CAACC,OAAO,EAAE;MACzC,OAAO,IAAID,OAAO,CAAC,UAAAC,OAAO,EAAI;QAC5B,IAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;UAC9B,IAAIf,KAAK,CAACC,KAAK,EAAEY,OAAO,CAACG,aAAa,CAACF,KAAK,CAAC,CAAC;QAChD,CAAC,EAAE,EAAE,CAAC;MACR,CAAC,CAAC;IACJ,CAAC;IACD;AACJ;AACA;AACA;AACA;IACUG,GAAG,sBAAuBT,IAAI,EAAE;MAAA;QAAA;QAAA;UAAA;YAAA;cAAzBR,KAAK,SAALA,KAAK,EAAEkB,QAAQ,SAARA,QAAQ;cAC1B;cACAlB,KAAK,CAACC,KAAK,GAAGO,IAAI;cAClB;cACAU,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC;cACvB;cAAA;cAAA,OACMA,QAAQ,CAAC,gBAAgB,EAAE;gBAC/BC,MAAM,EAAE,KAAK;gBACbC,IAAI,EAAE,YAAY;gBAClBnB,KAAK,EAAED,KAAK,CAACC,KAAK;gBAClBoB,IAAI,EAAE;cACR,CAAC,EAAE;gBAAEZ,IAAI,EAAE;cAAK,CAAC,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACpB,CAAC;IACD;AACJ;AACA;AACA;IACUa,IAAI,uBAAuB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAnBtB,KAAK,SAALA,KAAK,EAAEkB,QAAQ,SAARA,QAAQ;cAAA;cAAA,OAEPA,QAAQ,CAAC,gBAAgB,EAAE;gBAC7CC,MAAM,EAAE,KAAK;gBACbC,IAAI,EAAE,YAAY;gBAClBG,YAAY,EAAE,SAAS;gBACvBF,IAAI,EAAE;cACR,CAAC,EAAE;gBAAEZ,IAAI,EAAE;cAAK,CAAC,CAAC;YAAA;cALlBT,KAAK,CAACC,KAAK;cAMX;cACAiB,QAAQ,CAAC,OAAO,CAAC;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACnB;EACF;AACF,CAAC"}]}